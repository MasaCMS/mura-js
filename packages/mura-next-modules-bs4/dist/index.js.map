{"version":3,"file":"index.js","sources":["../src/Video/Youtube.js","../src/Video/Vimeo.js","../src/Video/Wistia.js","../src/Video/ModalVideo.js","../src/Video/Video.js","../src/ItemDate.js","../src/ItemCredits.js","../src/ItemTags.js","../node_modules/@murasoftware/next-core/dist/index.modern.js","../src/OutputMarkup.js","../src/ArticleMeta.js","../src/Collection.js","../src/CollectionNav.js","../src/CollectionLayout.js","../src/CollectionReadMoreBtn.js","../src/ItemImage.js","../src/CollectionLayoutAccordion.js","../src/CollectionLayoutAlternatingBoxes.js","../src/CollectionLayoutAlternatingRows.js","../src/ItemCategories.js","../src/NoItemsMessage.js","../src/CollectionLayoutCards.js","../src/CollectionLayoutList.js","../src/CollectionLayoutMasonry.js","../src/CollectionLayoutSlickSlider.js","../src/Container.js","../src/Hr.js","../src/CTAButton.js","../src/Embed.js","../src/Image.js","../src/Login.js","../src/MatrixSelector.js","../src/PrimaryNav.js","../src/ResourceHub.js","../src/Text.js","../src/PrivacyTools.js"],"sourcesContent":["import React from 'react';\n\n\nfunction Youtube(props) {\n  const { instanceid, videoid } = props;\n  // z5DqB0cv8uw\n  return (\n    <div className=\"youtubeWrapper\" id={`player-${instanceid}`}>\n      <iframe\n        title=\"Youtube Player\"\n        src={`//www.youtube.com/embed/${videoid}?rel=0&autoplay=0&vq=hd1080&controls=1`}\n        frameBorder=\"0\"\n        allowFullScreen\n      />\n    </div>\n  );\n}\n\nexport default Youtube;","function Vimeo(props) {\n\tconst { instanceid, videoid } = props;\n\t// 56282283\n\treturn (\n\t  <div className=\"vimeoWrapper\" id={`player-${instanceid}`}>\n\t\t<iframe\n\t\t\tsrc={`https://player.vimeo.com/video/${videoid}`}\n\t\t\twidth=\"960\"\n\t\t\theight=\"540\"\n\t\t\tframeBorder=\"0\"\n\t\t\tallow=\"autoplay; fullscreen\"\n\t\t\tallowFullScreen>\n\t\t</iframe>\t\t\n\t  </div>\n\t);\n}\n\nexport default Vimeo;","import Head from 'next/head';\n\nfunction Wistia(props) {\n\tconst { instanceid, videoid } = props;\n\t// j38ihh83m5\n\treturn (\n\t  <div className=\"wistiaWrapper\" id={`player-${instanceid}`}>\n\t\t<Head>\n\t\t\t<script src='https://fast.wistia.net/assets/external/E-v1.js'></script>\n\t\t\t<script src={`https://fast.wistia.com/embed/medias/${videoid}.jsonp`}></script>\n\t\t</Head>\n\t\t<div\n\t\t\tclassName=\"wistia_responsive_padding\"\n\t\t\tstyle={{padding: '56.25% 0 0 0',position: 'relative'}}>\n\t\t<div\n\t\t\tclassName=\"wistia_responsive_wrapper\"\n\t\t\tstyle={{height:'100%',left:0,position:'absolute',top:0,width:'100%'}}>\n\t\t<div\n\t\t\tclassName={`wistia_embed wistia_async_${videoid}`}\n\t\t\tseo='false'\n\t\t\tvideofoam='true'\n\t\t\tstyle={{height:'100%',width:'100%'}}>&nbsp;</div></div></div>\n\t  </div>\n\t);\n}\n\nexport default Wistia;","import Head from 'next/head';\n\nconst ModalVideo = ({props,children}) => {\n\n\tconst {modalcta,buttonclass,buttonplayiconsize,buttonctatext,showbuttonplayicon} = props;\n\n\tswitch(modalcta) {\n\t\tcase \"button\":\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonclick=\"openVidyardLightbox('#esapiEncode('html',objectparams.videoid)#'); return false;\"\n\t\t\t\t\tclassName={`btn btn-${buttonclass}`}>\n\t\t\t\t\t{showbuttonplayicon ?\n\t\t\t\t\t\t<i className={`fas fa-play fa-${buttonplayiconsize} align-middle`}></i>\n\t\t\t\t\t\t:\n\t\t\t\t\t\tnull\n\t\t\t\t\t}\n\t\t\t\t\t{buttonctatext}\n\t\t\t\t\t<Head>\n\t\t\t\t\t\n\t\t\t\t\t</Head>\n\t\t\t\t</button>\n\t\t\t)\n\t\t\tbreak;\t\n\n\t\tdefault:\n\t\t\treturn <div>Nah</div>\n\t}\n}\n\nexport default ModalVideo;","import Youtube from './Youtube';\nimport Vimeo from './Vimeo';\n//import Vidyard from './Vidyard';\nimport Wistia from './Wistia';\nimport ModalVideo from './ModalVideo';\nimport {videoConfig} from './videoConfig';\n\nconst getVideoPlayer = props => {\n  const players = {};\n  players['youtube'] = Youtube(props);\n  players['vimeo'] = Vimeo(props);\n  players['wistia'] = Wistia(props);\n  //players['vidyard'] = Vidyard(props);\n\n  return players[props.videoplatform];\n};\n\nfunction Video(props) {\n\n  const { displaytype, videoid, videoplatform } = props;\n  const {modalsize} = videoConfig;\n  if(!videoplatform.length) {\n    return <div>Video platform missing.</div>\n  }\n  else if(!videoid) {\n    return <div>Video id missing.</div>\n  }\n  else {\n    if(displaytype === 'modal') {\n      return (\n      <ModalVideo props={props}>\n        {getVideoPlayer(props)}\n      </ModalVideo>\n      )\n    }\n    else {\n      return getVideoPlayer(props);\n    }\n  }\n}\n\nexport default Video;\n","export const ItemDate = (props) => {\n    let date = '';\n    let formatteddate = '';\n  \n    if(props.releasedate){\n      date = new Date(props.releasedate);\n    } else {\n      date = new Date(props.lastupdate);\n    }\n    //console.log(date);\n    \n    formatteddate = Intl.DateTimeFormat(\"en-US\", {year: \"numeric\",month: \"long\",day: \"2-digit\"}).format(date);\n\n    return (\n        formatteddate\n    )\n  }\n\n  export default ItemDate;","import React from 'react';\n\nconst ItemCredits = (props) => {\n    const Credits = props.credits.split(',');\n    let creditsList = [];\n    let credit = '';\n    // console.log(props.tags);\n    for(let i = 0;i < Credits.length;i++) {\n        credit = Credits[i];\n        creditsList.push(\n            <div className=\"mura-item-meta__credits pb-2\" key={credit}>\n                By: <strong>{credit}</strong>\n            </div>\n        )\n    }\n\n    return creditsList;\n}\n\nexport default ItemCredits;","import React from 'react';\nimport Badge from 'react-bootstrap/Badge';\n\nfunction ItemTags(props){\n    \n    const Tags = props.tags.split(',');;\n    let tagList = [];\n    let tag = '';\n    // console.log(props.tags);\n    for(let i = 0;i < Tags.length;i++) {\n        tag = Tags[i];\n        tagList.push(\n            <Badge variant=\"primary mr-2\" key={tag}>{tag}</Badge>\n        )\n    }\n\n    return tagList;\n\n}\n\nexport default ItemTags;","import React, { createContext, useEffect as useEffect$1 } from 'react';\nimport Mura from 'mura.js';\nimport { getMuraConfig as getMuraConfig$1, getIsEditMode as getIsEditMode$1, setIsEditMode as setIsEditMode$1 } from '@murasoftware/next-core';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\n// A type of promise-like that resolves synchronously and supports only one observer\nconst _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t};\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nfunction _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nfunction _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nfunction _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nfunction _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nconst _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\nconst _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously call a function and send errors to recovery continuation\nfunction _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\nvar getModuleProps = function getModuleProps(item, moduleStyleData, isEditMode, content) {\n  try {\n    var _temp22 = function _temp22() {\n      var styleData = Mura.recordModuleStyles(item);\n      return {\n        isEditMode: isEditMode,\n        cssRules: styleData.cssRules,\n        targets: styleData.targets,\n        id: 'mura-styles' + item.instanceid,\n        stylesupport: item.stylesupport || {}\n      };\n    };\n\n    getMura();\n\n    var _temp23 = _catch(function () {\n      var objectkey = item.object;\n\n      if (typeof ComponentRegistry[objectkey] == 'undefined') {\n        objectkey = Mura.firstToUpperCase(item.object);\n      }\n\n      var _temp19 = function () {\n        if (typeof ComponentRegistry[objectkey] != 'undefined') {\n          var _temp24 = function _temp24() {\n            var _temp16 = function () {\n              if (item.object == 'container') {\n                if (typeof item.items != 'undefined' && !Array.isArray(item.items)) {\n                  try {\n                    item.items = JSON.parse(item.items);\n                  } catch (e) {\n                    item.items = [];\n                  }\n                }\n\n                var _temp26 = _forIn(item.items, function (containerIdx) {\n                  var containerItem = item.items[containerIdx];\n                  containerItem.instanceid = containerItem.instanceid || Mura.createUUID();\n                  return Promise.resolve(getModuleProps(containerItem, moduleStyleData, isEditMode, content)).then(function (_getModuleProps3) {\n                    moduleStyleData[containerItem.instanceid] = _getModuleProps3;\n                  });\n                });\n\n                if (_temp26 && _temp26.then) return _temp26.then(function () {});\n              }\n            }();\n\n            if (_temp16 && _temp16.then) return _temp16.then(function () {});\n          };\n\n          var _temp25 = function () {\n            if (ComponentRegistry[objectkey].SSR) {\n              return Promise.resolve(ComponentRegistry[objectkey].getDynamicProps(_extends({}, item, {\n                content: content\n              }))).then(function (_ComponentRegistry$ob) {\n                item.dynamicProps = _ComponentRegistry$ob;\n              });\n            }\n          }();\n\n          return _temp25 && _temp25.then ? _temp25.then(_temp24) : _temp24(_temp25);\n        }\n      }();\n\n      if (_temp19 && _temp19.then) return _temp19.then(function () {});\n    }, function (e) {\n      console.log(e);\n    });\n\n    return Promise.resolve(_temp23 && _temp23.then ? _temp23.then(_temp22) : _temp22(_temp23));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nvar getRegionProps = function getRegionProps(content, isEditMode) {\n  try {\n    getMura();\n    var moduleStyleData = {};\n    content.displayregions = content.displayregions || {};\n    var regions = Object.values(content.displayregions);\n\n    var _temp13 = _forIn(regions, function (regionIdx) {\n      function _temp11() {\n        var _temp9 = _forIn(region.local.items, function (itemIdx) {\n          var item = region.local.items[itemIdx];\n          item.instanceid = item.instanceid || Mura.createUUID();\n          return Promise.resolve(getModuleProps(item, moduleStyleData, isEditMode, content)).then(function (_getModuleProps2) {\n            moduleStyleData[item.instanceid] = _getModuleProps2;\n          });\n        });\n\n        if (_temp9 && _temp9.then) return _temp9.then(function () {});\n      }\n\n      var region = regions[regionIdx];\n\n      var _temp10 = function () {\n        if (typeof region.inherited != 'undefined' && Array.isArray(region.inherited.items)) {\n          var _temp14 = _forIn(region.inherited.items, function (itemdIx) {\n            var item = region.inherited.items[itemdIx];\n            item.instanceid = item.instanceid || Mura.createUUID();\n            return Promise.resolve(getModuleProps(item, moduleStyleData, isEditMode, content)).then(function (_getModuleProps) {\n              moduleStyleData[item.instanceid] = _getModuleProps;\n            });\n          });\n\n          if (_temp14 && _temp14.then) return _temp14.then(function () {});\n        }\n      }();\n\n      return _temp10 && _temp10.then ? _temp10.then(_temp11) : _temp11(_temp10);\n    });\n\n    return Promise.resolve(_temp13 && _temp13.then ? _temp13.then(function () {\n      return moduleStyleData;\n    }) : moduleStyleData);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nvar renderContent = function renderContent(context, isEditMode, params) {\n  try {\n    var query = {};\n\n    if (context.browser) {\n      query = Mura.getQueryStringParams();\n    } else if (context.query) {\n      query = _extends({}, context.query);\n    }\n\n    if (isEditMode) {\n      query.isEditRoute = isEditMode;\n    }\n\n    var filename = '';\n\n    if (context.params && context.params.page) {\n      filename = [].concat(context.params.page);\n    }\n\n    if (Array.isArray(filename)) {\n      if (filename.length && filename[0] == connectorConfig.siteid) {\n        filename.shift();\n      }\n\n      filename = filename.join(\"/\");\n    }\n\n    query = Object.assign(query, params);\n    return Promise.resolve(Mura.renderFilename(filename, query).then(function (rendered) {\n      return Promise.resolve(rendered);\n    }, function (rendered) {\n      try {\n        if (!rendered) {\n          var _Mura$getEntity$set;\n\n          return Promise.resolve(Mura.getEntity('Content').set((_Mura$getEntity$set = {\n            title: '404',\n            menutitle: '404',\n            body: 'The content that you requested can not be found',\n            contentid: Mura.createUUID(),\n            isnew: 1,\n            siteid: Mura.siteid,\n            type: 'Page',\n            subtype: 'Default'\n          }, _Mura$getEntity$set[\"contentid\"] = Mura.createUUID(), _Mura$getEntity$set.contenthistid = Mura.createUUID(), _Mura$getEntity$set.filename = '404', _Mura$getEntity$set.displayregions = {\n            primarycontent: {\n              local: {\n                items: []\n              }\n            }\n          }, _Mura$getEntity$set)));\n        } else {\n          return Promise.resolve(rendered);\n        }\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nrequire('mura.js/src/core/stylemap-static');\n\nvar muraConfig, connectorConfig, ComponentRegistry, ConnectorConfig, ExternalModules;\nvar isEditMode = false;\nvar MuraJSRefPlaceholder = '\"undefined\"!=typeof window&&function(u){u.queuedMuraCmds=[],u.queuedMuraPreInitCmds=[],\"function\"!=typeof u.Mura&&(u.Mura=u.mura=u.Mura=function(e){u.queuedMuraCmds.push(e)},u.Mura.preInit=function(e){u.queuedMuraPreInitCmds.push(e)})}(window);';\nvar setIsEditMode = function setIsEditMode(value) {\n  isEditMode = value;\n};\nvar getIsEditMode = function getIsEditMode() {\n  return isEditMode;\n};\nvar initConnector = function initConnector(config) {\n  muraConfig = config;\n  ComponentRegistry = config.ComponentRegistry;\n  ConnectorConfig = config.ConnectorConfig;\n  ExternalModules = config.ExternalModules;\n  connectorConfig = Object.assign({}, ConnectorConfig);\n};\nvar getMuraConfig = function getMuraConfig() {\n  return muraConfig;\n};\nvar useAsync = function useAsync(asyncFn, onSuccess) {\n  useEffect(function () {\n    var isMounted = true;\n    asyncFn().then(function (data) {\n      if (isMounted) onSuccess(data);\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, [asyncFn, onSuccess]);\n};\nvar getHref = function getHref(filename) {\n  var path = filename.split('/').filter(function (item) {\n    return item.length;\n  });\n\n  if (connectorConfig.siteidinurls) {\n    return '/' + Mura.siteid + '/' + path.join('/');\n  } else {\n    return '/' + path.join('/');\n  }\n};\nvar getComponent = function getComponent(item) {\n  getMura();\n  var objectkey = item.object;\n\n  if (typeof ComponentRegistry[objectkey] == 'undefined') {\n    objectkey = Mura.firstToUpperCase(item.object);\n  }\n\n  if (typeof ComponentRegistry[objectkey] != 'undefined') {\n    var ComponentVariable = ComponentRegistry[objectkey].component;\n    return /*#__PURE__*/React.createElement(ComponentVariable, _extends({\n      key: item.instanceid\n    }, item));\n  }\n\n  return /*#__PURE__*/React.createElement(\"p\", {\n    key: item.instanceid\n  }, \"DisplayRegion: \", item.objectname);\n};\nvar getMuraPaths = function getMuraPaths() {\n  try {\n    var _temp3 = function _temp3() {\n      var paths = pathList.map(function (item) {\n        var page = [];\n\n        if (item.filename) {\n          page = item.filename.split('/');\n        }\n\n        page.unshift(item.siteid);\n        console.log(item.filename, page);\n        return {\n          params: {\n            page: page\n          }\n        };\n      }).filter(function (item) {\n        return item.params.page.length || item.params.page[0];\n      });\n      return paths;\n    };\n\n    var siteids = ConnectorConfig.siteid;\n    var pathList = [];\n\n    if (!Array.isArray(siteids)) {\n      siteids = siteids.split();\n    }\n\n    var _temp4 = _forTo(siteids, function (index) {\n      getMura(siteids[index]);\n      return Promise.resolve(Mura.getFeed('content').maxItems(0).itemsPerPage(0).sort('orderno').getQuery({\n        renderMode: 'static'\n      })).then(function (items) {\n        pathList = pathList.concat(items.getAll().items);\n        pathList.push({\n          siteid: siteids[index],\n          filename: \"\"\n        });\n      });\n    });\n\n    return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(_temp3) : _temp3(_temp4));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\nvar getMura = function getMura(context) {\n  var startingsiteid = Mura.siteid;\n\n  if (typeof context == 'string' && ConnectorConfig.siteid.find(function (item) {\n    return item === context;\n  })) {\n    connectorConfig.siteid = context;\n  } else {\n    var ishomepage = context && !(context.params && context.params.page) || typeof location != 'undefined' && (location.pathname == \"/\" || location.pathname == ConnectorConfig.editroute + \"/\");\n\n    if (Array.isArray(ConnectorConfig.siteid)) {\n      if (ishomepage) {\n        connectorConfig.siteid = ConnectorConfig.siteid[0];\n      } else {\n        var page = [];\n\n        if (context && context.params && context.params.page) {\n          page = [].concat(context.params.page);\n          page = page.filter(function (item) {\n            return item.length;\n          });\n        } else if (typeof location != 'undefined') {\n          page = location.pathname.split(\"/\");\n          page = page.filter(function (item) {\n            return item.length;\n          });\n\n          if (page.length && ConnectorConfig.editroute && page[0] === ConnectorConfig.editroute.split(\"/\")[1]) {\n            page.shift();\n          }\n        }\n\n        if (page.length) {\n          if (ConnectorConfig.siteid.find(function (item) {\n            return item === page[0];\n          })) {\n            connectorConfig.siteid = page[0];\n            connectorConfig.siteidinurls = true;\n          } else {\n            connectorConfig.siteid = ConnectorConfig.siteid[0];\n          }\n        }\n      }\n    }\n  }\n\n  var clearMuraAPICache = function clearMuraAPICache() {\n    delete connectorConfig.apiEndpoint;\n    delete connectorConfig.apiendpoint;\n    delete Mura.apiEndpoint;\n    delete Mura.apiendpoint;\n  };\n\n  if (context && context.res) {\n    Object.assign(connectorConfig, {\n      response: context.res,\n      request: context.req\n    });\n    clearMuraAPICache();\n    console.log('initing', connectorConfig.siteid);\n    Mura.init(connectorConfig);\n  } else if (startingsiteid != connectorConfig.siteid) {\n    console.log('changing siteid', startingsiteid, connectorConfig.siteid);\n    clearMuraAPICache();\n    Mura.init(connectorConfig);\n  }\n\n  Mura.holdReady(true);\n  return Mura;\n};\nvar getRootPath = function getRootPath() {\n  return getMura().rootpath;\n};\nvar getSiteName = function getSiteName() {\n  return getMura().sitename;\n};\nvar getMuraProps = function getMuraProps(context, isEditMode, params) {\n  try {\n    var _Mura = getMura(context);\n\n    _Mura.renderMode = 'dynamic';\n\n    if (!isEditMode) {\n      _Mura.renderMode = 'static';\n    }\n\n    return Promise.resolve(renderContent(context, isEditMode, params)).then(function (muraObject) {\n      var content = muraObject.getAll();\n      return Promise.resolve(getRegionProps(content, isEditMode)).then(function (moduleStyleData) {\n        function _temp7() {\n          delete _Mura._request;\n          delete _Mura.response;\n          delete _Mura.request;\n          delete _Mura.renderMode;\n          var props = {\n            content: content,\n            moduleStyleData: moduleStyleData,\n            externalModules: ExternalModules,\n            codeblocks: codeblocks\n          };\n\n          if (isEditMode) {\n            return {\n              props: props\n            };\n          } else {\n            return {\n              props: props,\n              revalidate: 1\n            };\n          }\n        }\n\n        var codeblocks = {\n          header: [],\n          bodystart: [],\n          footer: []\n        };\n\n        var _temp6 = _catch(function () {\n          var _temp5 = function () {\n            if (connectorConfig.codeblocks) {\n              return Promise.resolve(_Mura.getFeed('codeblock').where().prop('active').isEQ(1).getQuery()).then(function (codeCollection) {\n                codeCollection.forEach(function (item) {\n                  var placement = item.get('placement').toLowerCase();\n\n                  if (placement == 'header') {\n                    codeblocks.header.push(item.get('code'));\n                  } else if (placement == 'footer') {\n                    codeblocks.footer.push(item.get('code'));\n                  } else if (placement == 'bodystart') {\n                    codeblocks.bodystart.push(item.get('code'));\n                  }\n                });\n              });\n            }\n          }();\n\n          if (_temp5 && _temp5.then) return _temp5.then(function () {});\n        }, function (e) {\n          console.log(e);\n        });\n\n        return _temp6 && _temp6.then ? _temp6.then(_temp7) : _temp7(_temp6);\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nfunction Decorator(props) {\n  var muraConfig = getMuraConfig$1();\n  var ComponentRegistry = muraConfig.ComponentRegistry,\n      ExternalModules = muraConfig.ExternalModules;\n  var label = props.label,\n      instanceid = props.instanceid,\n      labeltag = props.labeltag,\n      children = props.children;\n  var isEditMode = getIsEditMode$1();\n  var domObject = {\n    className: 'mura-object mura-async-object'\n  };\n  var domContent = {\n    className: 'mura-object-content'\n  };\n  var domMeta = {\n    className: \"mura-object-meta\"\n  };\n  var domMetaWrapper = {\n    className: \"mura-object-meta-wrapper\"\n  };\n  var isExternalModule = ExternalModules[props.object];\n  var objectKey = props.object;\n\n  if (typeof ComponentRegistry[objectKey] == 'undefined') {\n    objectKey = Mura.firstToUpperCase(props.object);\n  }\n\n  var isSSR = ComponentRegistry[objectKey] && (ComponentRegistry[objectKey].SSR || ComponentRegistry[objectKey].ssr);\n\n  if (isEditMode || isExternalModule || !isSSR) {\n    Object.keys(props).forEach(function (key) {\n      if (!['html', 'content', 'children', 'isEditMode', 'dynamicProps', 'moduleStyleData'].find(function (restrictedkey) {\n        return restrictedkey === key;\n      })) {\n        if (typeof props[key] === 'object') {\n          domObject[\"data-\" + key] = JSON.stringify(props[key]);\n        } else if (typeof props[key] !== 'undefined' && !(typeof props[key] === 'string' && props[key] === '')) {\n          domObject[\"data-\" + key] = props[key];\n        }\n      }\n\n      if (key === 'class') {\n        domObject.className += \" \" + props[key];\n      } else if (key === 'cssclass') {\n        domObject.className += \" \" + props[key];\n      } else if (key === 'cssid') {\n        domObject.id += \" \" + props[key];\n      } else if (key === 'contentcssclass') {\n        domContent.className += \" \" + props[key];\n      } else if (key === 'contentcssid') {\n        domContent.id += \" \" + props[key];\n      } else if (key === 'metacssclass') {\n        domMeta.className += \" \" + props[key];\n      } else if (key === 'metacssid') {\n        domMeta.id += \" \" + props[key];\n      }\n    });\n\n    if (domObject.className.split(' ').find(function ($class) {\n      return $class === 'container';\n    })) {\n      domMetaWrapper.className += ' container';\n    }\n  } else {\n    domObject['data-instanceid'] = instanceid;\n    domObject['data-inited'] = true;\n    domObject.className = \"mura-object-\" + props.object;\n\n    if (typeof props.moduleStyleData != 'undefined' && typeof props.moduleStyleData[instanceid] != 'undefined') {\n      domObject.className += \" \" + props.moduleStyleData[instanceid].targets.object[\"class\"];\n      domObject.id = props.moduleStyleData[props.instanceid].targets.object.id;\n      domContent.className = props.moduleStyleData[props.instanceid].targets.content[\"class\"];\n      domContent.id = props.moduleStyleData[props.instanceid].targets.content.id;\n      domMetaWrapper.className = props.moduleStyleData[props.instanceid].targets.metawrapper[\"class\"];\n      domMeta.className = props.moduleStyleData[props.instanceid].targets.meta[\"class\"];\n      domMeta.id = props.moduleStyleData[props.instanceid].targets.meta.id;\n    } else {\n      domObject.id = '';\n      domContent.id = '';\n      domMetaWrapper.className = '';\n      domMeta.className = '';\n      domMeta.id = ';';\n    }\n\n    ['objectspacing', 'contentspacing', 'metaspacing'].forEach(function (key) {\n      if (typeof props[key] != 'undefined' && props[key] && props[key] != 'custom') {\n        domObject['data-' + key] = props[key];\n      }\n    });\n  }\n\n  if (isExternalModule || !isSSR) {\n    if (isExternalModule && props.html) {\n      /*#__PURE__*/\n      React.createElement(\"div\", domObject, label ? /*#__PURE__*/React.createElement(MuraMeta, {\n        label: label,\n        labeltag: labeltag,\n        dommeta: domMeta,\n        dommetawrapper: domMetaWrapper\n      }) : null, label ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mura-flex-break\"\n      }) : null, /*#__PURE__*/React.createElement(\"div\", _extends({}, domContent, {\n        dangerouslySetInnerHTML: {\n          __html: props.html\n        }\n      })));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", domObject);\n    }\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", domObject, label ? /*#__PURE__*/React.createElement(Meta, {\n      label: label,\n      labeltag: labeltag,\n      dommeta: domMeta,\n      dommetawrapper: domMetaWrapper\n    }) : null, label ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mura-flex-break\"\n    }) : null, /*#__PURE__*/React.createElement(\"div\", domContent, children));\n  }\n}\n\nvar Meta = function Meta(_ref) {\n  var label = _ref.label,\n      labeltag = _ref.labeltag,\n      dommeta = _ref.dommeta,\n      dommetawrapper = _ref.dommetawrapper;\n  var LabelHeader = labeltag ? \"\" + labeltag : 'h2';\n  return /*#__PURE__*/React.createElement(\"div\", dommetawrapper, /*#__PURE__*/React.createElement(\"div\", dommeta, /*#__PURE__*/React.createElement(LabelHeader, null, label)));\n};\n\nvar EditContext = createContext();\nvar MuraContext = createContext();\n\nvar DisplayRegionSection = function DisplayRegionSection(_ref) {\n  var children = _ref.children,\n      region = _ref.region,\n      section = _ref.section,\n      isEditMode = _ref.isEditMode;\n  var out = null;\n\n  if (typeof region.name !== 'undefined' && isEditMode) {\n    if (section === 'inherited' && region.inherited.items.length) {\n      out = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mura-region-inherited\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"frontEndToolsModal mura\"\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mura-edit-label mi-lock\"\n      }, region.name.toUpperCase(), \": Inherited\")), children);\n    }\n\n    if (section === 'local') {\n      out = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mura-editable mura-inactive\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mura-region-local mura-inactive mura-editable-attribute\",\n        \"data-loose\": \"false\",\n        \"data-regionid\": region.regionid,\n        \"data-inited\": \"false\",\n        \"data-perm\": \"true\"\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"mura-editable-label\",\n        style: {\n          display: 'none'\n        }\n      }, region.name.toUpperCase()), children));\n    }\n  } else {\n    var regionName = \"mura-region-\" + section;\n    out = /*#__PURE__*/React.createElement(\"div\", {\n      className: regionName\n    }, children);\n  }\n\n  return out;\n};\n\nvar DisplayRegion = function DisplayRegion(_ref2) {\n  var region = _ref2.region,\n      moduleStyleData = _ref2.moduleStyleData,\n      content = _ref2.content;\n  var isEditMode = getIsEditMode();\n  var inherited = '';\n\n  if (region.inherited && region.inherited.items.length) {\n    inherited = /*#__PURE__*/React.createElement(DisplayRegionSection, {\n      region: region,\n      isEditMode: isEditMode,\n      section: \"inherited\"\n    }, region.inherited.items.map(function (item) {\n      var obj = Object.assign({}, item);\n      obj.key = obj.instanceid;\n      obj.moduleStyleData = moduleStyleData;\n      obj.content = content;\n      return /*#__PURE__*/React.createElement(Decorator, obj, getComponent(obj));\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mura-region\",\n    \"data-regionid\": region.regionid\n  }, inherited, /*#__PURE__*/React.createElement(DisplayRegionSection, {\n    region: region,\n    isEditMode: isEditMode,\n    content: content,\n    section: \"local\"\n  }, region.local.items.map(function (item) {\n    var obj = Object.assign({}, item);\n    obj.key = obj.instanceid;\n    obj.moduleStyleData = moduleStyleData;\n    obj.content = content;\n    return /*#__PURE__*/React.createElement(Decorator, obj, getComponent(obj));\n  })));\n};\n\nfunction ExternalAssets(props) {\n  var externalModules = props.externalModules;\n\n  if (typeof externalModules !== 'undefined') {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mura-external-assets\"\n    }, Object.keys(externalModules).map(function (key) {\n      var module = externalModules[key];\n\n      if (module.js && Array.isArray(module.js)) {\n        return module.js.map(function (item) {\n          return /*#__PURE__*/React.createElement(\"script\", {\n            key: item,\n            src: item,\n            defer: true\n          });\n        });\n      }\n    }), Object.keys(externalModules).map(function (key) {\n      var module = externalModules[key];\n\n      if (module.css && Array.isArray(module.css)) {\n        return module.css.map(function (item) {\n          return /*#__PURE__*/React.createElement(\"link\", {\n            key: item,\n            rel: \"stylesheet\",\n            href: item\n          });\n        });\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mura-external-assets\"\n    });\n  }\n}\n\nvar EditLayout = function EditLayout(_ref) {\n  var children = _ref.children;\n  setIsEditMode$1(true);\n  return /*#__PURE__*/React.createElement(\"div\", null, children, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"htmlqueues\"\n  }));\n};\n\nfunction Styles(props) {\n  var moduleStyleData = props.moduleStyleData;\n\n  if (typeof moduleStyleData !== 'undefined') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, Object.keys(moduleStyleData).map(function (instanceid) {\n      var rules = moduleStyleData[instanceid];\n\n      if (!rules.isEditMode) {\n        return /*#__PURE__*/React.createElement(\"style\", {\n          id: rules.id,\n          key: rules.id,\n          dangerouslySetInnerHTML: {\n            __html: rules.cssRules.join('\\n')\n          }\n        });\n      } else {\n        return '';\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n}\n\nvar MainLayout = function MainLayout(props) {\n  var content = props.content,\n      moduleStyleData = props.moduleStyleData,\n      children = props.children;\n  Mura.moduleStyleData = moduleStyleData;\n  useEffect$1(function () {\n    contentDidChange(content);\n  });\n  return /*#__PURE__*/React.createElement(\"div\", null, children, /*#__PURE__*/React.createElement(ExternalAssets, props), /*#__PURE__*/React.createElement(Styles, props));\n};\n\nfunction contentDidChange(_content) {\n  var content = Mura.getEntity('content').set(_content);\n  getMura();\n\n  if (content.get('redirect')) {\n    if (Mura.editroute) {\n      var pathArray = window.location.pathname.split('/').filter(function (item) {\n        if (item) {\n          return true;\n        }\n      });\n      var isEditMode = pathArray.length && '/' + pathArray[0] == Mura.editroute;\n\n      if (!isEditMode && content.get('redirect').indexOf('lockdown')) {\n        var editroute = \"\";\n\n        if (pathArray.length) {\n          editroute = \"/edit/\" + pathArray.join(\"/\") + \"/\";\n          console.log('Redirecting to edit route', editroute);\n          location.href = editroute;\n        } else {\n          editroute = \"/edit/\";\n          console.log('Redirecting to edit route', editroute);\n          location.href = editroute;\n        }\n      } else {\n        console.log('Redirecting', content.get('redirect'));\n        location.href = content.get('redirect');\n      }\n    } else {\n      console.log('Redirecting', content.get('redirect'));\n    }\n\n    return;\n  }\n\n  var remoteFooter = Mura('#mura-remote-footer');\n\n  if (remoteFooter.length) {\n    remoteFooter.remove();\n  }\n\n  if (typeof Mura.deInitLayoutManager !== 'undefined') {\n    Mura.deInitLayoutManager();\n  }\n\n  Mura('html,body').attr('class', '');\n  setTimeout(function () {\n    if (typeof MuraInlineEditor === 'undefined') {\n      Mura('html,body').attr('class', '');\n    }\n\n    var htmlQueueContainerInner = Mura('#htmlqueues');\n\n    if (htmlQueueContainerInner.length) {\n      Mura('#htmlqueues').html(content.get('htmlheadqueue') + content.get('htmlfootqueue'));\n    }\n\n    Mura.init(Mura.extend({\n      queueObjects: false,\n      content: content\n    }));\n    Mura.holdReady(false);\n\n    if (!htmlQueueContainerInner.length && Mura.variations) {\n      Mura.loader().loadjs(Mura.rootpath + \"/core/modules/v1/core_assets/js/variation.js?siteid=\" + Mura.siteid + '&cacheid=' + Math.random());\n    }\n\n    if (Mura.MXP) {\n      Mura.loader().loadjs(Mura.rootpath + \"/plugins/MXP/remote/native/?siteid=\" + Mura.siteid + \"&contenthistid=\" + Mura.contenthistid + \"&contentid=\" + Mura.contentid + \"&cacheid=\" + Math.random());\n    }\n  }, 5);\n}\n\nexport { Decorator, DisplayRegion, EditContext, EditLayout, ExternalAssets, MainLayout, MuraContext, MuraJSRefPlaceholder, Styles, getComponent, getHref, getIsEditMode, getMura, getMuraConfig, getMuraPaths, getMuraProps, getRootPath, getSiteName, initConnector, setIsEditMode, useAsync };\n//# sourceMappingURL=index.modern.js.map\n","import ReactMarkdown from \"react-markdown\";\nimport { getMuraConfig  } from '@murasoftware/next-core';\n\nfunction OutputMarkup({source,className}){\n    const muraConfig = getMuraConfig();\n    const { ConnectorConfig } = muraConfig;\n    let connectorConfig=Object.assign({},ConnectorConfig);\n\n    if(connectorConfig.htmleditortype == 'markdown'){\n        return(\n            <ReactMarkdown source={source} className={className} />\n        )\n    }\n\n    return(\n        <div dangerouslySetInnerHTML={{__html:source}} className={className} />\n    )\n    \n}\n\nexport default OutputMarkup;","import React from 'react';\nimport ItemDate from './ItemDate';\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\nimport OutputMarkup from './OutputMarkup';\n\nconst ArticleMeta = (props) => {\n    // console.log('fields ArticleMeta: ' + props.fields);\n    \n    const fields = props.fields ? props.fields : 'Date,Credits,Tags';\n    const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n    const item = props.content;\n    return (\n        <div className=\"pb-4\">\n            {\n                fieldlist.map(field => {\n                    switch(field) {\n                    case \"title\":\n                        return (\n                            <h1 key=\"title\" key={field}>{item.title}</h1>\n                        );\n                    case \"summary\":\n                        return (\n                            <OutputMarkup source={item.summary} className=\"lead\"key={field} />\n                        );\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                            <div className=\"mura-item-meta__date\" key=\"date\" key={field}>\n                                <span>Published on: </span> <ItemDate releasedate={item.releasedate} lastupdate={item.lastupdate}></ItemDate>\n                            </div>\n                        );\n                    case \"credits\":\n                        if(item.credits){\n                            return (\n                                <ItemCredits credits={item.credits} key=\"credits\" key={field} />\n                            );\n                        }\n                    case \"tags\":\n                        if(item.tags){\n                            return (\n                                <div className=\"mura-item-meta__tags\" key=\"tags\" key={field}>\n                                    <span>Tags: </span><ItemTags tags={item.tags} key=\"tags\" />\n                                </div>\n                            );\n                        }                        \n                    default:\n                        return <div className={`mura-item-meta__${field}`} key={field} data-value={props.content[field]}>{props.content[field]}</div>\n                    }\n                })\n            }\n        </div>\n    )\n}\n\nexport default ArticleMeta;","import React,{ useState,useEffect } from 'react';\nimport Link from \"next/link\";\nimport { getMura, getMuraConfig, getHref } from '@murasoftware/next-core';\n\nexport const getLayout=(layout) => {\n  const muraConfig =getMuraConfig();\n  const { ComponentRegistry } = muraConfig;\n  const uselayout = (!layout || layout == 'default') ? \"List\" : layout;\n\n  if(typeof ComponentRegistry[uselayout] != 'undefined') {\n    return ComponentRegistry[uselayout];\n  } else {\n    console.log(\"Layout not registered: \",layout);\n    return ComponentRegistry['List'];\n  }\n}\n\n\nfunction getDefaultQueryPropsFromLayout(layout,item){\n  if(layout){\n    return layout.getQueryProps ? layout.getQueryProps(item) : {fields:''};\n  } else {\n    return  {fields:''};\n  }\n}\n\nfunction Collection(props) {\n  const Mura = getMura();\n  const objectparams = Object.assign({}, props);\n  const DynamicCollectionLayout = getLayout(objectparams.layout).component;\n\n  objectparams.fields=objectparams.fields || getDefaultQueryPropsFromLayout(DynamicCollectionLayout,objectparams).fields || 'Image,Date,Title,Summary,Credits,Tags';\n\n  if(!objectparams.dynamicProps){\n    const [collection,setCollection]=useState(false);\n    useEffect(() => {\n      getDynamicProps(objectparams).then((dynamicProps)=>{\n        setCollection(new Mura.EntityCollection(dynamicProps.collection,Mura._requestcontext));\n      });   \n\n    }, []);\n    if(collection) {\n      return (\n        <DynamicCollectionLayout collection={collection} props={objectparams} link={RouterlessLink}/>\n      )\n    }\n    else {\n      return (\n       <div></div>\n      )\n    }\n  } else {\n    const collection=new Mura.EntityCollection(objectparams.dynamicProps.collection,Mura._requestcontext);\n      return (\n        <DynamicCollectionLayout collection={collection} props={props} link={RouterLink}/>\n      )\n  }\n}\n\nexport const RouterlessLink = ({href,children,className})=>{\n  return (\n    <a href={getHref(href)} className={className}>\n      {children}\n    </a>\n  );\n}\n\nexport const RouterLink = ({href,children,className})=>{\n  return (\n    <Link href={getHref(href)}>\n      <a className={className}>{children}</a>\n    </Link>\n  );\n}\n\nexport const getDynamicProps = async (item) => {\n  const Mura = getMura();\n  const data = {};\n  let cdata = {};\n  let {content} = item;\n\n  if(item.sourcetype === 'children') {\n    const feed = Mura.getFeed('content');\n\n    if(content.getAll) {\n      cdata = content.getAll();\n    }\n    else {\n      cdata = content;\n    }\n\n    feed.andProp('parentid').isEQ(cdata.contentid);\n    feed.fields(getSelectFields(item));\n    feed.expand(getExpandFields(item));\n    feed.sort(cdata.sortby,cdata.sortdirection);\n    \n    const query = await feed.getQuery();\n    data.collection = query.getAll();\n  }\n  else if(item.sourcetype === 'relatedcontent') {\n    const src = item.source;\n   \n    if(src==='custom'){\n      if(typeof item.items !='undefined'){\n        if(!Array.isArray(item.items)){\n          try{\n            JSON.parse(item.items);\n          } catch(e){\n            console.log(e)\n            item.items=[];\n          }\n        }\n      } else {\n        item.items=[];\n      }\n\n      if(item.items.length){\n        const related = await Mura.getFeed('content')\n        .where()\n        .fields(getSelectFields(item))\n        .expand(getExpandFields(item))\n        .itemsPerPage(0)\n        .maxItems(item.maxitems)\n        .findMany(item.items)\n        .getQuery();\n        \n        data.collection=related.getAll();\n      } else {\n        data.collection={\n          items: [],\n          totaltems: 0,\n        }\n      }\n    } else {\n      if(!content.getRelatedContent){\n        content=Mura.getEntity(\"content\").set(content);\n      }\n      const related = await content.getRelatedContent(\n        src,\n        {\n          fields:getSelectFields(item),\n          expand:getExpandFields(item),\n          imagesizes:getImageSizes(item),\n          itemsPerPage:0,\n          maxitems:item.maxitems\n        }\n      );\n      data.collection = related.getAll(); \n    }\n    return data;\n  }\n  else if ((\n    typeof item.sourcetype === 'undefined'\n    || item.sourcetype === ''\n    ) \n    ||  (\n      typeof item.sourcetype !== 'undefined' &&\n      item.sourcetype === 'localindex' &&\n      Mura.isUUID(item.source)\n    )\n  ) {\n    const feed = Mura.getFeed('content');\n\n    if(item.source) {\n      feed.andProp('feedid').isEQ(item.source);\n    }\n    \n    feed.fields(getSelectFields(item));\n    feed.expand(getExpandFields(item));\n    feed.imageSizes(getImageSizes(item));\n    \n    feed.maxItems(item.maxitems);\n    feed.itemsPerPage(0);\n\n    //Add stuff like maxitems, nextn\n      \n    const query = await feed.getQuery();\n\n    data.collection = query.getAll();\n  }\n\n  return data;\n};\n\nconst getExpandFields = (item) => {\n\n  const data = getLayout(item.layout).getQueryProps();\n\n  if(data.expand){\n    return data.expand;\n  } else {\n    return '';\n  }\n\n}\n\nconst getImageSizes = (item) => {\n\n  const data = getLayout(item.layout).getQueryProps();\n\n  if(data.imagesizes){\n    return data.imagesizes;\n  } else {\n    return '';\n  }\n\n}\n\nconst getSelectFields = (item) => {\n\n  const data = getLayout(item.layout).getQueryProps(item);\n\n  let fieldlist = '';\n\n  if(data.fields) {\n    fieldlist = data.fields;\n  } else {\n    fieldlist = data.fields ? data.fields  : '';\n  }\n\n  if(!fieldlist){\n    return '';\n  }\n\n  let fieldarray=fieldlist.split(\",\");\n  let hasDate=false;\n  let hasFilename=false;\n  let hasReleaseDate=false;\n  let hasLastUpdate=false;\n  let hasCreated=false;\n  let hasImage=false;\n  let hasFileid=false;\n  let hasContentid=false;\n  let hasContenthistid=false;\n  let hasParentid=false;\n\n  fieldarray=fieldarray.filter(field=>{\n    field=field.toLowerCase();\n    if(field==='filename'){\n      hasFilename=true;\n    } else if(field==='date'){\n      hasDate=true;\n      return false;\n    } else if(field==='image'){\n      hasImage=true;\n      return false;\n    } else if(field==='images'){\n      hasImage=true;\n      return false;\n    } else if(field==='fileid'){\n      hasFileid=true;\n    } else if(field==='contentid'){\n      hasContentid=true;\n    } else if(field==='contenthistid'){\n      hasContenthistid=true;\n    } else if(field==='parentid'){\n      hasParentid=true;\n    } \n    return true;\n  });\n\n  //There is no generic date field.  If selected these are the options\n  if(hasDate){\n    if(!hasReleaseDate){\n      fieldarray.push('releasedate');\n    } \n    if(!hasLastUpdate){\n      fieldarray.push('lastupdate');\n    }\n    if(!hasCreated){\n      fieldarray.push('created');\n    }\n  }\n  if(hasImage){\n    if(!hasFileid){\n      fieldarray.push('fileid');\n    }\n    fieldarray.push('images');\n  }\n  if(!hasFilename){\n    fieldarray.push('filename');\n  }\n  if(!hasContentid){\n    fieldarray.push('contentid');\n  }\n  if(!hasContenthistid){\n    fieldarray.push('contenthistid');\n  }\n  if(!hasParentid){\n    fieldarray.push('parentid');\n  }\n  return fieldarray.join(',').toLowerCase();\n}\n\n\nexport default Collection;","import Mura from 'mura.js';\nimport {useEffect} from \"react\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\n\nconst CollectionNav = (props) => {\n\tconst {collection,pos,nextn,setPos,scrollpages,instanceid,itemsTo,setItemsTo} = props;\n\tconst items = collection.get('items');\n\tconst maxItems = props.maxitems;\n\t// console.log('maxItems (collectionNav): ' + maxItems);\n\n\tif(scrollpages){\n\t\tuseEffect(()=>{\n\t\t\tif(!Mura.isInNode()){\n\t\t\t\tconst isEndVisible = () => {\n\t\t\t\t\tconst end=Mura(`div.mura-collection-end[data-instanceid=\"${instanceid}\"]`);\n\t\t\t\t\tif(itemsTo  && maxItems && Mura.isScrolledIntoView(end.node)){\n\t\t\t\t\t\tif(itemsTo < (maxItems)){\n\t\t\t\t\t\t\tsetItemsTo(itemsTo+1);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if(itemsTo < (maxItems)){\n\t\t\t\t\t\tsetTimeout(isEndVisible,50);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tisEndVisible();\n\t\t\t}\t\n\t\t},[]);\n\n\t\treturn (\n\t\t\t<div className=\"mura-collection-end\" data-instanceid={instanceid}/>\n\t\t)\n\t}\n\n\tconst next = pos+nextn;\n\tconst prev = pos > 0 ? pos-nextn > 0 ? pos-nextn : 0 : 0;\n\tlet itemsOf = pos+nextn > items.length ? items.length : pos+nextn;\n\tlet itemsToMax = items.length >= maxItems ? maxItems : items.length\n\tlet nav = [];\n\n\tif (maxItems < items.length && pos+nextn > maxItems){\n\t\titemsToMax = maxItems;\n\t}\n\n\tif(pos > 0) {\n\t\tnav.push (\n\t\t  <NavButton key=\"prev\" pos={pos} val={prev} onItemClick={setPos} label=\"Prev\"/>\n\t\t)\n\t  }\n\t\n\t  if(next<itemsToMax) {\n\t\tnav.push (\n\t\t  <NavButton key=\"next\" pos={pos} val={next} onItemClick={setPos} label=\"Next\"/>\n\t\t)\n\t  }\n\t\n\tif(nav.length){\n\t\treturn (\n\t\t<div>\n\t\t\t<p>Displaying items {pos+1}-{itemsOf} of {itemsToMax}</p>\n\t\t\t<ul className=\"pagination\">\n\t\t\t\t{nav}\n\t\t\t</ul>\n\t\t</div>\n\t\t);\n\t} else {\n\t\treturn '';\n\t}\n  }\n  \n  const NavButton = props => {\n\tlet {val,onItemClick} = props;\n  \n\tconst _onClick = () => {\n\t  onItemClick(val);\n\t}\n\n\t\n\treturn (\n\t  <li className=\"page-item\">\n\t  \t<a onClick={_onClick} className=\"page-link\" aria-label={props.label}><NavButtonLabel label={props.label} /></a>\n\t  </li>\n\t)\n  }\n\n  const NavButtonLabel = props => {\n\tif (props.label == 'Next'){\n\t\treturn(\n\t\t\t<>\n\t\t\t\t{props.label} <FontAwesomeIcon icon={faChevronRight} />\n\t\t  \t</>\n\t\t)\n\t} else {\n\t\treturn(\n\t\t\t<>\n\t\t\t\t<FontAwesomeIcon icon={faChevronLeft} /> {props.label}\n\t\t  \t</>\n\t\t)\n\t}\n  }\n  \n  export default CollectionNav;","import { useEffect,useState } from \"react\";\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\n\nconst CollectionLayout = ({props,collection,link}) => {\n  const {nextn} = props;\n  const items = collection.get('items');\n  const [pos, setPos] = useState(0);\n  const [itemsTo,setItemsTo]= useState((pos+nextn > items.length ? items.length : pos+nextn));\n\n  useEffect(()=>{\n    setItemsTo((pos+nextn > items.length ? items.length : pos+nextn));\n  },[pos]);\n  \n  return (\n    <div>\n      <ul style={{'listStyle': 'none'}}>\n        <CurrentItems collection={collection}  itemsTo={itemsTo} pos={pos} link={link} {...props} />\n      </ul>\n      <CollectionNav collection={collection}  itemsTo={itemsTo}  setItemsTo={setItemsTo} pos={pos} setPos={setPos} link={link} {...props} />   \n    </div>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,link,pos,itemsTo} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n\n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    itemsList.push(\n    <li key={item.get('contentid')}>\n        <h1>\n          <Link href={`/${item.get('filename')}`}>\n            {item.get('title')}\n          </Link>\n        </h1>\n        <OutputMarkup source={item.get('summary')}/>\n    </li>\n    );\n  }\n\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  \n  /*\n    You wouldn't really need to set this because\n    both of these are available in the default field list\n  */\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default CollectionLayout;","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\n\nconst CollectionReadMoreBtn = (props) => {\n    const Link = props.link;\n    return (\n        <Link href={props.href} passHref className=\"stretched-link btn btn-primary\">{props.ctatext}  <FontAwesomeIcon icon={faChevronRight} /></Link>\n    )\n  }\n\nexport default CollectionReadMoreBtn;","import react from 'react';\n\nexport const ItemImage = function ({image,className,alt}){\n    const itemImage = image;\n    if(typeof itemImage != 'undefined'){\n        return(\n            <img\n                src={itemImage}\n                alt={alt}\n                className={className}\n            />\n        )\n    }\n    return null;\n}\n\nexport default ItemImage;","import { useState } from \"react\";\nimport React from 'react';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport Accordion from \"react-bootstrap/Accordion\";\nimport Card from \"react-bootstrap/Card\";\nimport CollectionReadMoreBtn from \"./CollectionReadMoreBtn\";\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\nimport ItemImage from './ItemImage';\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\n\nexport const CollectionLayoutAccordian = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  return (\n    <>\n      <Accordion className={`collectionLayoutAccordion ${props.accordionpadding}-spacing ${props.collapseindicators} ${props.collapseindicatorslocation}-indicator`}>\n        <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      </Accordion>\n\n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n\n  const [activeId, setActiveId] = useState('0');\n\n  function toggleActive(id) {\n    if (activeId === id) {\n      setActiveId(null);\n    } else {\n      setActiveId(id);\n    }\n  }\n\n  // console.log(fieldlist);\n  //console.log(\"image size: \" + props.imagesize);\n\n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    itemsList.push(\n      <Card key={item.get('contentid')}>\n        <Accordion.Toggle as={Card.Header} variant=\"link\" eventKey={item.get('contentid')} className={activeId === i ? 'open' : 'not-open'} onClick={() => toggleActive(i)} role=\"button\">\n          {item.get('title')}\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey={item.get('contentid')}>\n          <Card.Body>\n            {\n                fieldlist.map(field => {\n                  switch(field) {\n                    case \"image\":\n                        return(\n                          <ItemImage image={item.get('images')[props.imagesize]} className=\"img-fluid\" alt={item.get('title')} key=\"image\" />\n                        );\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                          <div className=\"mura-item-meta__date\" key={field}>\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                          </div>\n                        );\n                    case \"summary\":\n                      return <OutputMarkup source={item.get('summary')} key={field} />\n                    case \"readmore\":\n                          return (\n                            <CollectionReadMoreBtn\n                              href={`/${item.get('filename')}`}\n                              ctatext=\"Read More\"\n                              link={Link}\n                              key={field}\n                            />\n                          )\n                    case \"credits\":\n                        if(item.get('credits').length){\n                          return (\n                            <div className=\"mura-item-meta__credits\">\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                            </div>\n                          );\n                        }\n                        return null;\n                    case \"tags\":\n                        return (\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                              <ItemTags tags={item.get('tags')} />\n                            </div>\n                        );\n                    default:\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n                  }        \n                })\n            }\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n    );\n  }\n\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default CollectionLayoutAccordian;","import { useState } from \"react\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from \"./CollectionReadMoreBtn\";\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\n\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\nconst AlternatingBoxes = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  return (\n    <>\n      <div className=\"collectionLayoutAlternatingBoxes\">\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      </div>\n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n  \n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    itemsList.push(\n\n      <Card className=\"border-0\" key={item.get('contentid')}>\n        <div className=\"row no-gutters align-items-stretch\">\n          <div className={`col-12 col-md-6 ${i % 2 == 0 ? \"card-img-left\" : \"card-img-right  order-md-2\"}`}>\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} className=\"rounded-0\" />\n          </div>\n          <div className=\"col-12 col-md-6 p-0\">\n            <Card.Body className=\"spacing-normal h-100\">\n              <div className=\"mura-item-meta\">\n                {\n                fieldlist.map(field => {\n                  switch(field) {\n                    case \"title\":\n                      return (\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\n                      )\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                          <div className=\"mura-item-meta__date\" key=\"date\">\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                          </div>\n                        );\n                    case \"summary\":\n                      return <OutputMarkup source={item.get('summary')} key={field} />\n                    case \"readmore\":\n                      return(\n                        <CollectionReadMoreBtn\n                          href={`/${item.get('filename')}`}\n                          ctatext=\"Read More\"\n                          link={Link}\n                          key={item.get('contentid')}\n                        />\n                      );\n                    case \"credits\":\n                        if(item.get('credits').length){\n                          return (\n                            <div className=\"mura-item-meta__credits\">\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                            </div>\n                          );\n                        }\n                        return null;\n                    case \"tags\":\n                        return (\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                              <ItemTags tags={item.get('tags')} />\n                            </div>\n                        );\n                    default:\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n                  }        \n                })\n                }\n              </div>\n            </Card.Body>\n          </div>\n        </div>\n      </Card>\n    );\n  }\n\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default AlternatingBoxes;","import { useState } from \"react\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\nconst AlternatingRows = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  return (\n    <>\n      <div className=\"collectionLayoutAlternatingBoxes\">\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      </div>\n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n  \n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    itemsList.push(\n    \n    <div className=\"mb-4\" key={item.get('contentid')}>\n      <Card className=\"mb-3 h-100 shadow\">\n        <div className=\"row no-gutters align-items-stretch\">\n          <div className={`col-12 col-md-6 ${i % 2 == 0 ? \"card-img-left\" : \"card-img-right  order-md-2\"}`}>\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} />\n          </div>\n          <div className=\"col-12 col-md-6 p-0\">\n            <Card.Body className=\"spacing-normal h-100\">\n              <div className=\"mura-item-meta\">\n                {\n                fieldlist.map(field => {\n                  switch(field) {\n                    case \"title\":\n                      return (\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\n                      )\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                          <div className=\"mura-item-meta__date\" key=\"date\">\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                          </div>\n                        );\n                    case \"summary\":\n                      return <OutputMarkup source={item.get('summary')} key={field} />\n                    case \"readmore\":\n                      return(\n                        <CollectionReadMoreBtn\n                          href={`/${item.get('filename')}`}\n                          ctatext=\"Read More\"\n                          link={Link}\n                          key={item.get('contentid')}\n                        />\n                      );\n                    case \"credits\":\n                        if(item.get('credits').length){\n                          return (\n                            <div className=\"mura-item-meta__credits\">\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                            </div>\n                          );\n                        }\n                        return null;\n                    case \"tags\":\n                        return (\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                              <ItemTags tags={item.get('tags')} />\n                            </div>\n                        );\n                    default:\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n                  }        \n                })\n                }\n              </div>\n            </Card.Body>\n          </div>\n        </div>\n      </Card>\n    </div>\n    );\n  }\n\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default AlternatingRows;","const ItemCategories = (props) => {\n    const Categories = props.categories;\n    // console.log('category assignments ItemCategories: ', Categories);\n    let catsList = [];\n    let cat = '';\n    const cats = Categories.items;\n    let catsTo = cats.length;\n    let hasnext = false;\n  \n    // console.log('getCategories categories: ' + JSON.stringify(cats, undefined, 2));\n    \n    if (cats.length){\n        for(let i = 0;i < catsTo;i++) {\n        cat = cats[i];\n        hasnext = i+1 < catsTo;\n  \n        catsList.push(\n          <span key={cat.categoryid}>{cat.categoryname}{hasnext && `, ` }</span>\n        )\n  \n      }\n      return catsList;\n    }\n    return (\n      <span>No Categories</span>\n    )\n}\n\nexport default ItemCategories;","import React from 'react';\n\nfunction CheckForItems() {\n    return(\n        <div className=\"alert alert-warning\">No results to display.</div>\n    )\n}\n\nexport default CheckForItems;","import { useState } from \"react\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\nimport ItemCategories from './ItemCategories';\nimport NoItemsMessage from './NoItemsMessage';\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\nconst Cards = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  if (!collection.properties.totalpages){\n    return(\n      <NoItemsMessage />\n    )\n  }  \n\n  return (\n    <>\n      <div className={`row collectionLayoutCards row-cols-1 row-cols-sm-${props.rowcolssm} row-cols-md-${props.rowcolsmd} row-cols-lg-${props.rowcolslg} row-cols-xl-${props.rowcolsxl}`}>\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      </div>\n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n  let catAssignments = [];\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    //categoryassignments require the feed to be expanded to include them\n    //the feed in resource hub is expanded but collection is not\n    catAssignments = item.getAll().categoryassignments;\n    \n    itemsList.push(    \n    <div className=\"col mb-4\" key={item.get('contentid')}>\n      <Card className=\"mb-3 h-100 shadow\">\n        {\n          fieldlist.filter(field => field == 'image').map(filteredField => (\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={item.get('fileid')} />\n          ))\n        }\n        <Card.Body>\n          <div className=\"mura-item-meta\">\n            {\n            fieldlist.map(field => {\n              switch(field) {\n                case \"title\":\n                  return (\n                    <Card.Title key={field}>{item.get('title')}</Card.Title>\n                  )\n                case \"date\":\n                case \"releasedate\":\n                    return (\n                      <div className=\"mura-item-meta__date\" key={`date${item.get('contentid')}`}>\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                      </div>\n                    );\n                case \"summary\":\n                  return <OutputMarkup source={item.get('summary')} key={field} />\n                default:\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n              }        \n            })\n            }\n          </div>\n        </Card.Body>\n        <Card.Footer>\n          <CollectionReadMoreBtn\n            href={`/${item.get('filename')}`}\n            ctatext=\"Read More\"\n            link={Link}\n            key={item.get('contentid')}\n          />\n          \n          {catAssignments &&\n            <>\n              <hr />\n              <Card.Text key=\"categories\"><ItemCategories categories={catAssignments} /></Card.Text>\n            </>\n          }\n        </Card.Footer>\n\n      </Card>\n    </div>\n    );\n  }\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default Cards;","import { useState } from \"react\";\nimport React from 'react';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\nimport ItemImage from './ItemImage';\n\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\nconst List = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  return (\n    <>\n      <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      \n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n  \n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    // console.log(item);\n\n    itemsList.push(\n      <div className=\"row mb-3\" key={item.get('contentid')}>\n        <ListImage fieldlist={fieldlist} item={item} imagesize={props.imagesize} />\n        <ListMeta fieldlist={fieldlist} item={item} Link={Link} />\n      </div>\n    );\n  }\n\n  return itemsList;\n}\n\nconst ListImage = (props) => {\n  const {fieldlist, item} = props;\n\n  let hasImage = false;\n  if (fieldlist.indexOf(\"image\") > -1) {\n    hasImage = true;\n  }\n  if(hasImage) {\n    const imagesize= props.imagesize || 'medium';\n    return(\n      <div className=\"col-12 col-md-3 mb-3 pr-md-0\">\n          <ItemImage image={item.get('images')[imagesize]} className=\"img-fluid\" alt={item.get('title')} key=\"image\" />\n      </div>\n    )  \n  }\n  return(\n    <></>\n  )\n}\n\nconst ListMeta = (props) => {\n  const {fieldlist, item, Link} = props;\n\n  let hasImage = false;\n  if (fieldlist.indexOf(\"image\") > -1) {\n    hasImage = true;\n  }\n\n  let isLink = false;\n  if (item.get('type') === \"Link\") {\n    isLink = true;\n  }\n  // console.log(item.get('type'));\n  return(\n    <div className={hasImage ? 'col-12 col-md-9 py-3' : 'col-12 py-3'}>\n        <div className=\"mura-item-meta\">\n        {\n            fieldlist.map(field => {\n              switch(field) {\n                case \"title\":\n                  return (\n                    <div className=\"mura-item-meta__title\" key={item.get('field')}>\n                      <h3>{item.get('title')}</h3>\n                    </div>\n                  )\n                case \"date\":\n                case \"releasedate\":\n                    return (\n                      <div className=\"mura-item-meta__date\" key=\"date\">\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                      </div>\n                    );\n                case \"summary\":\n                  return <OutputMarkup source={item.get('summary')} key={field} />\n                case \"readmore\":\n                      return (\n                        <div className=\"mura-item-meta__readmore\" key={field}>\n                          <CollectionReadMoreBtn\n                            href={`/${item.get('filename')}`}\n                            ctatext=\"Read More\"\n                            link={Link}\n                            key={item.get('contentid')}\n                          />\n                        </div>\n                      )\n                case \"credits\":\n                    if(item.get('credits').length){\n                      return (\n                        <div className=\"mura-item-meta__credits\">\n                          <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                        </div>\n                      );\n                    }\n                    return null;\n                case \"tags\":\n                    return (\n                        <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                          <ItemTags tags={item.get('tags')} />\n                        </div>\n                    );\n                default:\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n              }        \n            })\n        }\n        </div>\n      </div>\n  )\n}\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = (item) => {\n  const data = {};\n  data['fields'] = \"\";\n\n  return data;\n};\n\nexport default List;","import { useState } from \"react\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport OutputMarkup from \"./OutputMarkup\";\nimport CollectionNav from './CollectionNav';\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\n\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\nconst Masonry = ({props,collection,link}) => {\n  const [pos, setPos] = useState(0);\n  return (\n    <>\n      <div className={`collectionLayoutMasonry card-columns`}>\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \n      </div>\n      <div className=\"row\">\n        <div className=\"col-12\">\n        <CollectionNav collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\n        </div>\n      </div>\n    </>\n  )\n}\n\nconst CurrentItems = (props) => {\n  const {collection,nextn,link,pos,fields} = props;\n  let itemsList = [];\n  let item = '';\n  const Link = link;\n  const items = collection.get('items');\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\n  const maxItems = props.maxitems;\n  // console.log('fieldlist: ' + fieldlist);\n\n  if (maxItems < items.length && pos+nextn > maxItems){\n    itemsTo = maxItems;\n  }\n  \n  for(let i = pos;i < itemsTo;i++) {\n    item = items[i];\n    itemsList.push(\n      \n      <Card className=\"mb-3 h-100 shadow\" key={item.get('contentid')}>\n        {\n          fieldlist.filter(field => field == 'image').map(filteredField => (\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={item.get('fileid')} />\n          ))\n        }\n        <Card.Body>\n          <div className=\"mura-item-meta\">\n            {\n            fieldlist.map(field => {\n              switch(field) {\n                case \"title\":\n                  return (\n                    <Card.Title key={field}>{item.get('title')}</Card.Title>\n                  )\n                case \"date\":\n                case \"releasedate\":\n                    return (\n                      <div className=\"mura-item-meta__date\" key=\"date\">\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                      </div>\n                    );\n                case \"summary\":\n                  return <OutputMarkup source={item.get('summary')} key={field} />\n                case \"credits\":\n                    if(item.get('credits').length){\n                      return (\n                        <div className=\"mura-item-meta__credits\">\n                          <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                        </div>\n                      );\n                    }\n                    return null;\n                case \"tags\":\n                    return (\n                        <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                          <ItemTags tags={item.get('tags')} />\n                        </div>\n                    );\n                default:\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n              }        \n            })\n            }\n          </div>\n        </Card.Body>\n        <Card.Footer>\n          <CollectionReadMoreBtn\n            href={`/${item.get('filename')}`}\n            ctatext=\"Read More\"\n            link={Link}\n            key={item.get('contentid')}\n          />\n        </Card.Footer>\n\n      </Card>\n    );\n  }\n\n  return itemsList;\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default Masonry;","import { useState } from \"react\";\nimport React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport OutputMarkup from \"./OutputMarkup\";\nimport ItemDate from './ItemDate';\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\nimport ItemCredits from './ItemCredits';\nimport ItemTags from './ItemTags';\n\nimport Slider from \"react-slick\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight, faChevronLeft } from '@fortawesome/free-solid-svg-icons'\n/*\n  The link component throws an error when rerending after being \n  reconfigured in edit mode. Hence CollectionLink\n*/\n\nconst SlickSlider = ({props,collection,link}) => {\n\n  function CustomNextArrow(props) {\n    const { className, style, onClick } = props;\n    return (\n      <div\n        className={className}\n        onClick={onClick}\n      >\n        <FontAwesomeIcon icon={faChevronRight} />\n      </div>\n    );\n  }\n  \n  function CustomPrevArrow(props) {\n    const { className, style, onClick } = props;\n    return (\n      <div\n        className={className}\n        onClick={onClick}\n      >\n        <FontAwesomeIcon icon={faChevronLeft} />\n      </div>\n    );    \n  }  \n  \n  const slides = collection.map((item) => (\n      <SliderItem \n        sliderimage={item.get('images')[props.imagesize]}\n        imagesize={props.imagesize}\n        item={item}\n        link={link}\n        slidestoshow={Number(props.slidestoshow)}\n        {...props}\n        key={item.get('contentid')}\n      />\n  ))\n  \n  //console.log('slidesToShow: ' + props.slidestoshow + ' slidesToScroll: ' + props.slidestoscroll + ' objectID: ' + props.objectid);\n  // var slickSettings = {\n  //   dots: {props.dots},\n  //   arrows: {props.arrows},\n  //   infinite: {props.infinite},\n  //   speed: {Number(props.speed)},\n  //   slidesToShow:{Number(props.slidestoshow)},\n  //   slidesToScroll: {Number(props.slidestoshow)},\n  //   autoplay: {props.autoplay},\n  //   autoplaySpeed: {Number(props.autoplayspeed)},\n  //   lazyLoad: {props.lazyload},\n  //   vertical: {props.vertical},\n  //   verticalSwiping: {props.verticalswiping},\n  //   responsive={[\n  //     {\n  //       breakpoint: 0,\n  //       settings: {\n  //         slidesToShow: 1,\n  //         slidesToScroll: 1\n  //       }\n  //     },\n  //     {\n  //       breakpoint: 576,\n  //       settings: {\n  //         slidesToShow: 2,\n  //         slidesToScroll: 2\n  //       }\n  //     },\n  //     {\n  //       breakpoint: 992,\n  //       settings: {\n  //         slidesToShow: Number(props.slidestoshow),\n  //         slidesToScroll: Number(props.slidestoshow)\n  //       }\n  //     }\n  //   ]},\n  //   nextArrow: {<CustomNextArrow />},\n  //   prevArrow: {<CustomPrevArrow />}\n  // }\n  return (\n      slides != null && slides.length > 0 &&\n      <div className={`collectionLayoutSlickSlider ${props.sliderlayout}`}>\n        <Slider \n          dots={props.dots}\n          arrows={props.arrows}\n          infinite={props.infinite}\n          speed={Number(props.speed)}\n          slidesToShow={Number(props.slidestoshow)}\n          slidesToScroll={Number(props.slidestoshow)}\n          autoplay={props.autoplay}\n          autoplaySpeed={Number(props.autoplayspeed)}        \n          lazyLoad={props.lazyload}\n          vertical={props.vertical}\n          verticalSwiping={props.verticalswiping}\n          fade={props.fade}\n          centerMode={props.centermode}\n          centerPadding={props.centerpadding}\n          responsive={[\n            {\n              breakpoint: 0,\n              settings: {\n                slidesToShow: 1,\n                slidesToScroll: 1\n              }\n            },\n            {\n              breakpoint: 576,\n              settings: {\n                slidesToShow: 2,\n                slidesToScroll: 2\n              }\n            },\n            {\n              breakpoint: 992,\n              settings: {\n                slidesToShow: Number(props.slidestoshow),\n                slidesToScroll: Number(props.slidestoshow)\n              }\n            }\n          ]}\n          nextArrow={<CustomNextArrow />}\n          prevArrow={<CustomPrevArrow />}\n          key={props.objectid}\n        >\n        {slides}\n      </Slider>\n      </div>\n      // these are causing an error: slidesPerRow={props.slidesperrow} rows={props.rows} \n  )\n}\n\nconst SliderItem = (props) => {\n  const item = props.item;\n  const slidesToShow = props.slidesToShow;\n  const Link = props.link;\n  const fieldlist = props.fields ? props.fields.toLowerCase().split(\",\") : [];\n  // console.log('image size: ' + props.imagesize);\n  if (props.sliderlayout === 'banner') {//swith to props.layout\n    return(\n      <div key={item.get('contentid')} className=\"h-100 position-relative\">\n        <Link href={`/${item.get('filename')}`} passHref>\n          <img src={props.sliderimage} />\n        </Link>\n        <div className=\"mura-item-meta\">\n                {\n                fieldlist.map(field => {\n                  switch(field) {\n                    case \"title\":\n                      return (\n                        <div className=\"mura-item-meta__title\" key={field}>{item.get('title')}</div>\n                      )\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                          <div className=\"mura-item-meta__date\" key={item.get('releasedate')}>\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                          </div>\n                        );\n                    case \"summary\":\n                      return <OutputMarkup className=\"mura-item-meta__summary\" source={item.get('summary')} key={field} />\n                    case \"readmore\":\n                      return(\n                        <div className=\"mura-item-meta__readmore\" key={item.get('contentid')}>\n                          <CollectionReadMoreBtn\n                            href={`/${item.get('filename')}`}\n                            ctatext=\"Read More\"\n                            link={Link}\n                            key={item.get('contentid')}\n                          />\n                        </div>\n                      );\n                    case \"credits\":\n                        if(item.get('credits').length){\n                          return (\n                            <div className=\"mura-item-meta__credits\">\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\n                            </div>\n                          );\n                        }\n                        return null;\n                    case \"tags\":\n                        return (\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\n                              <ItemTags tags={item.get('tags')} />\n                            </div>\n                        );\n                    default:\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n                  }        \n                })\n                }\n              </div>\n      </div>\n    )\n  } else {\n    return(\n      <div className=\"mx-2 h-100\" key={props.contentid} >\n        <Card className=\"h-100\">\n          {\n            fieldlist.filter(field => field == 'image').map(filteredField => (\n              <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={filteredField} />\n            ))\n          }          \n          <Card.Body className=\"spacing-normal h-100\">\n              <div className=\"mura-item-meta\">\n                {\n                fieldlist.map(field => {\n                  switch(field) {\n                    case \"title\":\n                      return (\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\n                      )\n                    case \"date\":\n                    case \"releasedate\":\n                        return (\n                          <div className=\"mura-item-meta__date\" key=\"date\">\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\n                          </div>\n                        );\n                    case \"summary\":\n                      return <OutputMarkup source={item.get('summary')} key={field} />\n                    case \"readmore\":\n                      return(\n                        <CollectionReadMoreBtn\n                          href={`/${item.get('filename')}`}\n                          ctatext=\"Read More\"\n                          link={Link}\n                          key={item.get('contentid')}\n                        />\n                      );\n                    default:\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\n                  }        \n                })\n                }\n              </div>\n            </Card.Body>\n        </Card>\n      </div>   \n    )\n  }\n\n  \n\n}\n\n/*\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\n*/\nexport const getQueryProps = () => {\n  const data = {};\n  data['fields'] = \"title,summary\";\n\n  return data;\n};\n\nexport default SlickSlider;","import React from 'react';\nimport Mura from 'mura.js/src/core/core';\n\n// eslint-disable-next-line\nimport { getComponent } from '@murasoftware/next-core';\nimport { Decorator } from '@murasoftware/next-core';\n\nexport const Container = function(props) {\n  const { items,content } = props;\n  // console.log('Container -> items', items);\n  // console.log('Container -> props', props);\n  if (!items) return '';\n\n  return (items.map(item => {\n          const obj=Object.assign({},item);\n          if(Mura.cloning){\n            obj.instanceid=Mura.createUUID();\n          }\n          obj.key=obj.instanceid;\n          obj.moduleStyleData=props.moduleStyleData;\n          obj.content = content;\n          obj.inited = true;\n          return (<Decorator {...obj}> {getComponent(obj)} </Decorator>)\n      })\n   \n  );\n}\n\nexport default Container;\n","import React from 'react';\n\nconst Hr = function(props) {\n    return (\n      <hr />\n    );\n  \n}\n\nexport default Hr;\n","import React from 'react';\nimport Link from 'next/link';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\n\nexport const CTAButton = ({buttontext,buttoncolor,buttonsize,buttonlink,buttontarget,buttonblock}) => {\n\n  var btnclass = `btn btn-${buttoncolor||'primary'}`;\n  if (buttonsize != 'md'){\n    btnclass = btnclass + ` btn-${buttonsize}`;\n  }\n  if (buttonblock){\n    btnclass = btnclass + ` btn-block`;\n  }\n\n  return (\n    <>\n        <Link href={buttonlink||'https://www.murasoftware.com'} passHref>\n          <a target={buttontarget||'_self'} className={btnclass} role=\"button\">{buttontext || 'Press Me'} <FontAwesomeIcon icon={faChevronRight} /></a>\n        </Link>\n    </>\n  );\n}\n\nexport default CTAButton;","import React from 'react';\n\nconst Embed = function(props) {\n  let objectparams=Object.assign({},props);\n  objectparams.source=objectparams.source || '';\n\n  return (\n    <div dangerouslySetInnerHTML={{ __html: objectparams.source }}/>\n  );\n  \n}\n\nexport default Embed;\n","import React from 'react';\nimport OutputMarkup from \"./OutputMarkup\";\n\nconst Image =function(props) {\n  let objectparams = Object.assign({},props);\n  objectparams=objectparams || {};\n\tobjectparams.src=objectparams.src||'';\n\tobjectparams.alt=objectparams.alt||'';\n\tobjectparams.caption=objectparams.caption||'';\n\tobjectparams.imagelink=objectparams.imagelink||'';\n  objectparams.fit=objectparams.fit||'';\n  objectparams.imagelinktarget=objectparams.imagelinktarget||';'\n\n\tif(!objectparams.src){\n\t\treturn '';\n\t}\n\n  if(objectparams.imagelink){\n    return (\n      <figure>\n        <a href={objectparams.imagelink} target={objectparams.imagelinktarget}>\n          <Img {...objectparams} />\n        </a>\n        <FigCaption {...objectparams} />\n      </figure>\n  );\n  } else {\n    return (\n      <figure style={{margin:\"0px\"}}>\n         <Img {...objectparams} />\n        <FigCaption {...objectparams} />\n      </figure>\n  );\n  }\n \n}\n\nconst FigCaption = ({caption}) => {\n  if(caption && caption != '<p></p>'){\n    return (\n      <figcaption><OutputMarkup source={caption} /></figcaption>\n    );\n  } else {\n    return '';\n  }\n}\n\nconst Img = (props) => {\n  if(props.fit){\n    return (\n      <img src={props.src} alt={props.alt} loading=\"lazy\" style={{height:\"100%\",width:\"100%\",objectFit:props.fit}} data-object-fit={props.fit} />\n    );\n  } else {\n    return (\n      <img src={props.src} alt={props.alt} loading=\"lazy\" />\n    )\n  }\n \n}\n\n\nexport default Image;\n","import React from 'react';\n/* \n    This is not being used yet\n\n    steps to use:\n        1. Set external:true or remove the attribute from the mura.config.json\n        2. Remove the comment from the mura/react/Login import in the mura.config.js\n        3. Add the component to the moduleRegistry \"login\" item in the mura.config.js\n        4. Update the MuraMinimal theme login module to be this.SSR aware\n        5. docker-compose up --build\n*/\n\nfunction Login(props) {\n    return (\n      <h3>Login</h3>\n    );\n  \n}\n\nexport default Login;\n","import React,{useState,useEffect} from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport Mura from 'mura.js';\n\nfunction MatrixSelector(props){\n    const objectparams = Object.assign({}, props);\n\n    const _personaIds = objectparams.dynamicProps ? objectparams.dynamicProps.personaProps : '';\n    const _stageIds = objectparams.dynamicProps ? objectparams.dynamicProps.stageProps : '';\n\n    const [personaIds, setPersonaIds] = useState(_personaIds);\n    const [stageIds, setStageIds] = useState(_stageIds);\n\n    const _personaQ = objectparams.personaq ? objectparams.personaq : 'Who are you?';\n    const _stageQ = objectparams.stageq ? objectparams.stageq : 'Where are you in the process?';\n\n    const [personaQ, setPersonaQ] = useState(_personaQ);\n    const [stageQ, setStateQ] = useState(_stageQ);\n\n    const [curSelPersona, setCurSelPersona] = useState('');\n    const [curSelStage, setCurSelStage] = useState('');\n    const [buttonEnabled, setButtonEnabled] = useState(false);\n    const [updateSuccess, setUpdateSuccess] = useState(false);\n    const [showingAlert,setShowingAlert] = useState(false);\n    const [isUpdating, setIsUpdating] = useState(false);\n\n    const [selPersonaValidated, setSelPersonaValidated] = useState(false);\n    const [selStageValidated, setSelStageValidated] = useState(false);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        updateExperience(curSelPersona,curSelStage);        \n        return false;\n    }\n\n    const updateSelectedPersona = (e) => {\n        const newPersona = e.target.value;\n        if (curSelPersona != newPersona){\n            setCurSelPersona(newPersona);\n            checkSelectValidation(newPersona,curSelStage);\n        }\n    }\n\n    const updateSelectedStage = (e) => {\n        const newStage = e.target.value;\n        if (curSelStage != newStage){\n            setCurSelStage(newStage);\n            checkSelectValidation(curSelPersona,newStage);\n        }        \n    }\n\n    const checkSelectValidation = (persona,stage) => {\n        //check persona value and personaIds length to see if validated flag should be updated\n        if (persona != '' && personaIds.length){\n            setSelPersonaValidated(true);\n        } else if (persona = '' && personaIds.length){\n            setSelPersonaValidated(false);\n        }\n        //check stage value and stageIds length to see if validated flag should be updated\n        if (stage != '' && stageIds.length){\n            setSelStageValidated(true);\n        } else if (stage = '' && stageIds.length){\n            setSelStageValidated(false);\n        }\n    }\n\n    const updateButtonStatus = (selPersonaValidated,selStageValidated) => {\n        //check validation flags to see if Button should be enabled\n        if (selPersonaValidated && selStageValidated){\n            setButtonEnabled(true);\n        } else {\n            setButtonEnabled(false);\n        }\n    }\n    const updateExperience = async (personaid,stageid) => {\n        setIsUpdating(true);\n        setButtonEnabled(false);\n        \n        const Personaid = personaid;\n        const Stageid = stageid;\n    \n        const exp = await Mura\n          .getEntity('matrix_selector')\n          .invoke(\n            'updateExperience',\n            {\n                personaid:personaid,\n                stageid:stageid\n            }\n          );\n        \n        if (exp.personaselected || exp.stageselected){\n            setUpdateSuccess(1);\n            setShowingAlert(true);\n            setIsUpdating(false);\n        }\n    \n        if (exp.personaselected){\n            Mura(function(){\n                Mura.trackEvent({\n                        category: 'Matrix Self ID',\n                        action: 'Persona',\n                        label:  '#esapiEncode(\"javascript\",personaName)#'\n                });\n            });\n        }\n        \n        if (exp.stageselected){\n            Mura(function(){\n                Mura.trackEvent({\n                        category: 'Matrix Self ID',\n                        action: 'Stage',\n                        label: '#esapiEncode(\"javascript\",stageName)#'\n                });\n            });\n        }\n    \n    }\n    \n    useEffect(() => {\n        let isMounted = true;\n\n        if (isMounted) {\n            updateButtonStatus(selPersonaValidated,selStageValidated);\n            //should we force a page refresh after this to load the updated persona and stage?\n        }\n        \n        return () => { isMounted = false };\n    }, [selPersonaValidated,selStageValidated])\n\n    if(!objectparams.dynamicProps){\n        useEffect(() => {\n            let isMounted = true;\n            if (isMounted) {\n                getPersonas().then((personaProps) => {\n                    if (isMounted) {\n                        setPersonaIds(personaProps);\n                        if (!personaProps.length){\n                            if (isMounted) {\n                                setSelPersonaValidated(true);\n                            }\n                        }\n                    }\n                });\n                getStages().then((stageProps) => {\n                    if (isMounted) {\n                        setStageIds(stageProps);\n                        if (!stageProps.length){\n                            if (isMounted) {\n                                setSelStageValidated(true);\n                            }\n                        }\n                    }\n                });\n            }\n            return () => { isMounted = false };\n        }, []);\n        //todo do we need to add hidden form fields if personaIds or stageIds EQ 1?\n        return(\n            <>\n            <h3>Matrix Selector</h3>\n            {updateSuccess && showingAlert &&\n                <Alert variant=\"success\" >\n                    <h4>Thanks!</h4>\n                    <p>We&rsquo;re tailoring our content for you&hellip;</p>\n                </Alert>\n            }\n            {!updateSuccess && !showingAlert &&\n            <Form inline id=\"mura_matrix-selector-form\" onSubmit={handleSubmit} data-autowire=\"false\">\n                <div className=\"select-wrap\">\n                {personaIds.length > 1 &&\n                <>\n                    <Form.Label className=\"mr-2\">{personaQ}</Form.Label>\n                    <Form.Control as=\"select\" name=\"persona\" size=\"sm\" className=\"mr-2\" value={props.curSelPersona} onChange={updateSelectedPersona}>\n                        <option value=\"\" key=\"--\">--</option>\n                        {personaIds.map((personaId) => (\n                        <option value={personaId.personaid} key={personaId.personaid}>{personaId.selfidq}</option>\n                        ))}\n                    </Form.Control>\n                </>\n                }\n                {stageIds.length > 1 &&\n                <>\n                    <Form.Label className=\"mr-2\">{stageQ}</Form.Label>\n                    <Form.Control as=\"select\" name=\"stage\" size=\"sm\" value={props.curSelStage} onChange={updateSelectedStage}>\n                        <option value=\"\" key=\"--\">--</option>\n                        {stageIds.map((stageId) => (\n                        <option value={stageId.stageid} key={stageId.stageid}>{stageId.selfidq}</option>\n                        ))}\n                    </Form.Control>\n                </>\n                }\n                </div>\n                <div className=\"w-100 mt-3\">\n                <Button variant=\"primary\" type=\"submit\" disabled={!buttonEnabled}>\n                    {isUpdating ? 'Updating...' : 'Submit'}\n                </Button>\n                </div>\n            </Form>\n            }\n            </>\n        )\n    } else {\n\n    }\n}\n\nexport const getDynamicProps = async props => {\n    const personaIds = await getPersonas();\n    const stageIds = await getStages();\n\n    return{\n      personaProps:personaIds,\n      stageProps:stageIds\n    }\n}\n\nconst getPersonas = async () => {  \n    \n    const personaIds = await Mura\n      .getEntity('matrix_selector')\n      .invoke(\n        'getPersonas'\n      );\n\n    return personaIds;\n}\n\nconst getStages = async () => {  \n    \n    const stageIds = await Mura\n      .getEntity('matrix_selector')\n      .invoke(\n        'getStages'\n      );\n    \n    return stageIds;\n}\n\nexport default MatrixSelector;\n","import React, { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport NavDropdown from 'react-bootstrap/NavDropdown'\nimport { getMura, getHref } from '@murasoftware/next-core';\n\nfunction PrimaryNav(props) {\n  const objectparams = Object.assign({}, props);\n  //console.log(props)\n  if(!objectparams.dynamicProps){\n    const [items, setItems]=useState('');\n\n    useEffect(() => {\n        getDynamicProps(objectparams).then((dynamicProps)=>{\n          setItems(dynamicProps.items);\n        });\n    },[]);\n\n    if(items){\n      return (\n        <Render items={items} link={RouterlessLink} props={props} />\n      );\n    } else {\n      return (\n        <div></div>\n        );\n    }\n  } else {\n    return (\n      <Render items={objectparams.dynamicProps.items} link={RouterLink} props={props} />\n    );\n  }\n}\n\nconst Render = ({ items, link, ...props }) => {\n    const Link=link;\n    const homeNavIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 20 20\"><path d=\"M16 8.5l1.53 1.53l-1.06 1.06L10 4.62l-6.47 6.47l-1.06-1.06L10 2.5l4 4v-2h2v4zm-6-2.46l6 5.99V18H4v-5.97zM12 17v-5H8v5h4z\" fill=\"#626262\"/></svg>';\n   \n    return (\n      <Navbar bg=\"white\" variant=\"light\" expand=\"lg\" className=\"navbar-static-top py-0\"  collapseOnSelect>\n      <div className=\"container-xl\">\n        <Link\n          href={'/'}\n          className=\"navbar-brand\"\n          type=\"navbarbrand\"\n          navlogo={props.props.navlogo} />\n        <Navbar.Toggle aria-controls=\"primary-nav\" />\n        <Navbar.Collapse id=\"primary-nav\">\n          <Nav className=\"ml-auto\">\n\n            <Homelink displayhome={props.props.displayhome} link={Link} navicon={homeNavIcon} />\n            \n            {\n              items.map(item => {\n                  return (  \n                    <NavLinkDropdown key={item.contentid} contentid={item.contentid} filename={item.filename} menutitle={item.menutitle} kids={item.kids} link={Link} navicon={item.navicon} />\n                  )\n              })\n            }\n            {props.props.content && props.props.content.translations && (\n                <LangOptions translations={props.props.content.translations} />\n              )\n            }\n            </Nav>\n          </Navbar.Collapse>\n        </div>\n      </Navbar>\n    )\n};\n\nexport const getDynamicProps = async props => {\n  const Mura = getMura();\n  \n  console.log(\"requesting primary nav data\",props.instanceid,Date.now(),Mura.siteid);\n \n  const collection=await Mura.getFeed('content')\n    .where()\n    .prop('parentid')\n    .isEQ(Mura.homeid)\n    .sort('orderno')\n    .expand(\"kids\")\n    .fields('navicon,menutitle,url,filename')\n    .getQuery();\n  \n    console.log(\"receiving primary nav data\",props.instanceid,Date.now(),Mura.siteid);\n  return {\n    items:collection.getAll().items\n  };\n}\n\nconst RouterlessLink = ({href,className,type,menutitle,navlogo})=>{\n  switch(type) {\n    case \"navdropdownitem\":\n      return (\n        <NavDropdown.Item href={getHref(href)}>{menutitle}</NavDropdown.Item>\n      )\n    case \"navlink\":\n      return (\n        <Nav.Link href={getHref(href)}>{menutitle}</Nav.Link>\n      )\n    case \"navbarbrand\":\n      return(\n        <Navbar.Brand href={getHref(href)}>\n          <img src={navlogo} loading=\"lazy\" />\n        </Navbar.Brand>\n      )\n    default:\n      return (     \n        <a className={className} href={getHref(href)}>\n            {menutitle}\n        </a>\n      )\n    }\n  }\n  \nconst RouterLink = ({href,className,type,menutitle,navlogo})=>{\n  switch(type) {\n    case \"navdropdownitem\":\n      return (\n        <Link \n        href={getHref(href)} passHref>\n          <NavDropdown.Item>{menutitle}</NavDropdown.Item>\n        </Link>\n      )\n    case \"navlink\":\n      return (\n        <Link \n        href={getHref(href)} passHref>\n          <Nav.Link>{menutitle}</Nav.Link>\n        </Link>\n      )\n    case \"navbarbrand\":\n      return(\n        <Link \n        href={getHref(href)} passHref>\n          <Navbar.Brand>\n            <img src={navlogo} loading=\"lazy\" />\n          </Navbar.Brand>\n        </Link>\n      )\n    default:\n      return (\n        <Link \n          href={getHref(href)}>      \n            <a \n              className={className}>\n                {menutitle}\n            </a>\n        </Link>\n      )\n    }\n}\n\nconst Homelink = (props) => {\n  const Link=props.link;\n  const homeTitle = 'Home';\n  const Mura = getMura();\n\n  function createIcon() { \n    return {__html: props.navicon};\n  };\n\n  if (props.displayhome){\n    return (\n      <li className=\"nav-item\">\n        <Link\n          key={Mura.homeid}\n          href=\"/\"\n          className=\"nav-link\"\n          type=\"navitem\"\n          menutitle={<><span dangerouslySetInnerHTML={createIcon()} /> {homeTitle}</>}\n          type=\"navlink\" />\n      </li>\n    )\n  }\n  return (\n    <></>\n  )\n}\n\nconst LangOptions = props => {\n\n  if (props.translations.items.length) {\n       \n    return (\n      <>\n      <NavDropdown key=\"lang-options\" title=\"Other Languages\" id=\"lang-options\" href=\"\" renderMenuOnMount={true}>\n        {/* if there are children, build the rest of the dropdown */}\n        {props.translations.items.map((translation) => {\n          return(\n            <NavDropdown.Item key={`lang-option-${translation.siteid}`} href={translation.url}>{translation.label}</NavDropdown.Item>\n          )\n        })}\n      </NavDropdown>\n      </>\n    )\n  }\n}\n\nconst NavLinkDropdown = props => {\n  const Link = props.link;\n  function createIcon() { \n    return {__html: props.navicon};\n  };\n  if (props.kids.items.length) {\n       \n    return (\n      <>\n      <NavDropdown key={props.contentid} title={<div style={{display: \"inline-block\"}}><span dangerouslySetInnerHTML={createIcon()} /> {props.menutitle} </div>} id={`dropdown-${props.contentid}`} href={`/${props.filename}`} renderMenuOnMount={true}>\n        {/* placing the main nav item in the dropdown for now since the parent nav item is not a clickable link */}\n        <Link\n          key={props.contentid}\n          href={`/${props.filename}`}\n          type=\"navdropdownitem\"\n          menutitle={props.menutitle} />\n\n        {/* if there are children, build the rest of the dropdown */}\n        {props.kids.items.map((child) => {\n          return(\n            <Link\n              key={child.contentid}\n              href={`/${child.filename}`}\n              type=\"navdropdownitem\"\n              menutitle={child.menutitle} />\n          )\n        })}\n      </NavDropdown>\n      </>\n    )\n  }\n\n  // if item doesn't have children create a link\n  return (\n    <li className=\"nav-item\">\n      <Link \n        key={props.contentid}\n        href={`/${props.filename}`}\n        type=\"navlink\"\n        menutitle={<><span dangerouslySetInnerHTML={createIcon()} /> {props.menutitle} </>} />\n    </li>    \n  )\n\n}\nexport default PrimaryNav;\n","import React,{useState,useEffect} from 'react';\nimport Form from 'react-bootstrap/Form';\nimport { getMura } from '@murasoftware/next-core';\nimport { getLayout, RouterlessLink, RouterLink } from './Collection';\n/*\n  TODO: scrollpages -- not sure if this is even working at all in collection in NextJS, should test\n*/\n\nfunction ResourceHub(props) {\n  const Mura = getMura();\n  // return('This is the resource hub');\n  const objectparams = Object.assign({}, props);\n  const DynamicCollectionLayout = getLayout(objectparams.layout).component;\n\n  let _collection = false;\n  if(objectparams.dynamicProps){\n    _collection=new Mura.EntityCollection(objectparams.dynamicProps.collection,Mura._requestcontext);\n  }\n  const [collection,setCollection]=useState(_collection);\n  \n  //console.log(objectparams.dynamicProps);\n\n  //SET DEFAULTS FOR CURRENT FILTER PARAMETERS\n  const _curSubtype = objectparams.dynamicProps ? objectparams.dynamicProps.filterprops.subtype : '*';\n  const _curCategoryIds = objectparams.dynamicProps ? objectparams.dynamicProps.filterprops.categoryid : '*';\n  const _curPersonaId = objectparams.dynamicProps ? objectparams.dynamicProps.filterprops.personaid : '*';\n  const _curCategoriesArray = objectparams.dynamicProps ? objectparams.dynamicProps.filterprops.selectedcats : [];\n  const _hasMXP = objectparams.dynamicProps ? objectparams.dynamicProps.filterprops.hasmxp : false;\n\n  const [curSubtype, setCurSubtype]=useState(_curSubtype);\n  const [curCategoriesArray, setCurCategoriesArray]=useState(_curCategoriesArray);\n  const [curCategoryIds, setCurCategoryIds]=useState(_curCategoryIds);\n  const [curPersonaId, setCurPersonaId]=useState(_curPersonaId);\n  const [hasMXP, setHasMXP]=useState(_hasMXP);\n  const [newFilter, setNewFilter]=useState(false);\n  const [filterUpdated, setFilterUpdated]=useState(new Date().toString());\n  \n  const updateFilter = (e) => {\n    switch(e.target.name) {\n      case 'subtype':\n        let subtype = e.target.value;\n        if (subtype != curSubtype) {\n          setCurSubtype(subtype);\n          setNewFilter(true);\n          setFilterUpdated(new Date().toString());\n        }\n        break\n      case 'personaid':\n        let personaid = e.target.value;\n        if (personaid != curPersonaId){\n          setCurPersonaId(personaid);\n          setNewFilter(true);\n          setFilterUpdated(new Date().toString());\n        }\n        break\n      default:\n        if (!curCategoryIds.includes(e.target.value)){\n          setCurCategoriesArray(updateCategoryIds(e.target.name,e.target.value,curCategoriesArray));\n          setCurCategoryIds(getCategoryIds(curCategoriesArray));\n          setNewFilter(true);\n          setFilterUpdated(new Date().toString());\n        }        \n    }//switch    \n  }\n\n  if(!objectparams.dynamicProps){\n\n    useEffect(() => {\n      let isMounted = true;\n      if (isMounted) {\n        getFilterProps(curSubtype,curCategoryIds,curPersonaId,curCategoriesArray,newFilter).then((filterProps) => {\n          if (isMounted) {\n            setHasMXP(filterProps.hasmxp);\n            setCurSubtype(filterProps.subtype);\n            setCurCategoryIds(filterProps.categoryid);\n            setCurPersonaId(filterProps.personaid);\n            setCurCategoriesArray(filterProps.selectedcats);\n            if(isMounted){\n              getCollection(props,filterProps).then((collection) => {\n                setCollection(collection);\n              });\n            }\n          }\n        });\n      }\n      return () => { isMounted = false };\n    }, [filterUpdated])\n\n    if(collection) {\n      console.log('dynamic');\n      return (\n        <div>\n          <RenderFilterForm \n            updateFilter={updateFilter}\n            {...props}\n            curSubtype={curSubtype}\n            curCategoryId={curCategoryIds}\n            curPersonaId={curPersonaId}\n            curCategoriesArray={curCategoriesArray}\n            hasMXP={hasMXP}\n          />\n\n          <DynamicCollectionLayout collection={collection} props={props} link={RouterlessLink}/>\n\n        </div>\n      )\n    } else {\n      console.log('empty');\n      return (\n        <div>{/* EMPTY COLLECTION */}</div>\n      )\n    }\n\n  } else {\n    console.log('ssr');\n    useEffect(() => {\n      let isMounted = true;\n      if (isMounted) {\n        getFilterProps(curSubtype,curCategoryIds,curPersonaId,curCategoriesArray,newFilter).then((filterProps) => {\n          if(isMounted){\n            setHasMXP(filterProps.hasmxp);\n            setCurSubtype(filterProps.subtype);\n            setCurCategoryIds(filterProps.categoryid);\n            setCurPersonaId(filterProps.personaid);\n            setCurCategoriesArray(filterProps.selectedcats);\n            \n            getCollection(props,filterProps).then((collection) => {\n              if(isMounted){\n                setCollection(collection);\n              }\n            })\n          }\n        });\n      }\n      return () => { isMounted = false };\n    }, [filterUpdated])\n\n    return (\n      <div>\n        <RenderFilterForm \n          updateFilter={updateFilter}\n          {...props}\n          curSubtype={curSubtype}\n          curCategoryId={curCategoryIds}\n          curPersonaId={curPersonaId}\n          curCategoriesArray={curCategoriesArray}\n          hasMXP={hasMXP}\n        />\n        <DynamicCollectionLayout collection={collection} props={props} link={RouterLink}/>\n      </div>\n    )\n\n  }\n}\n\nconst getCategoryIds = categories => {\n  let categoriesList;\n  for (let i = 0; i < categories.length; i++){\n    if (categories[i].value != '*'){\n      if (i < 1){\n        categoriesList = categories[i].value;\n      } else {\n        categoriesList = categoriesList + ',' + categories[i].value;\n      }\n    }\n  }\n  \n  if (categoriesList == undefined){\n    categoriesList = '*';\n  }\n  return categoriesList\n}\n\nexport const getDynamicProps = async props => {\n  const filterProps = await getFilterProps('','','','',false);\n  const collection = await getCollection(props,filterProps);\n  if(!Array.isArray(filterProps.selectedcats)){\n    try{\n      filterProps.selectedcats = JSON.parse(filterProps.selectedcats);\n    }catch(e){\n      filterProps.selectedcats = [];\n    }\n  }\n  return{\n    collection:collection.getAll(),\n    filterprops:filterProps\n  }\n}\n\nconst getCollection = async (props,filterProps) => {\n  const Mura = getMura();\n\n  if(typeof props.content.getAll != 'undefined'){\n      props.content=props.content.getAll();\n  }\n\n  const excludeIDList=props.content.contentid;\n\n  const feed = Mura.getFeed('content');\n\n      feed.prop('type').isIn('Page,Link,File');\n      feed.andProp('path').containsValue(props.content.contentid);\n      feed.andProp('contentid').isNotIn(excludeIDList);\n      feed.expand('categoryassignments');\n\n      if(filterProps.subtype.length){\n        feed.andProp('subtype').isEQ(filterProps.subtype);\n      }\n      if(filterProps.categoryid.length){\n        feed.andProp('categoryid').isIn(filterProps.categoryid);\n        feed.useCategoryIntersect(true);\n      }\n      feed.maxItems(props.maxitems);\n      feed.itemsPerPage(0);\n\n      let collection;\n\n      if(filterProps.personaid.length){\n        collection = await feed.getQuery({sortBy:\"mxpRelevance\"});\n      } else {\n        collection = await feed.sort('releasedate','desc').getQuery();\n      }\n  return collection;\n}\n\nconst getFilterProps = async (subtype,categoryid,personaid,selectedcategories,newfilter) => {\n  const Subtype = subtype;\n  const Categoryid = categoryid;\n  const Personaid = personaid;\n  const CurSelectedCats = selectedcategories;\n  const NewFilter = newfilter;\n\n  \n  const filterProps = await Mura\n    .getEntity('resourcehub')\n    .invoke(\n      'processFilterArgs',\n      {\n        subtype:Subtype, \n        categoryid:Categoryid, \n        personaid:Personaid, \n        selectedcats:CurSelectedCats, \n        newfilter: NewFilter?1:0\n      }\n    );\n  \n  // console.log('filterProps: ', filterProps);\n  return filterProps;\n}\n\nconst RenderFilterForm = (props) => {\n  const objectparams = Object.assign({}, props);\n  const [categoriesArray,setCategoriesArray]=useState(false);\n  const [personasArray,setPersonasArray]=useState(false);\n\n  const subtypesArray = objectparams.subtypes ? objectparams.subtypes.split(',') : [];\n  const categoryIds = objectparams.categoryids ? objectparams.categoryids.split(',') : [];\n  const personaIds = objectparams.personaids ? objectparams.personaids.split(',') : [];\n\n  useEffect(() => {\n    let isMounted = true;\n    if(isMounted && personaIds.length){\n      getCategoriesInfo(categoryIds).then((data)=>{\n        if(isMounted && data.items.length){\n          setCategoriesArray(data.items);\n        }\n      });\n     }\n    if(isMounted && personaIds.length){\n      getPersonasInfo(personaIds).then((data)=>{\n        if(isMounted && data.items.length){\n          setPersonasArray(data.items);  \n        }      \n      });\n    }   \n    return () => { isMounted = false };\n  }, []);\n  \n  return (\n    <Form className=\"row row-cols-1 row-cols-sm-2 row-cols-lg-3\" id=\"resource-filter-form\">\n      {subtypesArray.length > 0 &&\n      <Form.Group controlId=\"selectSubtypes\" className=\"col type\">\n        <Form.Label>Content Types:</Form.Label>\n        <Form.Control as=\"select\" name=\"subtype\" custom onChange={ props.updateFilter } value={props.curSubtype}>\n          <option value=\"*\" key=\"All Subtypes\">All</option>\n          {subtypesArray.map((subtype, index) => (\n            <option value={subtype} key={index}>{subtype}</option>\n          ))}\n        </Form.Control>\n      </Form.Group>\n      }\n      {categoriesArray && categoriesArray.length > 0 &&\n      <>\n        {categoriesArray.map((category, index) => (\n          <CategorySelect categoryid={category.categoryid} filterlabel={category.name} updateFilter={props.updateFilter} curCategoryId={props.curCategoryId} key={category.categoryid} curCategoriesArray={props.curCategoriesArray} />\n        ))}\n      </>\n      }\n      {props.hasMXP && personasArray.length > 0 &&\n      <Form.Group controlId=\"selectPersonas\" className=\"col topic\">\n      <Form.Label>Audience:</Form.Label>\n        <Form.Control as=\"select\" name=\"personaid\" custom onChange={ props.updateFilter } value={props.curPersonaId}>\n          <option value=\"*\" key=\"All Personas\">All</option>\n          {personasArray.map(option => (\n            <option value={option.personaid} key={option.personaid}>{option.name}</option>\n          ))}\n        </Form.Control>\n      </Form.Group>\n      }\n    </Form>\n  );\n}\n\nconst CategorySelect = props => {\n  const [categoryKids,setCategoryKids]=useState([]);\n  let curSelectValue = '*';\n\n  useEffect(() => {\n    let isMounted = true;\n    getCategoryKidsInfo(props.categoryid).then((data)=>{\n      if (isMounted) {\n        setCategoryKids(data.items);\n      }\n    });\n\n    return () => { isMounted = false };\n  }, []);  \n  \n  for (let i=0; i < categoryKids.length; i++){\n      if (props.curCategoryId.includes(categoryKids[i].categoryid)){\n        curSelectValue = categoryKids[i].categoryid;\n        break\n      }\n  }\n\n  return(\n    <Form.Group controlId={`selectCategories${props.filterlabel}`} className=\"col topic\">\n      <Form.Label>{props.filterlabel}:</Form.Label>\n        <Form.Control as=\"select\" name={`categoryid${props.filterlabel}`} custom onChange={ props.updateFilter } value={curSelectValue}>\n          <option value=\"*\" key=\"All Categories\">All</option>\n          {categoryKids.map((category, index) => (\n            <option value={category.categoryid} key={index}>{category.name}</option>\n          ))}\n        </Form.Control>\n    </Form.Group>\n  )\n}\n\nconst getCategoriesInfo = async (categoryIds) => {\n  const feed = Mura.getFeed('category');\n        feed.findMany(categoryIds);\n\n  const query = await feed.getQuery();\n  const categories = query.getAll();\n\n  return categories\n}\n\nconst getPersonasInfo = async (personaIds) => {\n  const feed = Mura.getFeed('persona');\n        feed.findMany(personaIds);\n\n  const query = await feed.getQuery();\n  const personas = query.getAll();\n\n  return personas\n}\n\nconst getCategoryKidsInfo = async (categoryId) => {\n  const feed = Mura.getFeed('category');\n        feed.prop('parentid').isEQ(categoryId);\n\n  const query = await feed.getQuery();\n  const categorykids = query.getAll();\n\n  return categorykids\n}\n\nconst updateCategoryIds = (name,value,curCategoriesArray) => {\n  let match = 0;\n\n    for (let i = 0; i < curCategoriesArray.length; i++) {\n      if (curCategoriesArray[i].name === name) {\n            curCategoriesArray[i].value = value;\n          match = 1;\n          break;\n      }\n    }\n    if (!match){\n        curCategoriesArray.push({ \n          name:name,\n          value:value \n        });\n    }\n  \n  return curCategoriesArray;\n}\n\n\n//for debugging only\nconst replacerFunc = () => {\n  const visited = new WeakSet();\n  return (key, value) => {\n    if (typeof value === \"object\" && value !== null) {\n      if (visited.has(value)) {\n        return;\n      }\n      visited.add(value);\n    }\n    return value;\n  };\n};\n\nexport default ResourceHub;","import React,{useState,useEffect} from 'react';\nimport Mura from 'mura.js';\nimport OutputMarkup from \"./OutputMarkup\";\n\nfunction Text(props) {\n  const objectparams = Object.assign({}, props);\n\n  if(!objectparams.dynamicProps && (objectparams.sourcetype==='component' || objectparams.sourcetype==='boundattribute' )){\n    const [source, setSource]=useState('');\n\n    useEffect(() => {\n        getDynamicProps(objectparams).then((dynamicProps)=>{\n          setSource(dynamicProps.source);\n        });\n    },[]);\n\n    if(source){\n      return (\n        <OutputMarkup source={source} />\n      );\n    } else {\n      return (\n        <div></div>\n        );\n    }\n  } else {\n    let source='';\n    if(objectparams.dynamicProps && (objectparams.sourcetype==='component' || objectparams.sourcetype==='boundattribute')){\n      source=objectparams.dynamicProps.source;\n    } else {\n      source=objectparams.source;\n    }\n    if(source && source !== 'unconfigured'){\n      return (\n        <OutputMarkup source={source} />\n      );\n    } else {\n      return (\n        <div></div>\n        );\n    }\n  }\n}\n\nexport const getDynamicProps = async props => {\n  const data = {};\n  if (\n    typeof props.sourcetype !== 'undefined'\n    && (props.sourcetype === 'component' || props.sourcetype === 'boundattribute')\n  ) {\n    if(props.sourcetype === 'component'){\n      if(Mura.isUUID(props.source)){\n        const entity= await Mura.getEntity('content')\n          .loadBy('contentid', props.source, { type: 'component', fields: 'body' });\n          data.source=entity.get('body');\n      } else {\n        const entity= await Mura.getEntity('content')\n        .loadBy('title', props.source, { type: 'component', fields: 'body' });\n        data.source=entity.get('body');\n      } \n    } else if(props.sourcetype === 'boundattribute'){\n      if(typeof props.content.get =='function'){\n        data.source=props.content.get(props.source);\n      } else {\n        data.source=props.content[props.source] || '';\n      }\n    }\n  }\n\n  return data;\n};\n\nexport default Text;\n","import React,{useState,useEffect} from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\n\nfunction PrivacyTools(props){   \n    // const objectparams = Object.assign({}, props);\n    // console.log(objectparams);\n\n    const [optIn, setOptIn] = useState(0);\n    const [optOut, setOptOut] = useState(0);\n    const [mxpAnon, setMxpAnon] = useState(1);\n    const [updateSuccess,setUpdateSuccess] = useState(0);\n    const [showingAlert,setShowingAlert] = useState(false);\n\n    useEffect(() => {\n        let isMounted = true;\n        if (isMounted) {\n            \n            getCurrentPrivacy().then(result => {\n                setMxpAnon(result);\n                console.log('result: ' + result);\n            }); \n\n        }\n        return () => { isMounted = false };\n    }, []);\n\n    // console.log('_mxpAnon: ', _mxpAnon);\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        updatePrivacyMXP(optIn,optOut);        \n        setUpdateSuccess(1);\n        return false;\n    }   \n\n    const updatePrivacyMXP = async (optIn,optOut) => {\n        \n        const privacyOptIn = await Mura\n            .getEntity('privacy_tools')\n            .invoke(\n                'updatePrivacyMXP',\n                {\n                    mxp_opt_in:optIn,\n                    mxp_opt_out:optOut\n                }\n            );\n        \n        setShowingAlert(true);\n        return privacyOptIn;\n    }\n\n    const mxpAnonChanged = (e) => {\n        setMxpAnon(e.target.value);\n        if(e.target.value == 1){\n            setOptIn(0);\n            setOptOut(1);\n        } else {\n            setOptIn(1);\n            setOptOut(0);\n        }\n    }\n    \n    //update opt in / out values on radio button click\n    useEffect(() => {\n        let isMounted = true;\n        if (isMounted) {\n            if(mxpAnon == 1){\n                setOptIn(0);\n                setOptOut(1);\n            } else {\n                setOptIn(1);\n                setOptOut(0);\n            }\n        }\n    \n        return () => { isMounted = false };\n      }, [mxpAnon]); \n    \n    //show alert or not\n    useEffect(() => {\n        let isMounted = true;\n        if (isMounted) {\n            if(showingAlert){\n                setTimeout(() => {\n                    setShowingAlert(false);\n                }, 2000);\n            }\n        }\n\n        return () => { isMounted = false };\n    }, [showingAlert]);\n\n    return(\n    <>\n        <h3>Privacy Settings</h3>\n        {updateSuccess == 1 && showingAlert &&\n            <Alert variant=\"success\" >Your preference has been saved.</Alert>\n        }\n        <Form onSubmit={handleSubmit} data-autowire=\"false\">\n            <Form.Group controlId=\"radio_mxp_anon\">\n                <Form.Check\n                    type=\"radio\"\n                    id=\"mxp_anon1\"\n                    name=\"mxp_anon\"\n                    value=\"0\"\n                    checked={mxpAnon == 0}\n                    onChange={mxpAnonChanged}\n                    label=\"For a better experience, allow this site to store some identifying information\"\n                />\n                <Form.Check\n                    type=\"radio\"\n                    id=\"mxp_anon2\"\n                    name=\"mxp_anon\"\n                    value=\"1\"\n                    checked={mxpAnon == 1}\n                    onChange={mxpAnonChanged}\n                    label=\"Do not allow this site to store some identifying information\"\n                />\n            </Form.Group>\n            <Button variant=\"primary\" type=\"submit\">\n                Submit\n            </Button>\n        </Form>\n    </>\n    );\n}\n\nconst getCurrentPrivacy = async () => {\n    const mxpPrivacy = await Mura\n            .getEntity('privacy_tools')\n            .invoke(\n                'privacyStatus'\n            );\n    \n    // return mxpPrivacy.Output;\n    return mxpPrivacy;\n}\n\nexport default PrivacyTools"],"names":["Youtube","props","instanceid","videoid","React","Vimeo","Wistia","padding","position","height","left","top","width","ModalVideo","modalcta","buttonclass","buttonplayiconsize","buttonctatext","showbuttonplayicon","getVideoPlayer","players","videoplatform","Video","displaytype","length","ItemDate","date","formatteddate","releasedate","Date","lastupdate","Intl","DateTimeFormat","year","month","day","format","ItemCredits","Credits","credits","split","creditsList","credit","i","push","ItemTags","Tags","tags","tagList","tag","Mura","getMuraConfig$1","createContext","OutputMarkup","source","className","muraConfig","getMuraConfig","ConnectorConfig","connectorConfig","Object","assign","htmleditortype","__html","ArticleMeta","fields","fieldlist","toLowerCase","item","content","map","field","title","summary","getLayout","layout","ComponentRegistry","console","log","getDefaultQueryPropsFromLayout","getQueryProps","Collection","getMura","objectparams","DynamicCollectionLayout","component","dynamicProps","useState","collection","setCollection","useEffect","getDynamicProps","then","EntityCollection","_requestcontext","RouterlessLink","RouterLink","href","children","getHref","data","cdata","sourcetype","feed","getFeed","getAll","andProp","isEQ","contentid","getSelectFields","expand","getExpandFields","sort","sortby","sortdirection","getQuery","query","src","items","Array","isArray","JSON","parse","e","where","itemsPerPage","maxItems","maxitems","findMany","related","totaltems","getRelatedContent","getEntity","set","imagesizes","getImageSizes","isUUID","imageSizes","fieldarray","hasDate","hasFilename","hasImage","hasFileid","hasContentid","hasContenthistid","hasParentid","filter","join","CollectionNav","pos","nextn","setPos","scrollpages","itemsTo","setItemsTo","get","isInNode","isEndVisible","end","isScrolledIntoView","node","setTimeout","next","prev","itemsOf","itemsToMax","nav","NavButton","val","onItemClick","_onClick","label","NavButtonLabel","FontAwesomeIcon","faChevronRight","faChevronLeft","CollectionLayout","link","CurrentItems","itemsList","Link","CollectionReadMoreBtn","ctatext","ItemImage","image","alt","itemImage","CollectionLayoutAccordian","accordionpadding","collapseindicators","collapseindicatorslocation","activeId","setActiveId","toggleActive","id","Card","Header","imagesize","AlternatingBoxes","AlternatingRows","ItemCategories","Categories","categories","catsList","cat","cats","catsTo","hasnext","categoryid","categoryname","CheckForItems","Cards","properties","totalpages","NoItemsMessage","rowcolssm","rowcolsmd","rowcolslg","rowcolsxl","catAssignments","categoryassignments","filteredField","List","ListImage","indexOf","ListMeta","Masonry","SlickSlider","CustomNextArrow","style","onClick","CustomPrevArrow","slides","Number","slidestoshow","sliderlayout","dots","arrows","infinite","speed","autoplay","autoplayspeed","lazyload","vertical","verticalswiping","fade","centermode","centerpadding","breakpoint","settings","slidesToShow","slidesToScroll","objectid","SliderItem","sliderimage","Container","obj","cloning","createUUID","key","moduleStyleData","inited","getComponent","Hr","CTAButton","buttontext","buttoncolor","buttonsize","buttonlink","buttontarget","buttonblock","btnclass","Embed","Image","caption","imagelink","fit","imagelinktarget","margin","FigCaption","Img","objectFit","Login","MatrixSelector","_personaIds","personaProps","_stageIds","stageProps","personaIds","setPersonaIds","stageIds","setStageIds","_personaQ","personaq","_stageQ","stageq","personaQ","stageQ","curSelPersona","setCurSelPersona","curSelStage","setCurSelStage","buttonEnabled","setButtonEnabled","updateSuccess","setUpdateSuccess","showingAlert","setShowingAlert","isUpdating","setIsUpdating","selPersonaValidated","setSelPersonaValidated","selStageValidated","setSelStageValidated","handleSubmit","preventDefault","updateExperience","updateSelectedPersona","newPersona","target","value","checkSelectValidation","updateSelectedStage","newStage","persona","stage","updateButtonStatus","personaid","stageid","Personaid","Stageid","invoke","exp","personaselected","stageselected","trackEvent","category","action","isMounted","getPersonas","getStages","personaId","selfidq","stageId","PrimaryNav","setItems","Render","homeNavIcon","navlogo","displayhome","filename","menutitle","kids","navicon","translations","now","siteid","prop","homeid","type","Homelink","homeTitle","createIcon","LangOptions","translation","url","NavLinkDropdown","display","child","ResourceHub","_collection","_curSubtype","filterprops","subtype","_curCategoryIds","_curPersonaId","_curCategoriesArray","selectedcats","_hasMXP","hasmxp","curSubtype","setCurSubtype","curCategoriesArray","setCurCategoriesArray","curCategoryIds","setCurCategoryIds","curPersonaId","setCurPersonaId","hasMXP","setHasMXP","newFilter","setNewFilter","toString","filterUpdated","setFilterUpdated","updateFilter","name","includes","updateCategoryIds","getCategoryIds","getFilterProps","filterProps","getCollection","categoriesList","undefined","excludeIDList","isIn","containsValue","isNotIn","useCategoryIntersect","sortBy","selectedcategories","newfilter","Subtype","Categoryid","CurSelectedCats","NewFilter","RenderFilterForm","categoriesArray","setCategoriesArray","personasArray","setPersonasArray","subtypesArray","subtypes","categoryIds","categoryids","personaids","getCategoriesInfo","getPersonasInfo","index","curCategoryId","option","CategorySelect","categoryKids","setCategoryKids","curSelectValue","getCategoryKidsInfo","filterlabel","personas","categoryId","categorykids","match","Text","setSource","loadBy","entity","PrivacyTools","optIn","setOptIn","optOut","setOptOut","mxpAnon","setMxpAnon","getCurrentPrivacy","result","updatePrivacyMXP","mxp_opt_in","mxp_opt_out","privacyOptIn","mxpAnonChanged"],"mappings":"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"}