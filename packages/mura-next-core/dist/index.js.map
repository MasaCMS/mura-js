{"version":3,"file":"index.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/Connector.js","../src/Decorator.js","../src/GlobalContext.js","../src/DisplayRegion.js","../src/ExternalAssets.js","../src/EditLayout.js","../src/Styles.js","../src/MainLayout.js"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","/* eslint-disable */\nimport React from 'react';\nimport Mura from 'mura.js';\n\nrequire('mura.js/src/core/stylemap-static');\n\nvar muraConfig, connectorConfig, ComponentRegistry, ConnectorConfig, ExternalModules;\nvar isEditMode=false;\n\nexport const MuraJSRefPlaceholder = '\"undefined\"!=typeof window&&function(u){u.queuedMuraCmds=[],u.queuedMuraPreInitCmds=[],\"function\"!=typeof u.Mura&&(u.Mura=u.mura=u.Mura=function(e){u.queuedMuraCmds.push(e)},u.Mura.preInit=function(e){u.queuedMuraPreInitCmds.push(e)})}(window);';\n\nexport const setIsEditMode = (value) => {\n  isEditMode=value;\n}\n\nexport const getIsEditMode = () => {\n  return isEditMode;\n}\n\nexport const initConnector = (config) => {\n  muraConfig = config;\n  ComponentRegistry = config.ComponentRegistry;\n  ConnectorConfig = config.ConnectorConfig;\n  ExternalModules = config.ExternalModules;\n  connectorConfig=Object.assign({},ConnectorConfig);\n}\n\nexport const getMuraConfig = () => {\n  return muraConfig;\n}\n\nexport const useAsync=function(asyncFn, onSuccess) {\n  useEffect(() => {\n    let isMounted = true;\n    asyncFn().then(data => {\n      if (isMounted) onSuccess(data);\n    });\n    return () => { isMounted = false };\n  }, [asyncFn, onSuccess]);\n}\n\nexport const getHref = (filename) => {\n  let path=filename.split('/').filter(item => item.length);\n  \n  if(connectorConfig.siteidinurls){\n    return '/' + Mura.siteid + '/' + path.join('/');\n  } else {\n    return '/' + path.join('/');\n  }\n}\n\nexport const getComponent = item => {\n  getMura();\n\n  let objectkey = item.object;\n  \n  if (typeof ComponentRegistry[objectkey] == 'undefined'){\n      objectkey = Mura.firstToUpperCase(item.object);\n  }\n\n  if (typeof ComponentRegistry[objectkey] != 'undefined') {\n    const ComponentVariable = ComponentRegistry[objectkey].component;\n    return <ComponentVariable key={item.instanceid} {...item} />;\n  }\n\n  return <p key={item.instanceid}>DisplayRegion: {item.objectname}</p>;\n};\n\nexport const getMuraPaths = async function() {\n  \n  let siteids=ConnectorConfig.siteid;\n  let pathList=[];\n\n  if(!Array.isArray(siteids)){\n    siteids=siteids.split();\n  }\n\n  for (let index = 0; index < siteids.length; index++) {\n    getMura(siteids[index]);\n    const items=await Mura.getFeed('content')\n    .maxItems(0)\n    .itemsPerPage(0)\n    .sort('orderno')\n    .getQuery({renderMode:'static'});\n    pathList=pathList.concat(items.getAll().items);\n    pathList.push({ \n      siteid:siteids[index],\n      filename: \"\" \n    });\n  }\n\n  const paths = pathList\n    .map(item => {\n      let page=[];\n      if(item.filename){\n        page=item.filename.split('/');\n      }\n      page.unshift(item.siteid);\n      console.log(item.filename,page)\n      return { params: { page: page } };\n    })\n    .filter(function(item) {\n      return (item.params.page.length || item.params.page[0]);\n    });\n\n  return paths;\n};\n\nexport const getMuraExternalModules = function(){\n  return ExternalModules;\n}\n\nexport const getMura = function(context){\n  const startingsiteid=Mura.siteid;\n\n  if(typeof context == 'string'\n    && ConnectorConfig.siteid.find((item)=>{\n      return (item===context)\n      })\n  ){\n   \n    connectorConfig.siteid=context;\n  \n  } else {\n\n    const ishomepage=(\n      (context && !(context.params && context.params.page)) \n      || (typeof location != 'undefined' \n        && (\n          location.pathname==\"/\"\n          || location.pathname==(ConnectorConfig.editroute + \"/\")\n        )\n      )\n    );\n  \n    if(Array.isArray(ConnectorConfig.siteid)){\n      if(ishomepage){\n        connectorConfig.siteid=ConnectorConfig.siteid[0];\n      } else {\n        let page=[];\n        if(context && context.params && context.params.page){\n          page=[...context.params.page];\n          page=page.filter(item => item.length);\n        } else if (typeof location != 'undefined'){\n          page=location.pathname.split(\"/\");\n          page=page.filter(item => item.length);\n          if(page.length \n            && ConnectorConfig.editroute\n            && page[0]===ConnectorConfig.editroute.split(\"/\")[1]\n          ){\n            page.shift();\n          }\n        } \n      \n        if(page.length){\n          if(ConnectorConfig.siteid.find((item)=>{\n            return (item===page[0])\n            })\n          ){\n            connectorConfig.siteid=page[0];\n            connectorConfig.siteidinurls=true;\n          } else {\n            connectorConfig.siteid=ConnectorConfig.siteid[0];\n          }\n        } \n      }\n    }\n\n  }\n\n  const clearMuraAPICache = function(){\n    delete connectorConfig.apiEndpoint;\n    delete connectorConfig.apiendpoint;\n    delete Mura.apiEndpoint;\n    delete Mura.apiendpoint;\n  };\n\n  if (context && context.res) {\n    Object.assign(connectorConfig,\n      { \n        response: context.res,\n        request: context.req\n      }\n    );\n    clearMuraAPICache();\n    console.log('initing', connectorConfig.siteid)\n    Mura.init(connectorConfig);\n  } else if (startingsiteid != connectorConfig.siteid) {\n    console.log('changing siteid',startingsiteid,connectorConfig.siteid)\n    clearMuraAPICache();\n    Mura.init(connectorConfig);\n  }\n\n  Mura.holdReady(true);\n\n  return Mura;\n};\n\nexport const getRootPath = () => {\n  return getMura().rootpath;\n};\n\nexport const getSiteName = () => {\n  return getMura().sitename;\n};\n\nexport const getMuraProps = async (context,isEditMode,params) => {\n  const Mura=getMura(context);\n  \n  Mura.renderMode='dynamic';\n\n  if(!isEditMode){\n    Mura.renderMode='static';\n  }\n\n  const muraObject = await renderContent(context,isEditMode,params);\n  const content = muraObject.getAll();\n  const moduleStyleData = await getRegionProps(content,isEditMode);\n  const codeblocks={\n    header:[],\n    bodystart:[],\n    footer:[]\n  };\n\n  try {\n    if(connectorConfig.codeblocks){\n      const codeCollection=await Mura.getFeed('codeblock')\n        .where().prop('active').isEQ(1).getQuery();\n      \n      codeCollection.forEach((item)=>{\n        const placement=item.get('placement').toLowerCase();\n      \n        if(placement=='header'){\n          codeblocks.header.push(item.get('code'));\n        } else if (placement=='footer'){\n          codeblocks.footer.push(item.get('code'));\n        } else if (placement=='bodystart'){\n          codeblocks.bodystart.push(item.get('code'));\n        }\n      });\n    }\n  } catch(e){console.log(e)}\n\n  delete Mura._request;\n  delete Mura.response;\n  delete Mura.request;\n  delete Mura.renderMode;\n\n  const props = {\n    content: content,\n    moduleStyleData: moduleStyleData,\n    externalModules: ExternalModules,\n    codeblocks: codeblocks\n  };\n\n  if(isEditMode){\n    return {\n      props\n    };\n\n  } else {\n    return {\n      props,\n      revalidate:1\n    };\n  }\n};\n\nasync function renderContent(context,isEditMode,params) {\n  let query = {};\n\n  if (context.browser) {\n    query = Mura.getQueryStringParams();\n  } else if (context.query) {\n    query = {...context.query};\n  }\n\n  if(isEditMode){\n    query.isEditRoute=isEditMode;\n  }\n\n  let filename = '';\n\n  if (context.params && context.params.page) {\n    filename = [...context.params.page];\n  }\n\n  if(Array.isArray(filename)){\n    if(filename.length && filename[0]==connectorConfig.siteid){\n      filename.shift();\n    }\n    filename=filename.join(\"/\");\n  }\n  \n  //console.log(filename,query,isEditMode)\n  query=Object.assign(query,params);\n\n  return await Mura.renderFilename(filename, query).then(\n    async rendered => {\n      return rendered;\n    },\n    async rendered => {\n      if (!rendered) {\n        return Mura.getEntity('Content').set({\n          title: '404',\n          menutitle: '404',\n          body: 'The content that you requested can not be found',\n          contentid: Mura.createUUID(),\n          isnew: 1,\n          siteid: Mura.siteid,\n          type: 'Page',\n          subtype: 'Default',\n          contentid: Mura.createUUID(),\n          contenthistid: Mura.createUUID(),\n          filename: '404',\n          displayregions:{\n            primarycontent:{\n              local:{\n                items:[]\n              }\n            }\n          }\n        });\n      } else {\n        return rendered;\n      }\n    },\n  );\n}\n\n\n\nasync function getRegionProps(content,isEditMode) {\n  getMura();\n  let moduleStyleData = {};\n\n  content.displayregions=content.displayregions || {};\n  \n  const regions=Object.values(content.displayregions);\n\n  for(const regionIdx in regions){\n   const region=regions[regionIdx]; \n    if (\n      typeof region.inherited != 'undefined' &&\n      Array.isArray(region.inherited.items)\n    ) {\n      for(const itemdIx in region.inherited.items){\n        const item=region.inherited.items[itemdIx];\n        item.instanceid = item.instanceid || Mura.createUUID();\n        moduleStyleData[item.instanceid] = await getModuleProps(\n          item,\n          moduleStyleData,\n          isEditMode,\n          content\n        );\n      }\n    }\n   \n    for(const itemIdx in region.local.items){\n      const item=region.local.items[itemIdx];\n      item.instanceid = item.instanceid || Mura.createUUID();\n      moduleStyleData[item.instanceid] = await getModuleProps(\n        item,\n        moduleStyleData,\n        isEditMode,\n        content\n      );\n    }\n\n  }\n\n  return moduleStyleData;\n}\n\nasync function getModuleProps(item,moduleStyleData,isEditMode,content) {\n  getMura();\n\n  try{\n\n    let objectkey = item.object;\n   \n    if (typeof ComponentRegistry[objectkey] == 'undefined'){\n       objectkey = Mura.firstToUpperCase(item.object);\n    }\n\n    if (typeof ComponentRegistry[objectkey] != 'undefined') {\n     \n      if(ComponentRegistry[objectkey].SSR){\n        item.dynamicProps = await ComponentRegistry[objectkey].getDynamicProps({...item,content});\n      }\n      if (item.object == 'container') {\n        if (\n          typeof item.items != 'undefined' &&\n          !Array.isArray(item.items)\n        ) {\n          try {\n            item.items = JSON.parse(item.items);\n          } catch (e) {\n            item.items = [];\n          }\n        }\n        for(const containerIdx in item.items){\n          const containerItem=item.items[containerIdx];\n          containerItem.instanceid = containerItem.instanceid || Mura.createUUID();\n          moduleStyleData[containerItem.instanceid] = await getModuleProps(\n            containerItem,\n            moduleStyleData,\n            isEditMode,\n            content\n          );\n        }\n      }\n    }\n  } catch(e){\n    console.log(e);\n  }\n\n  const styleData = Mura.recordModuleStyles(item);\n \n  return {\n    isEditMode:isEditMode,\n    cssRules: styleData.cssRules,\n    targets: styleData.targets,\n    id: 'mura-styles' + item.instanceid,\n    stylesupport: item.stylesupport || {},\n    };\n\n}\n","import React, { useContext } from 'react';\nimport Mura from 'mura.js';\nimport { getIsEditMode, getMuraConfig } from '@murasoftware/next-core';\n\nfunction Decorator(props) {\n  const muraConfig =getMuraConfig();\n  const { ComponentRegistry, ExternalModules } = muraConfig;\n  const { label, instanceid, labeltag, children } = props;\n  let isEditMode = getIsEditMode();\n\n  //console.log(\"MuraDecorator -> isEditMode\", isEditMode);\n\n  const domObject = {\n    className: 'mura-object mura-async-object',\n  };\n\n  const domContent = {\n    className: 'mura-object-content',\n  };\n\n  const domMeta={\n    className:\"mura-object-meta\"\n  }\n\n  const domMetaWrapper={\n    className:\"mura-object-meta-wrapper\"\n  }\n\n  //Proxied module are modules that will always be server side rendered\n  const isExternalModule=ExternalModules[props.object];\n\n  let objectKey = props.object;\n\n  if (typeof ComponentRegistry[objectKey] == 'undefined'){\n    objectKey = Mura.firstToUpperCase(props.object);\n  }\n\n  const isSSR=ComponentRegistry[objectKey] && (ComponentRegistry[objectKey].SSR || ComponentRegistry[objectKey].ssr);\n\n  if (isEditMode || isExternalModule || !isSSR) {\n    Object.keys(props).forEach(key => {\n      if (\n        !['html', 'content', 'children', 'isEditMode', 'dynamicProps', 'moduleStyleData'].find(\n          restrictedkey => restrictedkey === key,\n        )\n      ) {\n        if (typeof props[key] === 'object') {\n          domObject[`data-${key}`] = JSON.stringify(props[key]);\n        } else if (\n          typeof props[key] !== 'undefined' &&\n          !(typeof props[key] === 'string' && props[key] === '')\n        ) {\n          domObject[`data-${key}`] = props[key];\n        }\n      }\n      if (key === 'class') {\n        domObject.className += ` ${props[key]}`;\n      } else if (key === 'cssclass') {\n        domObject.className += ` ${props[key]}`;\n      } else if (key === 'cssid') {\n        domObject.id += ` ${props[key]}`;\n      } else if (key === 'contentcssclass') {\n        domContent.className += ` ${props[key]}`;\n      } else if (key === 'contentcssid') {\n        domContent.id += ` ${props[key]}`;\n      } else if (key === 'metacssclass') {\n        domMeta.className += ` ${props[key]}`;\n      } else if (key === 'metacssid') {\n        domMeta.id += ` ${props[key]}`;\n      }\n    });\n    \n    if(domObject.className.split(' ').find($class => $class === 'container')){\n      domMetaWrapper.className += ' container';\n    }\n  } else {\n    domObject['data-instanceid'] = instanceid;\n    domObject['data-inited'] = true;\n    domObject.className = `mura-object-${props.object}`;\n\n    if(typeof props.moduleStyleData != 'undefined' && typeof props.moduleStyleData[instanceid] != 'undefined'){\n      domObject.className +=\n        ` ${props.moduleStyleData[instanceid].targets.object.class}`;\n      domObject.id = props.moduleStyleData[props.instanceid].targets.object.id;\n      domContent.className =\n        props.moduleStyleData[props.instanceid].targets.content.class;\n      domContent.id = props.moduleStyleData[props.instanceid].targets.content.id;\n      domMetaWrapper.className =\n        props.moduleStyleData[props.instanceid].targets.metawrapper.class;\n      domMeta.className =\n        props.moduleStyleData[props.instanceid].targets.meta.class;\n      domMeta.id =\n        props.moduleStyleData[props.instanceid].targets.meta.id;\n    } else {\n      domObject.id = '';\n      domContent.id = '';\n      domMetaWrapper.className = '';\n      domMeta.className = '';\n      domMeta.id =';'\n    }\n\n    ['objectspacing','contentspacing','metaspacing'].forEach((key)=>{\n      if(typeof props[key] != 'undefined' && props[key] && props[key] != 'custom'){\n        domObject['data-' + key] = props[key];\n      }\n    });\n\n  }\n  \n  if(isExternalModule || !isSSR){\n    if(isExternalModule && props.html){\n      <div {...domObject}>\n        {label ? <MuraMeta label={label} labeltag={labeltag} dommeta={domMeta} dommetawrapper={domMetaWrapper}/> : null}\n        {label ? <div className=\"mura-flex-break\" /> : null}\n        <div {...domContent} dangerouslySetInnerHTML={{__html:props.html}}></div>\n      </div>\n    } else {\n      return (\n        <div {...domObject}></div>\n      );\n    }\n  } else {\n    return (\n      <div {...domObject}>\n        {label ? <Meta label={label} labeltag={labeltag} dommeta={domMeta} dommetawrapper={domMetaWrapper}/> : null}\n        {label ? <div className=\"mura-flex-break\" /> : null}\n        <div {...domContent}>{children}</div>\n      </div>\n    );\n  }\n  \n}\n\nconst Meta = ({ label, labeltag, dommeta, dommetawrapper }) => {\n  const LabelHeader = labeltag ? `${labeltag}` : 'h2';\n  return (\n    <div {...dommetawrapper}>\n      <div {...dommeta}>\n        <LabelHeader>{label}</LabelHeader>\n      </div>\n    </div>\n  );\n};\n\nexport default Decorator;\n","import { createContext } from 'react';\n\nexport const EditContext = createContext();\n\nexport const MuraContext = createContext();\n\nexport default {\n    EditContext,\n    MuraContext\n};","import React, { useContext } from 'react';\nimport { getIsEditMode, getComponent } from './Connector';\nimport MuraDecorator from './Decorator';\nimport {  EditContext  } from './GlobalContext';\n\nconst DisplayRegionSection = ({ children, region, section, isEditMode }) => {\n  let out = null;\n  if (typeof region.name !== 'undefined' && isEditMode) {\n    if (section === 'inherited' && region.inherited.items.length) {\n      out = (\n        <div className=\"mura-region-inherited\">\n          <div className=\"frontEndToolsModal mura\">\n            <span className=\"mura-edit-label mi-lock\">\n              {region.name.toUpperCase()}: Inherited\n            </span>\n          </div>\n          {children}\n        </div>\n      );\n    } if (section === 'local') {\n      out = (\n        <div className=\"mura-editable mura-inactive\">\n          <div\n            className=\"mura-region-local mura-inactive mura-editable-attribute\"\n            data-loose=\"false\"\n            data-regionid={region.regionid}\n            data-inited=\"false\"\n            data-perm=\"true\"\n          >\n            <label className=\"mura-editable-label\" style={{ display: 'none' }}>\n              {region.name.toUpperCase()}\n            </label>\n            {children}\n          </div>\n        </div>\n      );\n    }\n  } else {\n    const regionName = `mura-region-${  section}`;\n\n    out = <div className={regionName}>{children}</div>;\n  }\n  return out;\n};\n\nconst DisplayRegion = ({ region, moduleStyleData,content }) => {\n  const isEditMode = getIsEditMode();\n  let inherited = '';\n// Mura inheritance, where modules are inherited from parent content\n  if (region.inherited && region.inherited.items.length) {\n    inherited = (\n      <DisplayRegionSection\n        region={region}\n        isEditMode={isEditMode}\n        section=\"inherited\"\n      >\n        {region.inherited.items.map(item => {\n          const obj = Object.assign({}, item);\n          obj.key = obj.instanceid;\n          obj.moduleStyleData = moduleStyleData;\n          obj.content = content;\n          return <MuraDecorator {...obj}>{getComponent(obj)}</MuraDecorator>;\n        })}\n      </DisplayRegionSection>\n    );\n  }\n\n  return (\n    <div className=\"mura-region\" data-regionid={region.regionid}>\n      {inherited}\n      <DisplayRegionSection\n        region={region}\n        isEditMode={isEditMode}\n        content={content}\n        section=\"local\"\n      >\n        {region.local.items.map(item => {\n          const obj = Object.assign({}, item);\n          obj.key = obj.instanceid;\n          obj.moduleStyleData = moduleStyleData;\n          obj.content = content;\n          return <MuraDecorator {...obj}>{getComponent(obj)}</MuraDecorator>;\n        })}\n      </DisplayRegionSection>\n    </div>\n  );\n};\n\nexport default DisplayRegion;\n","import React from 'react';\n\nfunction ExternalAssets(props) {\n    const { externalModules } = props;\n    if (typeof externalModules !== 'undefined') {\n       return (\n         <div className=\"mura-external-assets\">\n            {Object.keys(externalModules).map(key => {\n                const module = externalModules[key];\n                if(module.js && Array.isArray(module.js)){\n                    return (\n                        module.js.map((item)=>{\n                            return  (\n                                <script key={item} src={item} defer></script>\n                            );\n                        })\n                    )\n                } \n            })}\n            {Object.keys(externalModules).map(key => {\n                const module = externalModules[key];\n                if(module.css && Array.isArray(module.css)){\n                    return (\n                        module.css.map((item)=>{\n                            return  (\n                                <link key={item} rel=\"stylesheet\" href={item}/>\n                            );\n                        })\n                    )\n                } \n            })}\n        </div>\n        )\n    } else {\n        return <div className=\"mura-external-assets\"/>;\n    }\n  }\n  \n  export default ExternalAssets;","import React from \"react\";\nimport {  setIsEditMode  } from \"@murasoftware/next-core\";\n\nconst EditLayout = ({children}) => {\n  \n    setIsEditMode(true);\n\n    return (\n        <div>\n            {children}\n            <div id=\"htmlqueues\" />\n        </div>\n    )\n}\n\nexport default EditLayout;","import React from 'react';\n\nfunction Styles(props) {\n  const { moduleStyleData } = props;\n\n  if (typeof moduleStyleData !== 'undefined') {\n    return (\n      <>\n        {Object.keys(moduleStyleData).map(instanceid => {\n          const rules = moduleStyleData[instanceid];\n          if(!rules.isEditMode){\n          return (\n            <style\n              id={rules.id}\n              key={rules.id}\n              dangerouslySetInnerHTML={{ __html: rules.cssRules.join('\\n') }}\n             />\n          );\n          } else {\n            return '';\n          }\n        })}\n      </>\n    );\n  } \n  // console.log(\"DYN IS NOT ARRAY: \");\n  return <></>;\n  \n}\n\nexport default Styles;\n","import React, { useEffect } from 'react';\nimport Mura from 'mura.js';\nimport MuraStyles from './Styles';\nimport MuraExternalAssets from './ExternalAssets';\nimport {getMura} from './Connector';\n\n\nconst MainLayout = props => {\n  const { content, moduleStyleData, children } = props;\n\n  Mura.moduleStyleData = moduleStyleData;\n\n  useEffect(() => {\n    contentDidChange(content);\n  });\n\n  return (\n    <div>\n      {children}  \n      <MuraExternalAssets {...props}/>\n      <MuraStyles {...props} />\n    </div>\n  );\n};\n\nfunction contentDidChange(_content) {\n  const content = Mura.getEntity('content').set(_content);\n\n  getMura();\n\n  if (content.get('redirect')) {\n    \n    if(Mura.editroute){\n      const pathArray=window.location.pathname.split('/').filter((item)=>{\n        if(item){\n          return true;\n        }\n      });\n      let isEditMode=(pathArray.length && '/' + pathArray[0]==Mura.editroute);\n      //console.log(isEditMode, pathArray,Mura.editroute, content.get('redirect').indexOf('lockdown'))\n      /*\n        If site is returning a lockdown redirect check if it's \n        and edit route first.  If it's not then redirect to the dynamic edit\n        route so that it can get the dynamic content\n      */\n\n      if(!isEditMode && content.get('redirect').indexOf('lockdown')){\n        let editroute=\"\";\n\n        if(pathArray.length){\n          editroute=\"/edit/\" +  pathArray.join(\"/\") + \"/\";\n          console.log('Redirecting to edit route',editroute)\n          location.href = editroute;\n        } else {\n          editroute=\"/edit/\";\n          console.log('Redirecting to edit route',editroute)\n          location.href = editroute;\n        }   \n      } else {\n        console.log('Redirecting', content.get('redirect'))\n        location.href = content.get('redirect');\n      }\n    } else {\n      console.log('Redirecting', content.get('redirect'))\n      //location.href = content.get('redirect');\n    }\n\n    return;\n  }\n\n  //Remove pre-existing container\n  const remoteFooter=Mura('#mura-remote-footer');\n\n  if(remoteFooter.length){\n      remoteFooter.remove();\n  }\n\n  if (typeof Mura.deInitLayoutManager !== 'undefined') {\n    Mura.deInitLayoutManager();\n  }\n\n  Mura('html,body').attr('class', '');\n\n  setTimeout(() => {\n    // Ensure edit classes are removed\n    if (typeof MuraInlineEditor === 'undefined') {\n      Mura('html,body').attr('class', '');\n    }\n\n    // If edit route this will exist\n    const htmlQueueContainerInner = Mura('#htmlqueues');\n    if (htmlQueueContainerInner.length) {\n      Mura('#htmlqueues').html(\n        content.get('htmlheadqueue') + content.get('htmlfootqueue'),\n      );\n    }\n\n    Mura.init(Mura.extend({ queueObjects: false, content }));\n    Mura.holdReady(false);\n\n    //This will happen on static route (IE not edit route)\n    if (!htmlQueueContainerInner.length && Mura.variations) {\n      Mura.loader().loadjs(Mura.rootpath + \"/core/modules/v1/core_assets/js/variation.js?siteid=\" + Mura.siteid + '&cacheid=' + Math.random())\n    }\n    if(Mura.MXP){\n      Mura.loader().loadjs(Mura.rootpath + \"/plugins/MXP/remote/native/?siteid=\" + Mura.siteid + \"&contenthistid=\" + Mura.contenthistid + \"&contentid=\" + Mura.contentid + \"&cacheid=\" + Math.random());\n    }\n  },5);\n  \n}\n\nexport default MainLayout;\n"],"names":["getModuleProps","item","moduleStyleData","isEditMode","content","styleData","Mura","recordModuleStyles","cssRules","targets","id","instanceid","stylesupport","getMura","objectkey","object","ComponentRegistry","firstToUpperCase","items","Array","isArray","JSON","parse","e","containerIdx","containerItem","createUUID","SSR","getDynamicProps","dynamicProps","console","log","getRegionProps","displayregions","regions","Object","values","regionIdx","region","local","itemIdx","inherited","itemdIx","renderContent","context","params","query","browser","getQueryStringParams","isEditRoute","filename","page","length","connectorConfig","siteid","shift","join","assign","renderFilename","then","rendered","getEntity","set","title","menutitle","body","contentid","isnew","type","subtype","contenthistid","primarycontent","require","muraConfig","ConnectorConfig","ExternalModules","MuraJSRefPlaceholder","setIsEditMode","value","getIsEditMode","initConnector","config","getMuraConfig","useAsync","asyncFn","onSuccess","useEffect","isMounted","data","getHref","path","split","filter","siteidinurls","getComponent","ComponentVariable","component","React","objectname","getMuraPaths","paths","pathList","map","unshift","siteids","index","getFeed","maxItems","itemsPerPage","sort","getQuery","renderMode","concat","getAll","push","startingsiteid","find","ishomepage","location","pathname","editroute","clearMuraAPICache","apiEndpoint","apiendpoint","res","response","request","req","init","holdReady","getRootPath","rootpath","getSiteName","sitename","getMuraProps","muraObject","_request","props","externalModules","codeblocks","revalidate","header","bodystart","footer","where","prop","isEQ","codeCollection","forEach","placement","get","toLowerCase","Decorator","label","labeltag","children","domObject","className","domContent","domMeta","domMetaWrapper","isExternalModule","objectKey","isSSR","ssr","keys","key","restrictedkey","stringify","$class","metawrapper","meta","html","__html","Meta","dommeta","dommetawrapper","LabelHeader","EditContext","createContext","MuraContext","DisplayRegionSection","section","out","name","toUpperCase","regionid","display","regionName","DisplayRegion","obj","MuraDecorator","ExternalAssets","module","js","css","EditLayout","Styles","rules","MainLayout","contentDidChange","MuraExternalAssets","MuraStyles","_content","pathArray","window","indexOf","href","remoteFooter","remove","deInitLayoutManager","attr","setTimeout","MuraInlineEditor","htmlQueueContainerInner","extend","queueObjects","variations","loader","loadjs","Math","random","MXP"],"mappings":"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"}