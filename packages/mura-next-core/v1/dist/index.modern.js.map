{"version":3,"file":"index.modern.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/Connector.js","../src/Decorator.js","../src/GlobalContext.js","../src/DisplayRegion.js","../src/ExternalAssets.js","../src/EditLayout.js","../src/Styles.js","../src/MainLayout.js"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","/* eslint-disable */\nimport React, {useEffect} from 'react';\nimport Mura from 'mura.js';\n\nrequire('mura.js/src/core/stylemap-static');\n\nlet muraConfig, connectorConfig, ComponentRegistry, ConnectorConfig, ExternalModules;\nlet isEditMode=false;\n\nexport const MuraJSRefPlaceholder = '\"undefined\"!=typeof window&&function(u){u.queuedMuraCmds=[],u.queuedMuraPreInitCmds=[],\"function\"!=typeof u.Mura&&(u.Mura=u.mura=u.Mura=function(e){u.queuedMuraCmds.push(e)},u.Mura.preInit=function(e){u.queuedMuraPreInitCmds.push(e)})}(window);';\n\nexport const setIsEditMode = function (value) {\n  isEditMode=value;\n}\n\nexport const getIsEditMode = function() {\n  return isEditMode;\n}\n\nexport const setMuraConfig = function(config) {\n  muraConfig = config;\n  ComponentRegistry = config.ComponentRegistry;\n  ConnectorConfig = config.ConnectorConfig;\n  ExternalModules = config.ExternalModules;\n  connectorConfig=Object.assign({processMarkup:false},ConnectorConfig);\n}\n\nexport const getMuraConfig = function() {\n  return muraConfig;\n}\n\nexport const useAsync =  (asyncFn, onSuccess) => {\n  useEffect(() => {\n    let isMounted = true;\n    asyncFn().then(data => {\n      if (isMounted) onSuccess(data);\n    });\n    return () => { isMounted = false };\n  }, [asyncFn, onSuccess]);\n}\n\nexport const getHref = function(filename) {\n  let path=filename.split('/').filter(item => item.length);\n  \n  if(connectorConfig.siteidinurls){\n    return '/' + Mura.siteid + '/' + path.join('/');\n  } else {\n    return '/' + path.join('/');\n  }\n}\n\nexport const getComponent = function(item) {\n  getMura();\n\n  let objectkey = item.object;\n  \n  if (typeof ComponentRegistry[objectkey] == 'undefined'){\n      objectkey = Mura.firstToUpperCase(item.object);\n  }\n\n  if (typeof ComponentRegistry[objectkey] != 'undefined') {\n    const ComponentVariable = ComponentRegistry[objectkey].component;\n    return <ComponentVariable key={item.instanceid} {...item} />;\n  }\n\n  return <p key={item.instanceid}>DisplayRegion: {item.objectname}</p>;\n};\n\nexport const getMuraPaths = async function() {\n  \n  let siteids=ConnectorConfig.siteid;\n  let pathList=[];\n\n  if(!Array.isArray(siteids)){\n    siteids=siteids.split();\n  }\n\n  for (let index = 0; index < siteids.length; index++) {\n    getMura(siteids[index]);\n    const items=await Mura.getFeed('content')\n    .maxItems(0)\n    .itemsPerPage(0)\n    .sort('orderno')\n    .where().prop('type').isNotIn('File,Link,Calendar')\n    .getQuery({renderMode:'static'});\n    pathList=pathList.concat(items.getAll().items);\n    pathList.push({ \n      siteid:siteids[index],\n      filename: \"\" \n    });\n  }\n\n  const paths = pathList\n    .map(item => {\n      let page=[];\n      if(item.filename){\n        page=item.filename.split('/');\n      }\n      page.unshift(item.siteid);\n      console.log(item.filename,page)\n      return { params: { page: page } };\n    })\n    .filter(function(item) {\n      return (item.params.page.length || item.params.page[0]);\n    });\n\n  return paths;\n};\n\nexport const getMuraExternalModules = function() {\n  return ExternalModules;\n}\n\nexport const getMura = function(context){\n  const startingsiteid=Mura.siteid;\n  \n  if(typeof context == 'string'\n    && ConnectorConfig.siteid.find((item)=>{\n      return (item===context)\n      })\n  ){\n   \n    connectorConfig.siteid=context;\n  \n  } else {\n\n    const ishomepage=(\n      (context && !(context.params && context.params.page)) \n      || (typeof location != 'undefined' \n        && (\n          location.pathname==\"/\"\n          || location.pathname==(ConnectorConfig.editroute + \"/\")\n        )\n      )\n    );\n  \n    if(Array.isArray(ConnectorConfig.siteid)){\n      if(ishomepage){\n        connectorConfig.siteid=ConnectorConfig.siteid[0];\n      } else {\n        let page=[];\n        if(context && context.params && context.params.page){\n          page=[...context.params.page];\n          page=page.filter(item => item.length);\n        } else if (typeof location != 'undefined'){\n          page=location.pathname.split(\"/\");\n          page=page.filter(item => item.length);\n          if(page.length \n            && ConnectorConfig.editroute\n            && page[0]===ConnectorConfig.editroute.split(\"/\")[1]\n          ){\n            page.shift();\n          }\n        } \n      \n        if(page.length){\n          if(ConnectorConfig.siteid.find((item)=>{\n            return (item===page[0])\n            })\n          ){\n            connectorConfig.siteid=page[0];\n            connectorConfig.siteidinurls=true;\n          } else {\n            connectorConfig.siteid=ConnectorConfig.siteid[0];\n          }\n        } \n      }\n    }\n   \n  }\n\n  const clearMuraAPICache = function(){\n    delete connectorConfig.apiEndpoint;\n    delete connectorConfig.apiendpoint;\n    delete Mura.apiEndpoint;\n    delete Mura.apiendpoint;\n  };\n\n  if (context && context.res) {\n    Object.assign(connectorConfig,\n      { \n        response: context.res,\n        request: context.req\n      }\n    );\n    clearMuraAPICache();\n    //console.log('initing', connectorConfig.siteid)\n    Mura.init(connectorConfig);\n  } else if (startingsiteid != connectorConfig.siteid) {\n    //console.log('changing siteid',startingsiteid,connectorConfig.siteid)\n    clearMuraAPICache();\n    Mura.init(connectorConfig);\n  }\n \n  Mura.holdReady(true);\n\n  return Mura;\n};\n\nexport const getRootPath = () => {\n  return getMura().rootpath;\n};\n\nexport const getSiteName = () => {\n  return getMura().sitename;\n};\n\nexport const getMuraProps = async (context,isEditMode,params,callback) => {\n  getMura(context);\n  setIsEditMode(isEditMode);\n  \n  Mura.renderMode='dynamic';\n\n  if(!isEditMode){\n    Mura.renderMode='static';\n    if(Mura.isInNode()\n      && process \n      && process.env\n      && process.env.MURA_SSR_BASICTOKEN){\n        Mura.setRequestHeader(\"Authorization\",\"Basic \" + process.env.MURA_SSR_BASICTOKEN);\n        Mura.setMode(\"rest\");\n        Mura.setAPIEndpoint(Mura.getAPIEndpoint().replace('/json/', '/rest/'));\n    }\n  }\n\n  const requestContext=Mura.getRequestContext();\n\n  let content={\n    title: \"We're sorry, an error occurred\",\n    menutitle: \"We're sorry, an error occurred\",\n    body: \"\",\n    contentid: Mura.createUUID(),\n    isnew: 1,\n    siteid: Mura.siteid,\n    type: 'Page',\n    subtype: 'Default',\n    contentid: Mura.createUUID(),\n    contenthistid: Mura.createUUID(),\n    filename: \"500\",\n    statusCode:500,\n    errors:[],\n    displayregions:{\n      primarycontent:{\n        local:{\n          items:[]\n        }\n      }\n    }\n  };\n\n  try {\n    const muraObject = await renderContent(context,isEditMode,params,requestContext);\n    if(typeof muraObject != 'undefined' \n      && typeof muraObject.getAll != 'undefined'){\n      content = muraObject.getAll();\n    } else {\n      console.error('Error rendering content',muraObject);\n      if(typeof context.res != 'undefined'){\n        if(typeof muraObject != 'undefined' && typeof muraObject.statusCode != 'undefined'){\n          context.res.statusCode=muraObject.statusCode;\n        } else {\n          context.res.statusCode=500;\n        }\n      }\n    }\n  } catch (e){\n    console.error(e);\n  }\n\n  if(content.filename == '404'){\n    if(typeof context.params != 'undefined'){\n      console.error('404 rendering content',context.params);\n    }\n    if(typeof context.res != 'undefined'){\n      context.res.statusCode=404;\n    }\n  }\n\n  if (typeof content.isondisplay != 'undefined' && !content.isondisplay){\n    context.res.statusCode = 404;\n  } else {\n    if(content.redirect){\n      //match casing of nodeProxyRedirectCasing in mura.js\n      context.res.setHeader('Location',content.redirect);\n      if(content.statuscode){\n        context.res.statusCode = content.statuscode;\n      } else {\n        context.res.statusCode = 301;\n      }\n      if(context.res.statusCode!=301){\n        context.res.setHeader('Cache-Control','no-cache, no-store');\n        context.res.setHeader('Expires','Mon, 01 Jan 1990 00:00:00 GMT');\n      }\n    }\n  }\n\n  let queryParams={};\n\n  if (context.browser) {\n    queryParams = Mura.getQueryStringParams();\n  } else if (context.query) {\n    queryParams = {...context.query};\n  }\n\n  const moduleStyleData = await getRegionProps(content,queryParams,isEditMode,requestContext);\n\n  const codeblocks={\n    header:[],\n    bodystart:[],\n    footer:[]\n  };\n\n  try {\n    if(connectorConfig.codeblocks \n      && (context.res || context.browser)\n      && !(queryParams.codeblocks && queryParams.codeblocks===\"false\")  \n    ){\n      const codeCollection=await requestContext.getFeed('codeblock')\n        .where().prop('active').isEQ(1).getQuery();\n      \n      codeCollection.forEach((item)=>{\n        const placement=item.get('placement').toLowerCase();\n      \n        if(placement=='header'){\n          codeblocks.header.push(item.get('code'));\n        } else if (placement=='footer'){\n          codeblocks.footer.push(item.get('code'));\n        } else if (placement=='bodystart'){\n          codeblocks.bodystart.push(item.get('code'));\n        }\n      });\n    }\n  } catch(e){console.error(e)}\n\n  const props = {\n    content: content,\n    moduleStyleData: moduleStyleData,\n    externalModules: ExternalModules,\n    codeblocks: codeblocks,\n    queryParams : queryParams\n  };\n\n  if(typeof callback == 'function'){\n    await callback(callback);\n  }\n\n  if(Mura.isInNode() && (typeof callback =='undefined' || typeof callback == 'boolean' && callback)){\n    Mura.deInit();\n  }\n\n  if(isEditMode){\n    return {\n      props\n    };\n\n  } else {\n    return {\n      props,\n      revalidate:1\n    };\n  }\n};\n\nasync function renderContent(context,isEditMode,params,requestContext) {\n\n  let query = {};\n\n  if (context.browser) {\n    query = Mura.getQueryStringParams();\n  } else if (context.query) {\n    query = {...context.query};\n  }\n\n  if(isEditMode){\n    query.isEditRoute=isEditMode;\n  }\n\n  let filename = '';\n\n  if (context.params && context.params.page) {\n    filename = [...context.params.page];\n  }\n\n  if(Array.isArray(filename)){\n    if(filename.length && filename[0]==connectorConfig.siteid){\n      filename.shift();\n    }\n    filename=filename.join(\"/\");\n  }\n  \n  //console.log(filename,query,isEditMode)\n  query=Object.assign(query,params);\n\n  return await requestContext.renderFilename(filename, query).then(\n    async rendered => {\n      return rendered;\n    },\n    async rendered => {\n        return rendered;\n    }\n  );\n}\n\n\n\nasync function getRegionProps(content,queryParams,isEditMode,requestContext) {\n  getMura();\n  let moduleStyleData = {};\n\n  content.displayregions=content.displayregions || {};\n  \n  const regions=Object.values(content.displayregions);\n\n  for(const regionIdx in regions){\n   const region=regions[regionIdx]; \n    if (\n      typeof region.inherited != 'undefined' &&\n      Array.isArray(region.inherited.items)\n    ) {\n      for(const itemdIx in region.inherited.items){\n        const item=region.inherited.items[itemdIx];\n        item.instanceid = item.instanceid || Mura.createUUID();\n        moduleStyleData[item.instanceid] = await getModuleProps(\n          item,\n          moduleStyleData,\n          isEditMode,\n          content,\n          queryParams,\n          requestContext\n        );\n      }\n    }\n   \n    for(const itemIdx in region.local.items){\n      const item=region.local.items[itemIdx];\n      item.instanceid = item.instanceid || Mura.createUUID();\n      moduleStyleData[item.instanceid] = await getModuleProps(\n        item,\n        moduleStyleData,\n        isEditMode,\n        content,\n        queryParams,\n        requestContext\n      );\n    }\n\n  }\n\n  return moduleStyleData;\n}\n\nasync function getModuleProps(item,moduleStyleData,isEditMode,content,queryParams,requestContext) {\n  getMura();\n\n  try{\n\n    let objectkey = item.object;\n   \n    if (typeof ComponentRegistry[objectkey] == 'undefined'){\n       objectkey = Mura.firstToUpperCase(item.object);\n    }\n\n    if (typeof ComponentRegistry[objectkey] != 'undefined') {\n     \n      if(ComponentRegistry[objectkey].SSR){\n        try {\n          item.dynamicProps = await ComponentRegistry[objectkey].getDynamicProps({...item,content,queryParams,requestContext});\n        } catch(e){\n          console.error('Error getting dynamicProps',e);\n          item.dynamicProps={};\n        }\n      }\n\n      if (item.object == 'container') {\n        if (\n          typeof item.items != 'undefined' &&\n          !Array.isArray(item.items)\n        ) {\n          try {\n            item.items = JSON.parse(item.items);\n          } catch (e) {\n            item.items = [];\n          }\n        }\n        for(const containerIdx in item.items){\n          const containerItem=item.items[containerIdx];\n          containerItem.instanceid = containerItem.instanceid || Mura.createUUID();\n          moduleStyleData[containerItem.instanceid] = await getModuleProps(\n            containerItem,\n            moduleStyleData,\n            isEditMode,\n            content,\n            queryParams,\n            requestContext\n          );\n        }\n      }\n    }\n  } catch(e){\n    console.error(e);\n  }\n\n  if(isEditMode || !Mura.isInNode()){\n    return {\n      cssRules:[]\n    };\n  } else {\n    const styleData=Mura.recordModuleStyles(item);\n    delete styleData.deleteRule;\n    delete styleData.insertRule;\n    \n    return  styleData;\n      \n  }\n   \n}\n","import React, { useEffect,useState } from 'react';\nimport { getMura ,getIsEditMode, getMuraConfig } from './Connector';\n\nfunction Decorator(props) {\n  const Mura= getMura();\n  const muraConfig = getMuraConfig();\n  const { ComponentRegistry, ExternalModules } = muraConfig;\n  const { label, instanceid, labeltag, children } = props;\n \n  let isEditMode = getIsEditMode();\n  const [mounted,setMounted]=useState(false);\n  \n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n    /*\n      The idea here is to write the style object of the default XL view to the target objects.\n      The helps the initial paint to browser. \n      However, since it's not responsive it needs to be taken out.\n    */\n\n  let objectStyles={};\n  let metaStyles={};\n  let contentStyles={};\n\n  if(!mounted && isEditMode && typeof props.stylesupport == 'object' && Object.keys(props.stylesupport).length){\n    const getModuleTargetStyles = (incoming)=>{\n      const styles={};\n      const invalid={\n        backgroundimage:true\n      };\n  \n      Object.keys(incoming).forEach((key)=>{\n        if(!invalid[key]){\n          if(Mura.styleMap.tojs[key]){\n            styles[Mura.styleMap.tojs[key]]=incoming[key];\n          } else {\n            styles[key]=incoming[key];\n          }\n        }\n      })\n  \n      return styles;\n    };\n  \n    objectStyles=(props?.stylesupport?.objectstyles) ? getModuleTargetStyles(props.stylesupport.objectstyles) : {};\n    metaStyles=(props?.stylesupport?.metastyles) ? getModuleTargetStyles(props.stylesupport.metastyles) : {};\n    contentStyles=(props?.stylesupport?.contentstyles) ? getModuleTargetStyles(props.stylesupport.contentstyles) : {};\n  \n    if(typeof document != 'undefined'){  \n\n      const params=Object.assign(\n        {},{\n          stylesupport:props.stylesupport,\n          instanceid:props.instanceid\n        }\n      );\n\n      const sheet=Mura.getStyleSheet('mura-styles-' + params.instanceid)\n      const styleTargets=Mura.getModuleStyleTargets(params.instanceid,false);\n\n      while (sheet.cssRules.length) {\n        sheet.deleteRule(0);\n      }\n\n      Mura.applyModuleStyles(params.stylesupport,styleTargets.object,sheet);\n      Mura.applyModuleCustomCSS(params.stylesupport,sheet,params.instanceid);\n      Mura.applyModuleStyles(params.stylesupport,styleTargets.meta,sheet);\n      Mura.applyModuleStyles(params.stylesupport,styleTargets.content,sheet);\n      \n    }\n  } \n\n  const domObject = {\n    className: 'mura-object mura-async-object',\n    'data-inited':true\n  };\n\n  const domContent = {\n    className: 'mura-object-content'\n  };\n\n  const domMeta={\n    className:\"mura-object-meta\"\n  }\n\n  const domMetaWrapper={\n    className:\"mura-object-meta-wrapper\"\n  }\n\n  //Proxied module are modules that will always be server side rendered\n  const isExternalModule=ExternalModules[props.object];\n\n  let objectKey = props.object;\n\n  if (typeof ComponentRegistry[objectKey] == 'undefined'){\n    objectKey = Mura.firstToUpperCase(props.object);\n  }\n\n  let isSSR=ComponentRegistry[objectKey] && (ComponentRegistry[objectKey].SSR || ComponentRegistry[objectKey].ssr);\n\n  if(typeof props.ssr != \"undefined\" && !props.ssr || typeof props.SSR != \"undefined\" && !props.SSR){\n    isSSR=false;\n  }\n\n  if (isEditMode || isExternalModule || !isSSR) {\n    Object.keys(props).forEach(key => {\n      if (\n        !['queryParams','Router', 'Link','html', 'content', 'children', 'isEditMode', 'renderMode','dynamicProps', 'moduleStyleData', 'regionContext', 'requestContext', 'Mura'].find(\n          restrictedkey => restrictedkey === key,\n        )\n      ) {\n        if (typeof props[key] === 'object') {\n          domObject[`data-${key}`] = JSON.stringify(props[key]);\n        } else if (\n          typeof props[key] !== 'undefined' &&\n          !(typeof props[key] === 'string' && props[key] === '')\n        ) {\n          domObject[`data-${key}`] = props[key];\n        }\n      }\n      if(typeof props[key] != 'undefined' && props[key]){\n        if (key === 'class') {\n          domObject.className += (domObject.className) ? ` ${props[key]}` : props[key];;\n        } else if (key === 'cssclass') {\n          domObject.className += (domObject.className) ? ` ${props[key]}` : props[key];\n        } else if (key === 'cssid') {\n          domObject.id = props[key];\n        } else if (key === 'contentcssclass') {\n          domContent.className +=  (domContent.className) ? ` ${props[key]}` : props[key];\n        } else if (key === 'contentcssid') {\n          domContent.id = props[key];\n        } else if (key === 'metacssclass') {\n          domMeta.className += (domMeta.className) ? ` ${props[key]}` : props[key];\n        } else if (key === 'metacssid') {\n          domMeta.id = props[key];\n        }\n      }\n    });\n    \n    if(domObject.className.split(' ').find($class => $class === 'constrain')){\n      domMetaWrapper.className += ' container';\n    }\n  } else {\n    domObject['data-instanceid'] = instanceid;\n    \n    domObject.className = `mura-object-${props.object}`;\n\n    if(typeof props.moduleStyleData != 'undefined' && typeof props.moduleStyleData[instanceid] != 'undefined'){\n      domObject.className +=\n        ` ${props.moduleStyleData[instanceid].targets.object.class}`;\n      domObject.id = props.moduleStyleData[props.instanceid].targets.object.id;\n      domContent.className =\n        props.moduleStyleData[props.instanceid].targets.content.class;\n      domContent.id = props.moduleStyleData[props.instanceid].targets.content.id;\n      domMetaWrapper.className =\n        props.moduleStyleData[props.instanceid].targets.metawrapper.class;\n      domMeta.className =\n        props.moduleStyleData[props.instanceid].targets.meta.class;\n      domMeta.id =\n        props.moduleStyleData[props.instanceid].targets.meta.id;\n    } else {\n      domObject.id = '';\n      domContent.id = '';\n      domMetaWrapper.className = '';\n      domMeta.className = '';\n      domMeta.id =';'\n    }\n\n    ['objectspacing','contentspacing','metaspacing'].forEach((key)=>{\n      if(typeof props[key] != 'undefined' && props[key] && props[key] != 'custom'){\n        domObject['data-' + key] = props[key];\n      }\n    });\n\n  }\n  \n  if(isExternalModule || !isSSR){\n    if(isExternalModule && props.html){\n      <div style={objectStyles} {...domObject}>\n        {label ? <eta styles={metaStyles} label={label} labeltag={labeltag} dommeta={domMeta} dommetawrapper={domMetaWrapper}/> : null}\n        {label ? <div className=\"mura-flex-break\" /> : null}\n        <div style={contentStyles} {...domContent} dangerouslySetInnerHTML={{__html:props.html}}></div>\n      </div>\n    } else {\n      return (\n        <div style={objectStyles} {...domObject}></div>\n      );\n    }\n  } else {\n    return (\n      <div style={objectStyles} {...domObject}>\n        {label ? <Meta styles={metaStyles} label={label} labeltag={labeltag} dommeta={domMeta} dommetawrapper={domMetaWrapper}/> : null}\n        {label ? <div className=\"mura-flex-break\" /> : null}\n        <div style={contentStyles} {...domContent}>{children}</div>\n      </div>\n    );\n  }\n  \n}\n\nconst Meta = ({ label, labeltag, dommeta, dommetawrapper, styles }) => {\n  const LabelHeader = labeltag ? `${labeltag}` : 'h2';\n  return (\n    <div {...dommetawrapper}>\n      <div style={styles} {...dommeta}>\n        <LabelHeader>{label}</LabelHeader>\n      </div>\n    </div>\n  );\n};\n\nexport default Decorator;","import { createContext } from 'react';\n\nexport const EditContext = createContext();\n\nexport const MuraContext = createContext();\n\nexport default {\n    EditContext,\n    MuraContext\n};","import React from 'react';\nimport { getIsEditMode, getComponent, getMura } from './Connector';\nimport Decorator from './Decorator';\n\nconst DisplayRegionSection = ({ children, region, section, isEditMode }) => {\n  let out = null;\n  if (typeof region.name !== 'undefined' && isEditMode) {\n    if (section === 'inherited' && region.inherited.items.length) {\n      out = (\n        <div className=\"mura-region-inherited\">\n          <div className=\"frontEndToolsModal mura\">\n            <span className=\"mura-edit-label mi-lock\">\n              {region.name.toUpperCase()}: Inherited\n            </span>\n          </div>\n          {children}\n        </div>\n      );\n    } if (section === 'local') {\n      out = (\n        <div className=\"mura-editable mura-inactive\">\n          <div\n            className=\"mura-region-local mura-inactive mura-editable-attribute\"\n            data-loose=\"false\"\n            data-regionid={region.regionid}\n            data-inited=\"false\"\n            data-perm=\"true\"\n          >\n            <label className=\"mura-editable-label\" style={{ display: 'none' }}>\n              {region.name.toUpperCase()}\n            </label>\n            {children}\n          </div>\n        </div>\n      );\n    }\n  } else {\n    const regionName = `mura-region-${  section}`;\n\n    out = <div className={regionName}>{children}</div>;\n  }\n  return out;\n};\n\nconst DisplayRegion = ({ region, moduleStyleData, content, context, queryParams }) => {\n  const isEditMode = getIsEditMode();\n  const requestContext=getMura().getRequestContext();\n\n  let inherited = '';\n// Mura inheritance, where modules are inherited from parent content\n  if (region.inherited && region.inherited.items.length) {\n    inherited = (\n      <DisplayRegionSection\n        region={region}\n        isEditMode={isEditMode}\n        section=\"inherited\"\n      >\n        {region.inherited.items.map(item => {\n          const obj = Object.assign({}, item);\n          obj.key = obj.instanceid;\n          obj.moduleStyleData = moduleStyleData;\n          obj.content = content;\n          obj.queryParams = queryParams;\n          obj.regionContext =  context;\n          obj.requestContext =  requestContext;\n          return <Decorator {...obj}>{getComponent(obj)}</Decorator>;\n        })}\n      </DisplayRegionSection>\n    );\n  }\n\n  return (\n    <div className=\"mura-region\" data-regionid={region.regionid}>\n      {inherited}\n      <DisplayRegionSection\n        region={region}\n        isEditMode={isEditMode}\n        section=\"local\"\n      >\n        {region.local.items.map(item => {\n          const obj = Object.assign({}, item);\n          obj.key = obj.instanceid;\n          obj.moduleStyleData = moduleStyleData;\n          obj.content = content;\n          obj.queryParams = queryParams;\n          obj.regionContext =  context;\n          obj.requestContext =  requestContext;\n          return <Decorator {...obj}>{getComponent(obj)}</Decorator>;\n        })}\n      </DisplayRegionSection>\n    </div>\n  );\n};\n\nexport default DisplayRegion;\n","import React from 'react';\n\nfunction ExternalAssets(props) {\n    const { externalModules } = props;\n    if (typeof externalModules !== 'undefined') {\n       return (\n         <div className=\"mura-external-assets\">\n            {Object.keys(externalModules).map(key => {\n                const module = externalModules[key];\n                if(module.js && Array.isArray(module.js)){\n                    return (\n                        module.js.map((item)=>{\n                            return  (\n                                <script key={item} src={item} defer></script>\n                            );\n                        })\n                    )\n                } \n            })}\n            {Object.keys(externalModules).map(key => {\n                const module = externalModules[key];\n                if(module.css && Array.isArray(module.css)){\n                    return (\n                        module.css.map((item)=>{\n                            return  (\n                                <link key={item} rel=\"stylesheet\" href={item}/>\n                            );\n                        })\n                    )\n                } \n            })}\n        </div>\n        )\n    } else {\n        return <div className=\"mura-external-assets\"/>;\n    }\n  }\n  \n  export default ExternalAssets;","import React from \"react\";\nimport {  setIsEditMode  } from \"./Connector\";\n\nconst EditLayout = ({children}) => {\n  \n    setIsEditMode(true);\n\n    return (\n        <div>\n            {children}\n            <div id=\"htmlqueues\" />\n        </div>\n    )\n}\n\nexport default EditLayout;","import React from 'react';\nimport { getIsEditMode } from './Connector';\n\nfunction Styles(props) {\n  const { moduleStyleData } = props;\n\n  if (!getIsEditMode() && typeof moduleStyleData !== 'undefined') {\n    return (\n      <>\n        {Object.keys(moduleStyleData).map(instanceid => {\n          const rules = moduleStyleData[instanceid];\n          const id=`mura-styles-${instanceid}`;\n          return (\n            <style\n              id={id}\n              key={id}\n              dangerouslySetInnerHTML={{ __html: rules.cssRules.join('\\n') }}\n             />\n          );\n        })}\n      </>\n    );\n  } \n  // console.log(\"DYN IS NOT ARRAY: \");\n  return <></>;\n  \n}\n\nexport default Styles;\n","import React, { useEffect } from 'react';\nimport MuraStyles from './Styles';\nimport MuraExternalAssets from './ExternalAssets';\nimport { getMura } from './Connector';\nimport Mura from 'mura.js';\n\n\nconst MainLayout = props => {\n  const Mura= getMura();\n  const { content, moduleStyleData, children } = props;\n\n  Mura.moduleStyleData = moduleStyleData;\n\n  useEffect(() => {\n    contentDidChange(content);\n  },[content.contenthistid]);\n\n  return (\n    <div>\n      {children}  \n      <MuraExternalAssets {...props}/>\n      <MuraStyles {...props} />\n    </div>\n  );\n};\n\nfunction contentDidChange(_content) {\n  const content = Mura.getEntity('content').set(_content);\n\n  getMura();\n\n  if (content.get('redirect')) {\n    \n    if(Mura.editroute){\n      const pathArray=window.location.pathname.split('/').filter((item)=>{\n        if(item){\n          return true;\n        }\n      });\n      let isEditMode=(pathArray.length && '/' + pathArray[0]==Mura.editroute);\n      //console.log(isEditMode, pathArray,Mura.editroute, content.get('redirect').indexOf('lockdown'))\n      /*\n        If site is returning a lockdown redirect check if it's \n        and edit route first.  If it's not then redirect to the dynamic edit\n        route so that it can get the dynamic content\n      */\n\n      if(!isEditMode && content.get('redirect').indexOf('lockdown')){\n        let editroute=\"\";\n\n        if(pathArray.length){\n          editroute=\"/edit/\" +  pathArray.join(\"/\") + \"/\";\n          console.log('Redirecting to edit route',editroute)\n          location.href = editroute;\n        } else {\n          editroute=\"/edit/\";\n          console.log('Redirecting to edit route',editroute)\n          location.href = editroute;\n        }   \n      } else {\n        console.log('Redirecting', content.get('redirect'))\n        location.href = content.get('redirect');\n      }\n    } else {\n      console.log('Redirecting', content.get('redirect'))\n      location.href = content.get('redirect');\n    }\n\n    return;\n  }\n\n  //Remove pre-existing container\n  Mura('#mura-remote-footer, .mura-cta, [data-transient=\"true\"]').remove();\n\n  if (typeof Mura.deInitLayoutManager !== 'undefined') {\n    Mura.deInitLayoutManager();\n  }\n\n  Mura('html,body').attr('class', '');\n\n  setTimeout(() => {\n    // Ensure edit classes are removed\n    if (typeof MuraInlineEditor === 'undefined') {\n      Mura('html,body').attr('class', '');\n    }\n\n    // If edit route this will exist\n    const htmlQueueContainerInner = Mura('#htmlqueues');\n    if (htmlQueueContainerInner.length) {\n      Mura('#htmlqueues').html(\n        content.get('htmlheadqueue') + content.get('htmlfootqueue'),\n      );\n    }\n\n    /*\n      processMarkup is set to an empty string so that it doesn't actually select anything on init\n      With this framework display object know how to process themselves. Mura.js is only use to add new ones\n    */\n    Mura.init(Mura.extend({ processMarkup:true,queueObjects: false, content }));\n\n    Mura.holdReady(false);\n\n    //This will happen on static route (IE not edit route)\n    if (!htmlQueueContainerInner.length && Mura.variations) {\n      Mura.loader().loadjs(Mura.rootpath + \"/core/modules/v1/core_assets/js/variation.js?siteid=\" + Mura.siteid + '&cacheid=' + Math.random())\n    }\n    if(Mura.MXP){\n      if(Mura.MXPTracking==='basic'){\n        Mura.loader().loadjs(Mura.rootpath + \"/plugins/MXP/remote/basic/?siteid=\" + Mura.siteid + \"&contenthistid=\" + Mura.contenthistid + \"&contentid=\" + Mura.contentid + \"&cacheid=\" + Math.random());\n      } else {\n        Mura.loader().loadjs(Mura.rootpath + \"/plugins/MXP/remote/native/?siteid=\" + Mura.siteid + \"&contenthistid=\" + Mura.contenthistid + \"&contentid=\" + Mura.contentid + \"&cacheid=\" + Math.random());\n      }\n    }\n  },5);\n  \n}\n\nexport default MainLayout;\n"],"names":["getModuleProps","item","moduleStyleData","isEditMode","content","queryParams","requestContext","Mura","isInNode","cssRules","styleData","recordModuleStyles","deleteRule","insertRule","getMura","objectkey","object","ComponentRegistry","firstToUpperCase","items","Array","isArray","JSON","parse","e","containerIdx","containerItem","instanceid","createUUID","SSR","getDynamicProps","dynamicProps","console","error","getRegionProps","displayregions","regions","Object","values","regionIdx","region","local","itemIdx","inherited","itemdIx","renderContent","context","params","query","browser","getQueryStringParams","isEditRoute","filename","page","length","connectorConfig","siteid","shift","join","assign","renderFilename","then","rendered","require","muraConfig","ConnectorConfig","ExternalModules","MuraJSRefPlaceholder","setIsEditMode","value","getIsEditMode","setMuraConfig","config","processMarkup","getMuraConfig","useAsync","asyncFn","onSuccess","useEffect","isMounted","data","getHref","path","split","filter","siteidinurls","getComponent","ComponentVariable","component","objectname","getMuraPaths","paths","pathList","map","unshift","log","siteids","index","getFeed","maxItems","itemsPerPage","sort","where","prop","isNotIn","getQuery","renderMode","concat","getAll","push","startingsiteid","find","ishomepage","location","pathname","editroute","clearMuraAPICache","apiEndpoint","apiendpoint","res","response","request","req","init","holdReady","getRootPath","rootpath","getSiteName","sitename","getMuraProps","callback","statusCode","isondisplay","redirect","setHeader","statuscode","deInit","props","revalidate","externalModules","codeblocks","header","bodystart","footer","isEQ","codeCollection","forEach","placement","get","toLowerCase","process","env","MURA_SSR_BASICTOKEN","setRequestHeader","setMode","setAPIEndpoint","getAPIEndpoint","replace","getRequestContext","title","menutitle","body","contentid","isnew","type","subtype","contenthistid","errors","primarycontent","muraObject","Decorator","label","labeltag","children","useState","mounted","setMounted","objectStyles","metaStyles","contentStyles","stylesupport","keys","getModuleTargetStyles","incoming","styles","invalid","backgroundimage","key","styleMap","tojs","objectstyles","metastyles","contentstyles","document","sheet","getStyleSheet","styleTargets","getModuleStyleTargets","applyModuleStyles","applyModuleCustomCSS","meta","domObject","className","domContent","domMeta","domMetaWrapper","isExternalModule","objectKey","isSSR","ssr","restrictedkey","stringify","id","$class","targets","class","metawrapper","html","__html","Meta","dommeta","dommetawrapper","LabelHeader","EditContext","createContext","MuraContext","DisplayRegionSection","section","out","name","toUpperCase","regionid","display","regionName","DisplayRegion","obj","regionContext","ExternalAssets","module","js","css","EditLayout","Styles","rules","MainLayout","contentDidChange","MuraExternalAssets","MuraStyles","_content","getEntity","set","pathArray","window","indexOf","href","remove","deInitLayoutManager","attr","setTimeout","MuraInlineEditor","htmlQueueContainerInner","extend","queueObjects","variations","loader","loadjs","Math","random","MXP","MXPTracking"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACO,MAAM,KAAK,gBAAgB,CAAC,WAAW;AAC9C,CAAC,SAAS,KAAK,GAAG,EAAE;AACpB,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,WAAW,EAAE,UAAU,EAAE;AAC1D,EAAE,MAAM,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;AAC7B,EAAE,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC;AACvB,EAAE,IAAI,KAAK,EAAE;AACb,GAAG,MAAM,QAAQ,GAAG,KAAK,GAAG,CAAC,GAAG,WAAW,GAAG,UAAU,CAAC;AACzD,GAAG,IAAI,QAAQ,EAAE;AACjB,IAAI,IAAI;AACR,KAAK,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1C,KAAK,CAAC,OAAO,CAAC,EAAE;AAChB,KAAK,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3B,KAAK;AACL,IAAI,OAAO,MAAM,CAAC;AAClB,IAAI,MAAM;AACV,IAAI,OAAO,IAAI,CAAC;AAChB,IAAI;AACJ,GAAG;AACH,EAAE,IAAI,CAAC,CAAC,GAAG,SAAS,KAAK,EAAE;AAC3B,GAAG,IAAI;AACP,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;AAC1B,IAAI,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE;AACrB,KAAK,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AAClE,KAAK,MAAM,IAAI,UAAU,EAAE;AAC3B,KAAK,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;AAC3C,KAAK,MAAM;AACX,KAAK,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;AAC/B,KAAK;AACL,IAAI,CAAC,OAAO,CAAC,EAAE;AACf,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC1B,IAAI;AACJ,GAAG,CAAC;AACJ,EAAE,OAAO,MAAM,CAAC;AAChB,GAAE;AACF,CAAC,OAAO,KAAK,CAAC;AACd,CAAC,GAAG,CAAC;AACL;AACA;AACO,SAAS,OAAO,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;AAC5C,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;AACd,EAAE,IAAI,KAAK,YAAY,KAAK,EAAE;AAC9B,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE;AAChB,IAAI,IAAI,KAAK,GAAG,CAAC,EAAE;AACnB,KAAK,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;AACrB,KAAK;AACL,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC;AACpB,IAAI,MAAM;AACV,IAAI,KAAK,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;AAC9C,IAAI,OAAO;AACX,IAAI;AACJ,GAAG;AACH,EAAE,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE;AAC3B,GAAG,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;AAC5E,GAAG,OAAO;AACV,GAAG;AACH,EAAE,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;AACjB,EAAE,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC;AACjB,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC;AAC1B,EAAE,IAAI,QAAQ,EAAE;AAChB,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;AAClB,GAAG;AACH,EAAE;AACF,CAAC;AACD;AACO,SAAS,cAAc,CAAC,QAAQ,EAAE;AACzC,CAAC,OAAO,QAAQ,YAAY,KAAK,IAAI,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;AACpD,CAAC;AA6CD;AACA;AACO,SAAS,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE;AAC3C,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC;AAC1B,CAAC,SAAS,MAAM,CAAC,MAAM,EAAE;AACzB,EAAE,IAAI;AACN,GAAG,OAAO,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,KAAK,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE,CAAC,EAAE;AACtD,IAAI,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB,IAAI,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE;AAC/B,KAAK,IAAI,cAAc,CAAC,MAAM,CAAC,EAAE;AACjC,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;AACxB,MAAM,MAAM;AACZ,MAAM,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,KAAK,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,GAAG,IAAI,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1F,MAAM,OAAO;AACb,MAAM;AACN,KAAK;AACL,IAAI;AACJ,GAAG,IAAI,IAAI,EAAE;AACb,IAAI,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;AAC7B,IAAI,MAAM;AACV,IAAI,IAAI,GAAG,MAAM,CAAC;AAClB,IAAI;AACJ,GAAG,CAAC,OAAO,CAAC,EAAE;AACd,GAAG,OAAO,CAAC,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/C,GAAG;AACH,EAAE;AACF,CAAC,MAAM,EAAE,CAAC;AACV,CAAC,OAAO,IAAI,CAAC;AACb,CAAC;AACD;AACA;AACA;AACO,SAAS,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE;AAC5C,CAAC,IAAI,IAAI,GAAG,EAAE,CAAC;AACf,CAAC,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;AACzB,EAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACjB,EAAE;AACF,CAAC,OAAO,MAAM,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AACnE,CAAC;AAaD;AACO,MAAM,eAAe,iBAAiB,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,YAAY,CAAC;AA4D/J;AACO,MAAM,oBAAoB,iBAAiB,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,aAAa,KAAK,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,sBAAsB,CAAC,CAAC,IAAI,iBAAiB,CAAC;AA+UxL;AACA;AACO,SAAS,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE;AACtC,CAAC,IAAI;AACL,EAAE,IAAI,MAAM,GAAG,IAAI,EAAE,CAAC;AACtB,EAAE,CAAC,MAAM,CAAC,EAAE;AACZ,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;AACpB,EAAE;AACF,CAAC,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE;AAC5B,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AACtC,EAAE;AACF,CAAC,OAAO,MAAM,CAAC;AACf;;ICzHeA,0BAAAA,eAAeC,MAAKC,iBAAgBC,YAAWC,SAAQC,aAAYC;MAAgB;AAAA;AAAA,UAmD7FH,UAAU,IAAI,CAACI,IAAI,CAACC,QAAL,EAnD8E;AAoD9F,eAAO;AACLC,UAAAA,QAAQ,EAAC;AADJ,SAAP;AApD8F;AAwD9F,YAAMC,SAAS,GAACH,IAAI,CAACI,kBAAL,CAAwBV,IAAxB,CAAhB;AACA,eAAOS,SAAS,CAACE,UAAjB;AACA,eAAOF,SAAS,CAACG,UAAjB;AAEA,eAAQH,SAAR;AA5D8F;AAAA;;AAChGI,IAAAA,OAAO;;AADyF,qCAG7F;AAED,UAAIC,SAAS,GAAGd,IAAI,CAACe,MAArB;;AAEA,UAAI,OAAOC,iBAAiB,CAACF,SAAD,CAAxB,IAAuC,WAA3C,EAAuD;AACpDA,QAAAA,SAAS,GAAGR,IAAI,CAACW,gBAAL,CAAsBjB,IAAI,CAACe,MAA3B,CAAZ;AACF;;AANA;AAAA,YAQG,OAAOC,iBAAiB,CAACF,SAAD,CAAxB,IAAuC,WAR1C;AAAA;AAAA;AAAA,kBAmBKd,IAAI,CAACe,MAAL,IAAe,WAnBpB;AAoBG,oBACE,OAAOf,IAAI,CAACkB,KAAZ,IAAqB,WAArB,IACA,CAACC,KAAK,CAACC,OAAN,CAAcpB,IAAI,CAACkB,KAAnB,CAFH,EAGE;AACA,sBAAI;AACFlB,oBAAAA,IAAI,CAACkB,KAAL,GAAaG,IAAI,CAACC,KAAL,CAAWtB,IAAI,CAACkB,KAAhB,CAAb;AACD,mBAFD,CAEE,OAAOK,CAAP,EAAU;AACVvB,oBAAAA,IAAI,CAACkB,KAAL,GAAa,EAAb;AACD;AACF;;AA7BJ,qCA8B6BlB,IAAI,CAACkB,KA9BlC,YA8BaM,YA9Bb,EA8BwC;AACnC,sBAAMC,aAAa,GAACzB,IAAI,CAACkB,KAAL,CAAWM,YAAX,CAApB;AACAC,kBAAAA,aAAa,CAACC,UAAd,GAA2BD,aAAa,CAACC,UAAd,IAA4BpB,IAAI,CAACqB,UAAL,EAAvD;AAFmC,yCAGe5B,cAAc,CAC9D0B,aAD8D,EAE9DxB,eAF8D,EAG9DC,UAH8D,EAI9DC,OAJ8D,EAK9DC,WAL8D,EAM9DC,cAN8D,CAH7B;AAGnCJ,oBAAAA,eAAe,CAACwB,aAAa,CAACC,UAAf,CAAf;AAHmC;AAWpC,iBAzCJ;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,gBAUIV,iBAAiB,CAACF,SAAD,CAAjB,CAA6Bc,GAVjC;AAAA,+CAWO;AAAA,uCACwBZ,iBAAiB,CAACF,SAAD,CAAjB,CAA6Be,eAA7B,cAAiD7B,IAAjD;AAAsDG,kBAAAA,OAAO,EAAPA,OAAtD;AAA8DC,kBAAAA,WAAW,EAAXA,WAA9D;AAA0EC,kBAAAA,cAAc,EAAdA;AAA1E,mBADxB;AACFL,kBAAAA,IAAI,CAAC8B,YAAL;AADE;AAEH,eAbJ,YAaWP,CAbX,EAaa;AACRQ,gBAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd,EAA2CT,CAA3C;AACAvB,gBAAAA,IAAI,CAAC8B,YAAL,GAAkB,EAAlB;AACD,eAhBJ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AA4CF,KA/C+F,YA+CxFP,CA/CwF,EA+CtF;AACRQ,MAAAA,OAAO,CAACC,KAAR,CAAcT,CAAd;AACD,KAjD+F;;AAAA;AAgEjG;;;;;IA9GcU,0BAAAA,eAAe9B,SAAQC,aAAYF,YAAWG;MAAgB;AAC3EQ,IAAAA,OAAO;AACP,QAAIZ,eAAe,GAAG,EAAtB;AAEAE,IAAAA,OAAO,CAAC+B,cAAR,GAAuB/B,OAAO,CAAC+B,cAAR,IAA0B,EAAjD;AAEA,QAAMC,OAAO,GAACC,MAAM,CAACC,MAAP,CAAclC,OAAO,CAAC+B,cAAtB,CAAd;;AAN2E,yBAQpDC,OARoD,YAQjEG,SARiE,EAQ5C;AAAA;AAAA,6BAoBRC,MAAM,CAACC,KAAP,CAAatB,KApBL,YAoBnBuB,OApBmB,EAoBW;AACtC,cAAMzC,IAAI,GAACuC,MAAM,CAACC,KAAP,CAAatB,KAAb,CAAmBuB,OAAnB,CAAX;AACAzC,UAAAA,IAAI,CAAC0B,UAAL,GAAkB1B,IAAI,CAAC0B,UAAL,IAAmBpB,IAAI,CAACqB,UAAL,EAArC;AAFsC,iCAGG5B,cAAc,CACrDC,IADqD,EAErDC,eAFqD,EAGrDC,UAHqD,EAIrDC,OAJqD,EAKrDC,WALqD,EAMrDC,cANqD,CAHjB;AAGtCJ,YAAAA,eAAe,CAACD,IAAI,CAAC0B,UAAN,CAAf;AAHsC;AAWvC,SA/B4B;;AAAA;AAAA;;AAC9B,UAAMa,MAAM,GAACJ,OAAO,CAACG,SAAD,CAApB;;AAD8B;AAAA,YAG3B,OAAOC,MAAM,CAACG,SAAd,IAA2B,WAA3B,IACAvB,KAAK,CAACC,OAAN,CAAcmB,MAAM,CAACG,SAAP,CAAiBxB,KAA/B,CAJ2B;AAAA,+BAMNqB,MAAM,CAACG,SAAP,CAAiBxB,KANX,YAMjByB,OANiB,EAMiB;AAC1C,gBAAM3C,IAAI,GAACuC,MAAM,CAACG,SAAP,CAAiBxB,KAAjB,CAAuByB,OAAvB,CAAX;AACA3C,YAAAA,IAAI,CAAC0B,UAAL,GAAkB1B,IAAI,CAAC0B,UAAL,IAAmBpB,IAAI,CAACqB,UAAL,EAArC;AAF0C,mCAGD5B,cAAc,CACrDC,IADqD,EAErDC,eAFqD,EAGrDC,UAHqD,EAIrDC,OAJqD,EAKrDC,WALqD,EAMrDC,cANqD,CAHb;AAG1CJ,cAAAA,eAAe,CAACD,IAAI,CAAC0B,UAAN,CAAf;AAH0C;AAW3C,WAjB0B;;AAAA;AAAA;AAAA;;AAAA;AAiC9B,KAzC0E;;AAAA;AA2C3E,aAAOzB,eAAP;AA3C2E,SA2CpEA,eA3CoE;AA4C5E;;;;;IAtFc2C,yBAAAA,cAAcC,SAAQ3C,YAAW4C,QAAOzC;MAAgB;AAErE,QAAI0C,KAAK,GAAG,EAAZ;;AAEA,QAAIF,OAAO,CAACG,OAAZ,EAAqB;AACnBD,MAAAA,KAAK,GAAGzC,IAAI,CAAC2C,oBAAL,EAAR;AACD,KAFD,MAEO,IAAIJ,OAAO,CAACE,KAAZ,EAAmB;AACxBA,MAAAA,KAAK,gBAAOF,OAAO,CAACE,KAAf,CAAL;AACD;;AAED,QAAG7C,UAAH,EAAc;AACZ6C,MAAAA,KAAK,CAACG,WAAN,GAAkBhD,UAAlB;AACD;;AAED,QAAIiD,QAAQ,GAAG,EAAf;;AAEA,QAAIN,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACC,MAAR,CAAeM,IAArC,EAA2C;AACzCD,MAAAA,QAAQ,aAAON,OAAO,CAACC,MAAR,CAAeM,IAAtB,CAAR;AACD;;AAED,QAAGjC,KAAK,CAACC,OAAN,CAAc+B,QAAd,CAAH,EAA2B;AACzB,UAAGA,QAAQ,CAACE,MAAT,IAAmBF,QAAQ,CAAC,CAAD,CAAR,IAAaG,eAAe,CAACC,MAAnD,EAA0D;AACxDJ,QAAAA,QAAQ,CAACK,KAAT;AACD;;AACDL,MAAAA,QAAQ,GAACA,QAAQ,CAACM,IAAT,CAAc,GAAd,CAAT;AACD;;AAGDV,IAAAA,KAAK,GAACX,MAAM,CAACsB,MAAP,CAAcX,KAAd,EAAoBD,MAApB,CAAN;AA5BqE,2BA8BxDzC,cAAc,CAACsD,cAAf,CAA8BR,QAA9B,EAAwCJ,KAAxC,EAA+Ca,IAA/C,WACLC,QADK,EACO;AAChB,6BAAOA,QAAP;AACD,KAHU,YAILA,QAJK,EAIO;AACd,6BAAOA,QAAP;AACH,KANU,CA9BwD;AAsCtE;;;;;AA7YDC,OAAO,CAAC,kCAAD,CAAP;;AAEA,IAAIC,UAAJ,EAAgBT,eAAhB,EAAiCtC,iBAAjC,EAAoDgD,eAApD,EAAqEC,eAArE;AACA,IAAI/D,UAAU,GAAC,KAAf;AAEA,IAAagE,oBAAoB,GAAG,sPAA7B;AAEP,IAAaC,aAAa,GAAG,SAAhBA,aAAgB,CAAUC,KAAV,EAAiB;AAC5ClE,EAAAA,UAAU,GAACkE,KAAX;AACD,CAFM;AAIP,IAAaC,aAAa,GAAG,SAAhBA,aAAgB,GAAW;AACtC,SAAOnE,UAAP;AACD,CAFM;AAIP,IAAaoE,aAAa,GAAG,SAAhBA,aAAgB,CAASC,MAAT,EAAiB;AAC5CR,EAAAA,UAAU,GAAGQ,MAAb;AACAvD,EAAAA,iBAAiB,GAAGuD,MAAM,CAACvD,iBAA3B;AACAgD,EAAAA,eAAe,GAAGO,MAAM,CAACP,eAAzB;AACAC,EAAAA,eAAe,GAAGM,MAAM,CAACN,eAAzB;AACAX,EAAAA,eAAe,GAAClB,MAAM,CAACsB,MAAP,CAAc;AAACc,IAAAA,aAAa,EAAC;AAAf,GAAd,EAAoCR,eAApC,CAAhB;AACD,CANM;AAQP,IAAaS,aAAa,GAAG,SAAhBA,aAAgB,GAAW;AACtC,SAAOV,UAAP;AACD,CAFM;AAIP,IAAaW,QAAQ,GAAI,SAAZA,QAAY,CAACC,OAAD,EAAUC,SAAV,EAAwB;AAC/CC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIC,SAAS,GAAG,IAAhB;AACAH,IAAAA,OAAO,GAAGf,IAAV,CAAe,UAAAmB,IAAI,EAAI;AACrB,UAAID,SAAJ,EAAeF,SAAS,CAACG,IAAD,CAAT;AAChB,KAFD;AAGA,WAAO,YAAM;AAAED,MAAAA,SAAS,GAAG,KAAZ;AAAmB,KAAlC;AACD,GANQ,EAMN,CAACH,OAAD,EAAUC,SAAV,CANM,CAAT;AAOD,CARM;AAUP,IAAaI,OAAO,GAAG,SAAVA,OAAU,CAAS7B,QAAT,EAAmB;AACxC,MAAI8B,IAAI,GAAC9B,QAAQ,CAAC+B,KAAT,CAAe,GAAf,EAAoBC,MAApB,CAA2B,UAAAnF,IAAI;AAAA,WAAIA,IAAI,CAACqD,MAAT;AAAA,GAA/B,CAAT;;AAEA,MAAGC,eAAe,CAAC8B,YAAnB,EAAgC;AAC9B,WAAO,MAAM9E,IAAI,CAACiD,MAAX,GAAoB,GAApB,GAA0B0B,IAAI,CAACxB,IAAL,CAAU,GAAV,CAAjC;AACD,GAFD,MAEO;AACL,WAAO,MAAMwB,IAAI,CAACxB,IAAL,CAAU,GAAV,CAAb;AACD;AACF,CARM;AAUP,IAAa4B,YAAY,GAAG,SAAfA,YAAe,CAASrF,IAAT,EAAe;AACzCa,EAAAA,OAAO;AAEP,MAAIC,SAAS,GAAGd,IAAI,CAACe,MAArB;;AAEA,MAAI,OAAOC,iBAAiB,CAACF,SAAD,CAAxB,IAAuC,WAA3C,EAAuD;AACnDA,IAAAA,SAAS,GAAGR,IAAI,CAACW,gBAAL,CAAsBjB,IAAI,CAACe,MAA3B,CAAZ;AACH;;AAED,MAAI,OAAOC,iBAAiB,CAACF,SAAD,CAAxB,IAAuC,WAA3C,EAAwD;AACtD,QAAMwE,iBAAiB,GAAGtE,iBAAiB,CAACF,SAAD,CAAjB,CAA6ByE,SAAvD;AACA,wBAAO,oBAAC,iBAAD;AAAmB,MAAA,GAAG,EAAEvF,IAAI,CAAC0B;AAA7B,OAA6C1B,IAA7C,EAAP;AACD;;AAED,sBAAO;AAAG,IAAA,GAAG,EAAEA,IAAI,CAAC0B;AAAb,wBAAyC1B,IAAI,CAACwF,UAA9C,CAAP;AACD,CAfM;AAiBP,IAAaC,YAAY,YAAZA,YAAY;AAAA,MAAoB;AAAA;AAwB3C,UAAMC,KAAK,GAAGC,QAAQ,CACnBC,GADW,CACP,UAAA5F,IAAI,EAAI;AACX,YAAIoD,IAAI,GAAC,EAAT;;AACA,YAAGpD,IAAI,CAACmD,QAAR,EAAiB;AACfC,UAAAA,IAAI,GAACpD,IAAI,CAACmD,QAAL,CAAc+B,KAAd,CAAoB,GAApB,CAAL;AACD;;AACD9B,QAAAA,IAAI,CAACyC,OAAL,CAAa7F,IAAI,CAACuD,MAAlB;AACAxB,QAAAA,OAAO,CAAC+D,GAAR,CAAY9F,IAAI,CAACmD,QAAjB,EAA0BC,IAA1B;AACA,eAAO;AAAEN,UAAAA,MAAM,EAAE;AAAEM,YAAAA,IAAI,EAAEA;AAAR;AAAV,SAAP;AACD,OATW,EAUX+B,MAVW,CAUJ,UAASnF,IAAT,EAAe;AACrB,eAAQA,IAAI,CAAC8C,MAAL,CAAYM,IAAZ,CAAiBC,MAAjB,IAA2BrD,IAAI,CAAC8C,MAAL,CAAYM,IAAZ,CAAiB,CAAjB,CAAnC;AACD,OAZW,CAAd;AAcA,aAAOsC,KAAP;AAtC2C;;AAE3C,QAAIK,OAAO,GAAC/B,eAAe,CAACT,MAA5B;AACA,QAAIoC,QAAQ,GAAC,EAAb;;AAEA,QAAG,CAACxE,KAAK,CAACC,OAAN,CAAc2E,OAAd,CAAJ,EAA2B;AACzBA,MAAAA,OAAO,GAACA,OAAO,CAACb,KAAR,EAAR;AACD;;AAP0C,wBASfa,OATe,YASlCC,KATkC,EASU;AACnDnF,MAAAA,OAAO,CAACkF,OAAO,CAACC,KAAD,CAAR,CAAP;AADmD,6BAEjC1F,IAAI,CAAC2F,OAAL,CAAa,SAAb,EACjBC,QADiB,CACR,CADQ,EAEjBC,YAFiB,CAEJ,CAFI,EAGjBC,IAHiB,CAGZ,SAHY,EAIjBC,KAJiB,GAITC,IAJS,CAIJ,MAJI,EAIIC,OAJJ,CAIY,oBAJZ,EAKjBC,QALiB,CAKR;AAACC,QAAAA,UAAU,EAAC;AAAZ,OALQ,CAFiC,iBAE7CvF,KAF6C;AAQnDyE,QAAAA,QAAQ,GAACA,QAAQ,CAACe,MAAT,CAAgBxF,KAAK,CAACyF,MAAN,GAAezF,KAA/B,CAAT;AACAyE,QAAAA,QAAQ,CAACiB,IAAT,CAAc;AACZrD,UAAAA,MAAM,EAACwC,OAAO,CAACC,KAAD,CADF;AAEZ7C,UAAAA,QAAQ,EAAE;AAFE,SAAd;AATmD;AAapD,KAtB0C;;AAAA;AAuC5C,GAvCwB;AAAA;AAAA;AAAA,CAAlB;AAyCP,IAIatC,OAAO,GAAG,SAAVA,OAAU,CAASgC,OAAT,EAAiB;AACtC,MAAMgE,cAAc,GAACvG,IAAI,CAACiD,MAA1B;;AAEA,MAAG,OAAOV,OAAP,IAAkB,QAAlB,IACEmB,eAAe,CAACT,MAAhB,CAAuBuD,IAAvB,CAA4B,UAAC9G,IAAD,EAAQ;AACrC,WAAQA,IAAI,KAAG6C,OAAf;AACC,GAFA,CADL,EAIC;AAECS,IAAAA,eAAe,CAACC,MAAhB,GAAuBV,OAAvB;AAED,GARD,MAQO;AAEL,QAAMkE,UAAU,GACblE,OAAO,IAAI,EAAEA,OAAO,CAACC,MAAR,IAAkBD,OAAO,CAACC,MAAR,CAAeM,IAAnC,CAAZ,IACI,OAAO4D,QAAP,IAAmB,WAAnB,KAEAA,QAAQ,CAACC,QAAT,IAAmB,GAAnB,IACGD,QAAQ,CAACC,QAAT,IAAoBjD,eAAe,CAACkD,SAAhB,GAA4B,GAHnD,CAFN;;AAUA,QAAG/F,KAAK,CAACC,OAAN,CAAc4C,eAAe,CAACT,MAA9B,CAAH,EAAyC;AACvC,UAAGwD,UAAH,EAAc;AACZzD,QAAAA,eAAe,CAACC,MAAhB,GAAuBS,eAAe,CAACT,MAAhB,CAAuB,CAAvB,CAAvB;AACD,OAFD,MAEO;AACL,YAAIH,IAAI,GAAC,EAAT;;AACA,YAAGP,OAAO,IAAIA,OAAO,CAACC,MAAnB,IAA6BD,OAAO,CAACC,MAAR,CAAeM,IAA/C,EAAoD;AAClDA,UAAAA,IAAI,aAAKP,OAAO,CAACC,MAAR,CAAeM,IAApB,CAAJ;AACAA,UAAAA,IAAI,GAACA,IAAI,CAAC+B,MAAL,CAAY,UAAAnF,IAAI;AAAA,mBAAIA,IAAI,CAACqD,MAAT;AAAA,WAAhB,CAAL;AACD,SAHD,MAGO,IAAI,OAAO2D,QAAP,IAAmB,WAAvB,EAAmC;AACxC5D,UAAAA,IAAI,GAAC4D,QAAQ,CAACC,QAAT,CAAkB/B,KAAlB,CAAwB,GAAxB,CAAL;AACA9B,UAAAA,IAAI,GAACA,IAAI,CAAC+B,MAAL,CAAY,UAAAnF,IAAI;AAAA,mBAAIA,IAAI,CAACqD,MAAT;AAAA,WAAhB,CAAL;;AACA,cAAGD,IAAI,CAACC,MAAL,IACEW,eAAe,CAACkD,SADlB,IAEE9D,IAAI,CAAC,CAAD,CAAJ,KAAUY,eAAe,CAACkD,SAAhB,CAA0BhC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAFf,EAGC;AACC9B,YAAAA,IAAI,CAACI,KAAL;AACD;AACF;;AAED,YAAGJ,IAAI,CAACC,MAAR,EAAe;AACb,cAAGW,eAAe,CAACT,MAAhB,CAAuBuD,IAAvB,CAA4B,UAAC9G,IAAD,EAAQ;AACrC,mBAAQA,IAAI,KAAGoD,IAAI,CAAC,CAAD,CAAnB;AACC,WAFA,CAAH,EAGC;AACCE,YAAAA,eAAe,CAACC,MAAhB,GAAuBH,IAAI,CAAC,CAAD,CAA3B;AACAE,YAAAA,eAAe,CAAC8B,YAAhB,GAA6B,IAA7B;AACD,WAND,MAMO;AACL9B,YAAAA,eAAe,CAACC,MAAhB,GAAuBS,eAAe,CAACT,MAAhB,CAAuB,CAAvB,CAAvB;AACD;AACF;AACF;AACF;AAEF;;AAED,MAAM4D,iBAAiB,GAAG,SAApBA,iBAAoB,GAAU;AAClC,WAAO7D,eAAe,CAAC8D,WAAvB;AACA,WAAO9D,eAAe,CAAC+D,WAAvB;AACA,WAAO/G,IAAI,CAAC8G,WAAZ;AACA,WAAO9G,IAAI,CAAC+G,WAAZ;AACD,GALD;;AAOA,MAAIxE,OAAO,IAAIA,OAAO,CAACyE,GAAvB,EAA4B;AAC1BlF,IAAAA,MAAM,CAACsB,MAAP,CAAcJ,eAAd,EACE;AACEiE,MAAAA,QAAQ,EAAE1E,OAAO,CAACyE,GADpB;AAEEE,MAAAA,OAAO,EAAE3E,OAAO,CAAC4E;AAFnB,KADF;AAMAN,IAAAA,iBAAiB;AAEjB7G,IAAAA,IAAI,CAACoH,IAAL,CAAUpE,eAAV;AACD,GAVD,MAUO,IAAIuD,cAAc,IAAIvD,eAAe,CAACC,MAAtC,EAA8C;AAEnD4D,IAAAA,iBAAiB;AACjB7G,IAAAA,IAAI,CAACoH,IAAL,CAAUpE,eAAV;AACD;;AAEDhD,EAAAA,IAAI,CAACqH,SAAL,CAAe,IAAf;AAEA,SAAOrH,IAAP;AACD,CApFM;AAsFP,IAAasH,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC/B,SAAO/G,OAAO,GAAGgH,QAAjB;AACD,CAFM;AAIP,IAAaC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAC/B,SAAOjH,OAAO,GAAGkH,QAAjB;AACD,CAFM;AAIP,IAAaC,YAAY,YAAZA,YAAY,CAAUnF,OAAV,EAAkB3C,UAAlB,EAA6B4C,MAA7B,EAAoCmF,QAApC;AAAA,MAAiD;AAAA;;AAAA;AA8DxE,UAAG9H,OAAO,CAACgD,QAAR,IAAoB,KAAvB,EAA6B;AAC3B,YAAG,OAAON,OAAO,CAACC,MAAf,IAAyB,WAA5B,EAAwC;AACtCf,UAAAA,OAAO,CAACC,KAAR,CAAc,uBAAd,EAAsCa,OAAO,CAACC,MAA9C;AACD;;AACD,YAAG,OAAOD,OAAO,CAACyE,GAAf,IAAsB,WAAzB,EAAqC;AACnCzE,UAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAuB,GAAvB;AACD;AACF;;AAED,UAAI,OAAO/H,OAAO,CAACgI,WAAf,IAA8B,WAA9B,IAA6C,CAAChI,OAAO,CAACgI,WAA1D,EAAsE;AACpEtF,QAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAyB,GAAzB;AACD,OAFD,MAEO;AACL,YAAG/H,OAAO,CAACiI,QAAX,EAAoB;AAElBvF,UAAAA,OAAO,CAACyE,GAAR,CAAYe,SAAZ,CAAsB,UAAtB,EAAiClI,OAAO,CAACiI,QAAzC;;AACA,cAAGjI,OAAO,CAACmI,UAAX,EAAsB;AACpBzF,YAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAyB/H,OAAO,CAACmI,UAAjC;AACD,WAFD,MAEO;AACLzF,YAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAyB,GAAzB;AACD;;AACD,cAAGrF,OAAO,CAACyE,GAAR,CAAYY,UAAZ,IAAwB,GAA3B,EAA+B;AAC7BrF,YAAAA,OAAO,CAACyE,GAAR,CAAYe,SAAZ,CAAsB,eAAtB,EAAsC,oBAAtC;AACAxF,YAAAA,OAAO,CAACyE,GAAR,CAAYe,SAAZ,CAAsB,SAAtB,EAAgC,+BAAhC;AACD;AACF;AACF;;AAED,UAAIjI,WAAW,GAAC,EAAhB;;AAEA,UAAIyC,OAAO,CAACG,OAAZ,EAAqB;AACnB5C,QAAAA,WAAW,GAAGE,IAAI,CAAC2C,oBAAL,EAAd;AACD,OAFD,MAEO,IAAIJ,OAAO,CAACE,KAAZ,EAAmB;AACxB3C,QAAAA,WAAW,gBAAOyC,OAAO,CAACE,KAAf,CAAX;AACD;;AA/FuE,6BAiG1Cd,cAAc,CAAC9B,OAAD,EAASC,WAAT,EAAqBF,UAArB,EAAgCG,cAAhC,CAjG4B,iBAiGlEJ,eAjGkE;AAAA;AAAA;AA2IxE,gBAAGK,IAAI,CAACC,QAAL,OAAoB,OAAO0H,QAAP,IAAkB,WAAlB,IAAiC,OAAOA,QAAP,IAAmB,SAAnB,IAAgCA,QAArF,CAAH,EAAkG;AAChG3H,cAAAA,IAAI,CAACiI,MAAL;AACD;;AA7IuE,gBA+IrErI,UA/IqE;AAgJtE,qBAAO;AACLsI,gBAAAA,KAAK,EAALA;AADK,eAAP;AAhJsE;AAqJtE,qBAAO;AACLA,gBAAAA,KAAK,EAALA,KADK;AAELC,gBAAAA,UAAU,EAAC;AAFN,eAAP;AArJsE;AAAA;;AA+HxE,cAAMD,KAAK,GAAG;AACZrI,YAAAA,OAAO,EAAEA,OADG;AAEZF,YAAAA,eAAe,EAAEA,eAFL;AAGZyI,YAAAA,eAAe,EAAEzE,eAHL;AAIZ0E,YAAAA,UAAU,EAAEA,UAJA;AAKZvI,YAAAA,WAAW,EAAGA;AALF,WAAd;;AA/HwE;AAAA,gBAuIrE,OAAO6H,QAAP,IAAmB,UAvIkD;AAAA,qCAwIhEA,QAAQ,CAACA,QAAD,CAxIwD;AAAA;AAAA;;AAAA;AAAA;;AAmGxE,YAAMU,UAAU,GAAC;AACfC,UAAAA,MAAM,EAAC,EADQ;AAEfC,UAAAA,SAAS,EAAC,EAFK;AAGfC,UAAAA,MAAM,EAAC;AAHQ,SAAjB;;AAnGwE,wCAyGpE;AAAA;AAAA,gBACCxF,eAAe,CAACqF,UAAhB,KACG9F,OAAO,CAACyE,GAAR,IAAezE,OAAO,CAACG,OAD1B,KAEE,EAAE5C,WAAW,CAACuI,UAAZ,IAA0BvI,WAAW,CAACuI,UAAZ,KAAyB,OAArD,CAHH;AAAA,qCAK2BtI,cAAc,CAAC4F,OAAf,CAAuB,WAAvB,EACxBI,KADwB,GAChBC,IADgB,CACX,QADW,EACDyC,IADC,CACI,CADJ,EACOvC,QADP,EAL3B,iBAKMwC,cALN;AAQAA,gBAAAA,cAAc,CAACC,OAAf,CAAuB,UAACjJ,IAAD,EAAQ;AAC7B,sBAAMkJ,SAAS,GAAClJ,IAAI,CAACmJ,GAAL,CAAS,WAAT,EAAsBC,WAAtB,EAAhB;;AAEA,sBAAGF,SAAS,IAAE,QAAd,EAAuB;AACrBP,oBAAAA,UAAU,CAACC,MAAX,CAAkBhC,IAAlB,CAAuB5G,IAAI,CAACmJ,GAAL,CAAS,MAAT,CAAvB;AACD,mBAFD,MAEO,IAAID,SAAS,IAAE,QAAf,EAAwB;AAC7BP,oBAAAA,UAAU,CAACG,MAAX,CAAkBlC,IAAlB,CAAuB5G,IAAI,CAACmJ,GAAL,CAAS,MAAT,CAAvB;AACD,mBAFM,MAEA,IAAID,SAAS,IAAE,WAAf,EAA2B;AAChCP,oBAAAA,UAAU,CAACE,SAAX,CAAqBjC,IAArB,CAA0B5G,IAAI,CAACmJ,GAAL,CAAS,MAAT,CAA1B;AACD;AACF,iBAVD;AARA;AAAA;AAAA;;AAAA;AAoBH,SA7HuE,YA6HhE5H,CA7HgE,EA6H9D;AAACQ,UAAAA,OAAO,CAACC,KAAR,CAAcT,CAAd;AAAiB,SA7H4C;;AAAA;AAAA;AAAA;;AACxEV,IAAAA,OAAO,CAACgC,OAAD,CAAP;AACAsB,IAAAA,aAAa,CAACjE,UAAD,CAAb;AAEAI,IAAAA,IAAI,CAACmG,UAAL,GAAgB,SAAhB;;AAEA,QAAG,CAACvG,UAAJ,EAAe;AACbI,MAAAA,IAAI,CAACmG,UAAL,GAAgB,QAAhB;;AACA,UAAGnG,IAAI,CAACC,QAAL,MACE8I,OADF,IAEEA,OAAO,CAACC,GAFV,IAGED,OAAO,CAACC,GAAR,CAAYC,mBAHjB,EAGqC;AACjCjJ,QAAAA,IAAI,CAACkJ,gBAAL,CAAsB,eAAtB,EAAsC,WAAWH,OAAO,CAACC,GAAR,CAAYC,mBAA7D;AACAjJ,QAAAA,IAAI,CAACmJ,OAAL,CAAa,MAAb;AACAnJ,QAAAA,IAAI,CAACoJ,cAAL,CAAoBpJ,IAAI,CAACqJ,cAAL,GAAsBC,OAAtB,CAA8B,QAA9B,EAAwC,QAAxC,CAApB;AACH;AACF;;AAED,QAAMvJ,cAAc,GAACC,IAAI,CAACuJ,iBAAL,EAArB;AAEA,QAAI1J,OAAO;AACT2J,MAAAA,KAAK,EAAE,gCADE;AAETC,MAAAA,SAAS,EAAE,gCAFF;AAGTC,MAAAA,IAAI,EAAE,EAHG;AAITC,MAAAA,SAAS,EAAE3J,IAAI,CAACqB,UAAL,EAJF;AAKTuI,MAAAA,KAAK,EAAE,CALE;AAMT3G,MAAAA,MAAM,EAAEjD,IAAI,CAACiD,MANJ;AAOT4G,MAAAA,IAAI,EAAE,MAPG;AAQTC,MAAAA,OAAO,EAAE;AARA,+BASE9J,IAAI,CAACqB,UAAL,EATF,WAUT0I,aAVS,GAUM/J,IAAI,CAACqB,UAAL,EAVN,WAWTwB,QAXS,GAWC,KAXD,WAYT+E,UAZS,GAYE,GAZF,WAaToC,MAbS,GAaF,EAbE,WAcTpI,cAdS,GAcM;AACbqI,MAAAA,cAAc,EAAC;AACb/H,QAAAA,KAAK,EAAC;AACJtB,UAAAA,KAAK,EAAC;AADF;AADO;AADF,KAdN,WAAX;;AApBwE,qCA2CpE;AAAA,6BACuB0B,aAAa,CAACC,OAAD,EAAS3C,UAAT,EAAoB4C,MAApB,EAA2BzC,cAA3B,CADpC,iBACImK,UADJ;AAAA,YAEC,OAAOA,UAAP,IAAqB,WAArB,IACE,OAAOA,UAAU,CAAC7D,MAAlB,IAA4B,WAH/B;AAIAxG,UAAAA,OAAO,GAAGqK,UAAU,CAAC7D,MAAX,EAAV;AAJA;AAMA5E,UAAAA,OAAO,CAACC,KAAR,CAAc,yBAAd,EAAwCwI,UAAxC;;AANA,cAOG,OAAO3H,OAAO,CAACyE,GAAf,IAAsB,WAPzB;AAAA,gBAQK,OAAOkD,UAAP,IAAqB,WAArB,IAAoC,OAAOA,UAAU,CAACtC,UAAlB,IAAgC,WARzE;AASIrF,cAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAuBsC,UAAU,CAACtC,UAAlC;AATJ;AAWIrF,cAAAA,OAAO,CAACyE,GAAR,CAAYY,UAAZ,GAAuB,GAAvB;AAXJ;AAAA;AAAA;AAAA;AAeH,KA1DuE,YA0D/D3G,CA1D+D,EA0D7D;AACTQ,MAAAA,OAAO,CAACC,KAAR,CAAcT,CAAd;AACD,KA5DuE;;AAAA;AA0JzE,GA1JwB;AAAA;AAAA;AAAA,CAAlB;;AC5MP,SAASkJ,SAAT,CAAmBjC,KAAnB,EAA0B;AACxB,MAAMlI,IAAI,GAAEO,OAAO,EAAnB;AACA,MAAMkD,UAAU,GAAGU,aAAa,EAAhC;AACA,MAAQzD,iBAAR,GAA+C+C,UAA/C,CAAQ/C,iBAAR;AAAA,MAA2BiD,eAA3B,GAA+CF,UAA/C,CAA2BE,eAA3B;AACA,MAAQyG,KAAR,GAAkDlC,KAAlD,CAAQkC,KAAR;AAAA,MAAehJ,UAAf,GAAkD8G,KAAlD,CAAe9G,UAAf;AAAA,MAA2BiJ,QAA3B,GAAkDnC,KAAlD,CAA2BmC,QAA3B;AAAA,MAAqCC,QAArC,GAAkDpC,KAAlD,CAAqCoC,QAArC;AAEA,MAAI1K,UAAU,GAAGmE,aAAa,EAA9B;;AACA,kBAA2BwG,QAAQ,CAAC,KAAD,CAAnC;AAAA,MAAOC,OAAP;AAAA,MAAeC,UAAf;;AAEAlG,EAAAA,SAAS,CAAC,YAAM;AACdkG,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAFQ,EAEN,EAFM,CAAT;AAUA,MAAIC,YAAY,GAAC,EAAjB;AACA,MAAIC,UAAU,GAAC,EAAf;AACA,MAAIC,aAAa,GAAC,EAAlB;;AAEA,MAAG,CAACJ,OAAD,IAAY5K,UAAZ,IAA0B,OAAOsI,KAAK,CAAC2C,YAAb,IAA6B,QAAvD,IAAmE/I,MAAM,CAACgJ,IAAP,CAAY5C,KAAK,CAAC2C,YAAlB,EAAgC9H,MAAtG,EAA6G;AAAA;;AAC3G,QAAMgI,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,QAAD,EAAY;AACxC,UAAMC,MAAM,GAAC,EAAb;AACA,UAAMC,OAAO,GAAC;AACZC,QAAAA,eAAe,EAAC;AADJ,OAAd;AAIArJ,MAAAA,MAAM,CAACgJ,IAAP,CAAYE,QAAZ,EAAsBrC,OAAtB,CAA8B,UAACyC,GAAD,EAAO;AACnC,YAAG,CAACF,OAAO,CAACE,GAAD,CAAX,EAAiB;AACf,cAAGpL,IAAI,CAACqL,QAAL,CAAcC,IAAd,CAAmBF,GAAnB,CAAH,EAA2B;AACzBH,YAAAA,MAAM,CAACjL,IAAI,CAACqL,QAAL,CAAcC,IAAd,CAAmBF,GAAnB,CAAD,CAAN,GAAgCJ,QAAQ,CAACI,GAAD,CAAxC;AACD,WAFD,MAEO;AACLH,YAAAA,MAAM,CAACG,GAAD,CAAN,GAAYJ,QAAQ,CAACI,GAAD,CAApB;AACD;AACF;AACF,OARD;AAUA,aAAOH,MAAP;AACD,KAjBD;;AAmBAP,IAAAA,YAAY,GAAExC,KAAD,aAACA,KAAD,sCAACA,KAAK,CAAE2C,YAAR,gDAAC,oBAAqBU,YAAtB,GAAsCR,qBAAqB,CAAC7C,KAAK,CAAC2C,YAAN,CAAmBU,YAApB,CAA3D,GAA+F,EAA5G;AACAZ,IAAAA,UAAU,GAAEzC,KAAD,aAACA,KAAD,uCAACA,KAAK,CAAE2C,YAAR,iDAAC,qBAAqBW,UAAtB,GAAoCT,qBAAqB,CAAC7C,KAAK,CAAC2C,YAAN,CAAmBW,UAApB,CAAzD,GAA2F,EAAtG;AACAZ,IAAAA,aAAa,GAAE1C,KAAD,aAACA,KAAD,uCAACA,KAAK,CAAE2C,YAAR,iDAAC,qBAAqBY,aAAtB,GAAuCV,qBAAqB,CAAC7C,KAAK,CAAC2C,YAAN,CAAmBY,aAApB,CAA5D,GAAiG,EAA/G;;AAEA,QAAG,OAAOC,QAAP,IAAmB,WAAtB,EAAkC;AAEhC,UAAMlJ,MAAM,GAACV,MAAM,CAACsB,MAAP,CACX,EADW,EACR;AACDyH,QAAAA,YAAY,EAAC3C,KAAK,CAAC2C,YADlB;AAEDzJ,QAAAA,UAAU,EAAC8G,KAAK,CAAC9G;AAFhB,OADQ,CAAb;AAOA,UAAMuK,KAAK,GAAC3L,IAAI,CAAC4L,aAAL,CAAmB,iBAAiBpJ,MAAM,CAACpB,UAA3C,CAAZ;AACA,UAAMyK,YAAY,GAAC7L,IAAI,CAAC8L,qBAAL,CAA2BtJ,MAAM,CAACpB,UAAlC,EAA6C,KAA7C,CAAnB;;AAEA,aAAOuK,KAAK,CAACzL,QAAN,CAAe6C,MAAtB,EAA8B;AAC5B4I,QAAAA,KAAK,CAACtL,UAAN,CAAiB,CAAjB;AACD;;AAEDL,MAAAA,IAAI,CAAC+L,iBAAL,CAAuBvJ,MAAM,CAACqI,YAA9B,EAA2CgB,YAAY,CAACpL,MAAxD,EAA+DkL,KAA/D;AACA3L,MAAAA,IAAI,CAACgM,oBAAL,CAA0BxJ,MAAM,CAACqI,YAAjC,EAA8Cc,KAA9C,EAAoDnJ,MAAM,CAACpB,UAA3D;AACApB,MAAAA,IAAI,CAAC+L,iBAAL,CAAuBvJ,MAAM,CAACqI,YAA9B,EAA2CgB,YAAY,CAACI,IAAxD,EAA6DN,KAA7D;AACA3L,MAAAA,IAAI,CAAC+L,iBAAL,CAAuBvJ,MAAM,CAACqI,YAA9B,EAA2CgB,YAAY,CAAChM,OAAxD,EAAgE8L,KAAhE;AAED;AACF;;AAED,MAAMO,SAAS,GAAG;AAChBC,IAAAA,SAAS,EAAE,+BADK;AAEhB,mBAAc;AAFE,GAAlB;AAKA,MAAMC,UAAU,GAAG;AACjBD,IAAAA,SAAS,EAAE;AADM,GAAnB;AAIA,MAAME,OAAO,GAAC;AACZF,IAAAA,SAAS,EAAC;AADE,GAAd;AAIA,MAAMG,cAAc,GAAC;AACnBH,IAAAA,SAAS,EAAC;AADS,GAArB;AAKA,MAAMI,gBAAgB,GAAC5I,eAAe,CAACuE,KAAK,CAACzH,MAAP,CAAtC;AAEA,MAAI+L,SAAS,GAAGtE,KAAK,CAACzH,MAAtB;;AAEA,MAAI,OAAOC,iBAAiB,CAAC8L,SAAD,CAAxB,IAAuC,WAA3C,EAAuD;AACrDA,IAAAA,SAAS,GAAGxM,IAAI,CAACW,gBAAL,CAAsBuH,KAAK,CAACzH,MAA5B,CAAZ;AACD;;AAED,MAAIgM,KAAK,GAAC/L,iBAAiB,CAAC8L,SAAD,CAAjB,KAAiC9L,iBAAiB,CAAC8L,SAAD,CAAjB,CAA6BlL,GAA7B,IAAoCZ,iBAAiB,CAAC8L,SAAD,CAAjB,CAA6BE,GAAlG,CAAV;;AAEA,MAAG,OAAOxE,KAAK,CAACwE,GAAb,IAAoB,WAApB,IAAmC,CAACxE,KAAK,CAACwE,GAA1C,IAAiD,OAAOxE,KAAK,CAAC5G,GAAb,IAAoB,WAApB,IAAmC,CAAC4G,KAAK,CAAC5G,GAA9F,EAAkG;AAChGmL,IAAAA,KAAK,GAAC,KAAN;AACD;;AAED,MAAI7M,UAAU,IAAI2M,gBAAd,IAAkC,CAACE,KAAvC,EAA8C;AAC5C3K,IAAAA,MAAM,CAACgJ,IAAP,CAAY5C,KAAZ,EAAmBS,OAAnB,CAA2B,UAAAyC,GAAG,EAAI;AAChC,UACE,CAAC,CAAC,aAAD,EAAe,QAAf,EAAyB,MAAzB,EAAgC,MAAhC,EAAwC,SAAxC,EAAmD,UAAnD,EAA+D,YAA/D,EAA6E,YAA7E,EAA0F,cAA1F,EAA0G,iBAA1G,EAA6H,eAA7H,EAA8I,gBAA9I,EAAgK,MAAhK,EAAwK5E,IAAxK,CACC,UAAAmG,aAAa;AAAA,eAAIA,aAAa,KAAKvB,GAAtB;AAAA,OADd,CADH,EAIE;AACA,YAAI,OAAOlD,KAAK,CAACkD,GAAD,CAAZ,KAAsB,QAA1B,EAAoC;AAClCc,UAAAA,SAAS,WAASd,GAAT,CAAT,GAA2BrK,IAAI,CAAC6L,SAAL,CAAe1E,KAAK,CAACkD,GAAD,CAApB,CAA3B;AACD,SAFD,MAEO,IACL,OAAOlD,KAAK,CAACkD,GAAD,CAAZ,KAAsB,WAAtB,IACA,EAAE,OAAOlD,KAAK,CAACkD,GAAD,CAAZ,KAAsB,QAAtB,IAAkClD,KAAK,CAACkD,GAAD,CAAL,KAAe,EAAnD,CAFK,EAGL;AACAc,UAAAA,SAAS,WAASd,GAAT,CAAT,GAA2BlD,KAAK,CAACkD,GAAD,CAAhC;AACD;AACF;;AACD,UAAG,OAAOlD,KAAK,CAACkD,GAAD,CAAZ,IAAqB,WAArB,IAAoClD,KAAK,CAACkD,GAAD,CAA5C,EAAkD;AAChD,YAAIA,GAAG,KAAK,OAAZ,EAAqB;AACnBc,UAAAA,SAAS,CAACC,SAAV,IAAwBD,SAAS,CAACC,SAAX,SAA4BjE,KAAK,CAACkD,GAAD,CAAjC,GAA2ClD,KAAK,CAACkD,GAAD,CAAvE;AAA6E,AAC9E,SAFD,MAEO,IAAIA,GAAG,KAAK,UAAZ,EAAwB;AAC7Bc,UAAAA,SAAS,CAACC,SAAV,IAAwBD,SAAS,CAACC,SAAX,SAA4BjE,KAAK,CAACkD,GAAD,CAAjC,GAA2ClD,KAAK,CAACkD,GAAD,CAAvE;AACD,SAFM,MAEA,IAAIA,GAAG,KAAK,OAAZ,EAAqB;AAC1Bc,UAAAA,SAAS,CAACW,EAAV,GAAe3E,KAAK,CAACkD,GAAD,CAApB;AACD,SAFM,MAEA,IAAIA,GAAG,KAAK,iBAAZ,EAA+B;AACpCgB,UAAAA,UAAU,CAACD,SAAX,IAA0BC,UAAU,CAACD,SAAZ,SAA6BjE,KAAK,CAACkD,GAAD,CAAlC,GAA4ClD,KAAK,CAACkD,GAAD,CAA1E;AACD,SAFM,MAEA,IAAIA,GAAG,KAAK,cAAZ,EAA4B;AACjCgB,UAAAA,UAAU,CAACS,EAAX,GAAgB3E,KAAK,CAACkD,GAAD,CAArB;AACD,SAFM,MAEA,IAAIA,GAAG,KAAK,cAAZ,EAA4B;AACjCiB,UAAAA,OAAO,CAACF,SAAR,IAAsBE,OAAO,CAACF,SAAT,SAA0BjE,KAAK,CAACkD,GAAD,CAA/B,GAAyClD,KAAK,CAACkD,GAAD,CAAnE;AACD,SAFM,MAEA,IAAIA,GAAG,KAAK,WAAZ,EAAyB;AAC9BiB,UAAAA,OAAO,CAACQ,EAAR,GAAa3E,KAAK,CAACkD,GAAD,CAAlB;AACD;AACF;AACF,KAhCD;;AAkCA,QAAGc,SAAS,CAACC,SAAV,CAAoBvH,KAApB,CAA0B,GAA1B,EAA+B4B,IAA/B,CAAoC,UAAAsG,MAAM;AAAA,aAAIA,MAAM,KAAK,WAAf;AAAA,KAA1C,CAAH,EAAyE;AACvER,MAAAA,cAAc,CAACH,SAAf,IAA4B,YAA5B;AACD;AACF,GAtCD,MAsCO;AACLD,IAAAA,SAAS,CAAC,iBAAD,CAAT,GAA+B9K,UAA/B;AAEA8K,IAAAA,SAAS,CAACC,SAAV,oBAAqCjE,KAAK,CAACzH,MAA3C;;AAEA,QAAG,OAAOyH,KAAK,CAACvI,eAAb,IAAgC,WAAhC,IAA+C,OAAOuI,KAAK,CAACvI,eAAN,CAAsByB,UAAtB,CAAP,IAA4C,WAA9F,EAA0G;AACxG8K,MAAAA,SAAS,CAACC,SAAV,UACMjE,KAAK,CAACvI,eAAN,CAAsByB,UAAtB,EAAkC2L,OAAlC,CAA0CtM,MAA1C,CAAiDuM,KADvD;AAEAd,MAAAA,SAAS,CAACW,EAAV,GAAe3E,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDtM,MAAhD,CAAuDoM,EAAtE;AACAT,MAAAA,UAAU,CAACD,SAAX,GACEjE,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDlN,OAAhD,CAAwDmN,KAD1D;AAEAZ,MAAAA,UAAU,CAACS,EAAX,GAAgB3E,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDlN,OAAhD,CAAwDgN,EAAxE;AACAP,MAAAA,cAAc,CAACH,SAAf,GACEjE,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDE,WAAhD,CAA4DD,KAD9D;AAEAX,MAAAA,OAAO,CAACF,SAAR,GACEjE,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDd,IAAhD,CAAqDe,KADvD;AAEAX,MAAAA,OAAO,CAACQ,EAAR,GACE3E,KAAK,CAACvI,eAAN,CAAsBuI,KAAK,CAAC9G,UAA5B,EAAwC2L,OAAxC,CAAgDd,IAAhD,CAAqDY,EADvD;AAED,KAbD,MAaO;AACLX,MAAAA,SAAS,CAACW,EAAV,GAAe,EAAf;AACAT,MAAAA,UAAU,CAACS,EAAX,GAAgB,EAAhB;AACAP,MAAAA,cAAc,CAACH,SAAf,GAA2B,EAA3B;AACAE,MAAAA,OAAO,CAACF,SAAR,GAAoB,EAApB;AACAE,MAAAA,OAAO,CAACQ,EAAR,GAAY,GAAZ;AACD;;AAED,KAAC,eAAD,EAAiB,gBAAjB,EAAkC,aAAlC,EAAiDlE,OAAjD,CAAyD,UAACyC,GAAD,EAAO;AAC9D,UAAG,OAAOlD,KAAK,CAACkD,GAAD,CAAZ,IAAqB,WAArB,IAAoClD,KAAK,CAACkD,GAAD,CAAzC,IAAkDlD,KAAK,CAACkD,GAAD,CAAL,IAAc,QAAnE,EAA4E;AAC1Ec,QAAAA,SAAS,CAAC,UAAUd,GAAX,CAAT,GAA2BlD,KAAK,CAACkD,GAAD,CAAhC;AACD;AACF,KAJD;AAMD;;AAED,MAAGmB,gBAAgB,IAAI,CAACE,KAAxB,EAA8B;AAC5B,QAAGF,gBAAgB,IAAIrE,KAAK,CAACgF,IAA7B,EAAkC;AAChC;AAAA;AAAK,QAAA,KAAK,EAAExC;AAAZ,SAA8BwB,SAA9B,GACG9B,KAAK,gBAAG;AAAK,QAAA,MAAM,EAAEO,UAAb;AAAyB,QAAA,KAAK,EAAEP,KAAhC;AAAuC,QAAA,QAAQ,EAAEC,QAAjD;AAA2D,QAAA,OAAO,EAAEgC,OAApE;AAA6E,QAAA,cAAc,EAAEC;AAA7F,QAAH,GAAoH,IAD5H,EAEGlC,KAAK,gBAAG;AAAK,QAAA,SAAS,EAAC;AAAf,QAAH,GAAyC,IAFjD,eAGE;AAAK,QAAA,KAAK,EAAEQ;AAAZ,SAA+BwB,UAA/B;AAA2C,QAAA,uBAAuB,EAAE;AAACe,UAAAA,MAAM,EAACjF,KAAK,CAACgF;AAAd;AAApE,SAHF;AAKD,KAND,MAMO;AACL,0BACE;AAAK,QAAA,KAAK,EAAExC;AAAZ,SAA8BwB,SAA9B,EADF;AAGD;AACF,GAZD,MAYO;AACL,wBACE;AAAK,MAAA,KAAK,EAAExB;AAAZ,OAA8BwB,SAA9B,GACG9B,KAAK,gBAAG,oBAAC,IAAD;AAAM,MAAA,MAAM,EAAEO,UAAd;AAA0B,MAAA,KAAK,EAAEP,KAAjC;AAAwC,MAAA,QAAQ,EAAEC,QAAlD;AAA4D,MAAA,OAAO,EAAEgC,OAArE;AAA8E,MAAA,cAAc,EAAEC;AAA9F,MAAH,GAAqH,IAD7H,EAEGlC,KAAK,gBAAG;AAAK,MAAA,SAAS,EAAC;AAAf,MAAH,GAAyC,IAFjD,eAGE;AAAK,MAAA,KAAK,EAAEQ;AAAZ,OAA+BwB,UAA/B,GAA4C9B,QAA5C,CAHF,CADF;AAOD;AAEF;;AAED,IAAM8C,IAAI,GAAG,SAAPA,IAAO,OAA0D;AAAA,MAAvDhD,KAAuD,QAAvDA,KAAuD;AAAA,MAAhDC,QAAgD,QAAhDA,QAAgD;AAAA,MAAtCgD,OAAsC,QAAtCA,OAAsC;AAAA,MAA7BC,cAA6B,QAA7BA,cAA6B;AAAA,MAAbrC,MAAa,QAAbA,MAAa;AACrE,MAAMsC,WAAW,GAAGlD,QAAQ,QAAMA,QAAN,GAAmB,IAA/C;AACA,sBACE,2BAASiD,cAAT,eACE;AAAK,IAAA,KAAK,EAAErC;AAAZ,KAAwBoC,OAAxB,gBACE,oBAAC,WAAD,QAAcjD,KAAd,CADF,CADF,CADF;AAOD,CATD;;ICxMaoD,WAAW,GAAGC,aAAa,EAAjC;AAEP,IAAaC,WAAW,GAAGD,aAAa,EAAjC;;ACAP,IAAME,oBAAoB,GAAG,SAAvBA,oBAAuB,OAA+C;AAAA,MAA5CrD,QAA4C,QAA5CA,QAA4C;AAAA,MAAlCrI,MAAkC,QAAlCA,MAAkC;AAAA,MAA1B2L,OAA0B,QAA1BA,OAA0B;AAAA,MAAjBhO,UAAiB,QAAjBA,UAAiB;AAC1E,MAAIiO,GAAG,GAAG,IAAV;;AACA,MAAI,OAAO5L,MAAM,CAAC6L,IAAd,KAAuB,WAAvB,IAAsClO,UAA1C,EAAsD;AACpD,QAAIgO,OAAO,KAAK,WAAZ,IAA2B3L,MAAM,CAACG,SAAP,CAAiBxB,KAAjB,CAAuBmC,MAAtD,EAA8D;AAC5D8K,MAAAA,GAAG,gBACD;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAM,QAAA,SAAS,EAAC;AAAhB,SACG5L,MAAM,CAAC6L,IAAP,CAAYC,WAAZ,EADH,gBADF,CADF,EAMGzD,QANH,CADF;AAUD;;AAAC,QAAIsD,OAAO,KAAK,OAAhB,EAAyB;AACzBC,MAAAA,GAAG,gBACD;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AACE,QAAA,SAAS,EAAC,yDADZ;AAEE,sBAAW,OAFb;AAGE,yBAAe5L,MAAM,CAAC+L,QAHxB;AAIE,uBAAY,OAJd;AAKE,qBAAU;AALZ,sBAOE;AAAO,QAAA,SAAS,EAAC,qBAAjB;AAAuC,QAAA,KAAK,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX;AAA9C,SACGhM,MAAM,CAAC6L,IAAP,CAAYC,WAAZ,EADH,CAPF,EAUGzD,QAVH,CADF,CADF;AAgBD;AACF,GA9BD,MA8BO;AACL,QAAM4D,UAAU,oBAAoBN,OAApC;AAEAC,IAAAA,GAAG,gBAAG;AAAK,MAAA,SAAS,EAAEK;AAAhB,OAA6B5D,QAA7B,CAAN;AACD;;AACD,SAAOuD,GAAP;AACD,CAtCD;;AAwCA,IAAMM,aAAa,GAAG,SAAhBA,aAAgB,QAAgE;AAAA,MAA7DlM,MAA6D,SAA7DA,MAA6D;AAAA,MAArDtC,eAAqD,SAArDA,eAAqD;AAAA,MAApCE,OAAoC,SAApCA,OAAoC;AAAA,MAA3B0C,OAA2B,SAA3BA,OAA2B;AAAA,MAAlBzC,WAAkB,SAAlBA,WAAkB;AACpF,MAAMF,UAAU,GAAGmE,aAAa,EAAhC;AACA,MAAMhE,cAAc,GAACQ,OAAO,GAAGgJ,iBAAV,EAArB;AAEA,MAAInH,SAAS,GAAG,EAAhB;;AAEA,MAAIH,MAAM,CAACG,SAAP,IAAoBH,MAAM,CAACG,SAAP,CAAiBxB,KAAjB,CAAuBmC,MAA/C,EAAuD;AACrDX,IAAAA,SAAS,gBACP,oBAAC,oBAAD;AACE,MAAA,MAAM,EAAEH,MADV;AAEE,MAAA,UAAU,EAAErC,UAFd;AAGE,MAAA,OAAO,EAAC;AAHV,OAKGqC,MAAM,CAACG,SAAP,CAAiBxB,KAAjB,CAAuB0E,GAAvB,CAA2B,UAAA5F,IAAI,EAAI;AAClC,UAAM0O,GAAG,GAAGtM,MAAM,CAACsB,MAAP,CAAc,EAAd,EAAkB1D,IAAlB,CAAZ;AACA0O,MAAAA,GAAG,CAAChD,GAAJ,GAAUgD,GAAG,CAAChN,UAAd;AACAgN,MAAAA,GAAG,CAACzO,eAAJ,GAAsBA,eAAtB;AACAyO,MAAAA,GAAG,CAACvO,OAAJ,GAAcA,OAAd;AACAuO,MAAAA,GAAG,CAACtO,WAAJ,GAAkBA,WAAlB;AACAsO,MAAAA,GAAG,CAACC,aAAJ,GAAqB9L,OAArB;AACA6L,MAAAA,GAAG,CAACrO,cAAJ,GAAsBA,cAAtB;AACA,0BAAO,oBAAC,SAAD,EAAeqO,GAAf,EAAqBrJ,YAAY,CAACqJ,GAAD,CAAjC,CAAP;AACD,KATA,CALH,CADF;AAkBD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAA6B,qBAAenM,MAAM,CAAC+L;AAAnD,KACG5L,SADH,eAEE,oBAAC,oBAAD;AACE,IAAA,MAAM,EAAEH,MADV;AAEE,IAAA,UAAU,EAAErC,UAFd;AAGE,IAAA,OAAO,EAAC;AAHV,KAKGqC,MAAM,CAACC,KAAP,CAAatB,KAAb,CAAmB0E,GAAnB,CAAuB,UAAA5F,IAAI,EAAI;AAC9B,QAAM0O,GAAG,GAAGtM,MAAM,CAACsB,MAAP,CAAc,EAAd,EAAkB1D,IAAlB,CAAZ;AACA0O,IAAAA,GAAG,CAAChD,GAAJ,GAAUgD,GAAG,CAAChN,UAAd;AACAgN,IAAAA,GAAG,CAACzO,eAAJ,GAAsBA,eAAtB;AACAyO,IAAAA,GAAG,CAACvO,OAAJ,GAAcA,OAAd;AACAuO,IAAAA,GAAG,CAACtO,WAAJ,GAAkBA,WAAlB;AACAsO,IAAAA,GAAG,CAACC,aAAJ,GAAqB9L,OAArB;AACA6L,IAAAA,GAAG,CAACrO,cAAJ,GAAsBA,cAAtB;AACA,wBAAO,oBAAC,SAAD,EAAeqO,GAAf,EAAqBrJ,YAAY,CAACqJ,GAAD,CAAjC,CAAP;AACD,GATA,CALH,CAFF,CADF;AAqBD,CAhDD;;AC1CA,SAASE,cAAT,CAAwBpG,KAAxB,EAA+B;AAC3B,MAAQE,eAAR,GAA4BF,KAA5B,CAAQE,eAAR;;AACA,MAAI,OAAOA,eAAP,KAA2B,WAA/B,EAA4C;AACzC,wBACE;AAAK,MAAA,SAAS,EAAC;AAAf,OACItG,MAAM,CAACgJ,IAAP,CAAY1C,eAAZ,EAA6B9C,GAA7B,CAAiC,UAAA8F,GAAG,EAAI;AACrC,UAAMmD,MAAM,GAAGnG,eAAe,CAACgD,GAAD,CAA9B;;AACA,UAAGmD,MAAM,CAACC,EAAP,IAAa3N,KAAK,CAACC,OAAN,CAAcyN,MAAM,CAACC,EAArB,CAAhB,EAAyC;AACrC,eACID,MAAM,CAACC,EAAP,CAAUlJ,GAAV,CAAc,UAAC5F,IAAD,EAAQ;AAClB,8BACI;AAAQ,YAAA,GAAG,EAAEA,IAAb;AAAmB,YAAA,GAAG,EAAEA,IAAxB;AAA8B,YAAA,KAAK;AAAnC,YADJ;AAGH,SAJD,CADJ;AAOH;AACJ,KAXA,CADJ,EAaIoC,MAAM,CAACgJ,IAAP,CAAY1C,eAAZ,EAA6B9C,GAA7B,CAAiC,UAAA8F,GAAG,EAAI;AACrC,UAAMmD,MAAM,GAAGnG,eAAe,CAACgD,GAAD,CAA9B;;AACA,UAAGmD,MAAM,CAACE,GAAP,IAAc5N,KAAK,CAACC,OAAN,CAAcyN,MAAM,CAACE,GAArB,CAAjB,EAA2C;AACvC,eACIF,MAAM,CAACE,GAAP,CAAWnJ,GAAX,CAAe,UAAC5F,IAAD,EAAQ;AACnB,8BACI;AAAM,YAAA,GAAG,EAAEA,IAAX;AAAiB,YAAA,GAAG,EAAC,YAArB;AAAkC,YAAA,IAAI,EAAEA;AAAxC,YADJ;AAGH,SAJD,CADJ;AAOH;AACJ,KAXA,CAbJ,CADF;AA4BF,GA7BD,MA6BO;AACH,wBAAO;AAAK,MAAA,SAAS,EAAC;AAAf,MAAP;AACH;AACF;;ACjCH,IAAMgP,UAAU,GAAG,SAAbA,UAAa,OAAgB;AAAA,MAAdpE,QAAc,QAAdA,QAAc;AAE/BzG,EAAAA,aAAa,CAAC,IAAD,CAAb;AAEA,sBACI,iCACKyG,QADL,eAEI;AAAK,IAAA,EAAE,EAAC;AAAR,IAFJ,CADJ;AAMH,CAVD;;ACAA,SAASqE,MAAT,CAAgBzG,KAAhB,EAAuB;AACrB,MAAQvI,eAAR,GAA4BuI,KAA5B,CAAQvI,eAAR;;AAEA,MAAI,CAACoE,aAAa,EAAd,IAAoB,OAAOpE,eAAP,KAA2B,WAAnD,EAAgE;AAC9D,wBACE,0CACGmC,MAAM,CAACgJ,IAAP,CAAYnL,eAAZ,EAA6B2F,GAA7B,CAAiC,UAAAlE,UAAU,EAAI;AAC9C,UAAMwN,KAAK,GAAGjP,eAAe,CAACyB,UAAD,CAA7B;AACA,UAAMyL,EAAE,oBAAgBzL,UAAxB;AACA,0BACE;AACE,QAAA,EAAE,EAAEyL,EADN;AAEE,QAAA,GAAG,EAAEA,EAFP;AAGE,QAAA,uBAAuB,EAAE;AAAEM,UAAAA,MAAM,EAAEyB,KAAK,CAAC1O,QAAN,CAAeiD,IAAf,CAAoB,IAApB;AAAV;AAH3B,QADF;AAOD,KAVA,CADH,CADF;AAeD;;AAED,sBAAO,yCAAP;AAED;;ACnBD,IAAM0L,UAAU,GAAG,SAAbA,UAAa,CAAA3G,KAAK,EAAI;AAC1B,MAAMlI,IAAI,GAAEO,OAAO,EAAnB;AACA,MAAQV,OAAR,GAA+CqI,KAA/C,CAAQrI,OAAR;AAAA,MAAiBF,eAAjB,GAA+CuI,KAA/C,CAAiBvI,eAAjB;AAAA,MAAkC2K,QAAlC,GAA+CpC,KAA/C,CAAkCoC,QAAlC;AAEAtK,EAAAA,IAAI,CAACL,eAAL,GAAuBA,eAAvB;AAEA4E,EAAAA,SAAS,CAAC,YAAM;AACduK,IAAAA,gBAAgB,CAACjP,OAAD,CAAhB;AACD,GAFQ,EAEP,CAACA,OAAO,CAACkK,aAAT,CAFO,CAAT;AAIA,sBACE,iCACGO,QADH,eAEE,oBAACyE,cAAD,EAAwB7G,KAAxB,CAFF,eAGE,oBAAC8G,MAAD,EAAgB9G,KAAhB,CAHF,CADF;AAOD,CAjBD;;AAmBA,SAAS4G,gBAAT,CAA0BG,QAA1B,EAAoC;AAClC,MAAMpP,OAAO,GAAGG,IAAI,CAACkP,SAAL,CAAe,SAAf,EAA0BC,GAA1B,CAA8BF,QAA9B,CAAhB;AAEA1O,EAAAA,OAAO;;AAEP,MAAIV,OAAO,CAACgJ,GAAR,CAAY,UAAZ,CAAJ,EAA6B;AAE3B,QAAG7I,IAAI,CAAC4G,SAAR,EAAkB;AAChB,UAAMwI,SAAS,GAACC,MAAM,CAAC3I,QAAP,CAAgBC,QAAhB,CAAyB/B,KAAzB,CAA+B,GAA/B,EAAoCC,MAApC,CAA2C,UAACnF,IAAD,EAAQ;AACjE,YAAGA,IAAH,EAAQ;AACN,iBAAO,IAAP;AACD;AACF,OAJe,CAAhB;AAKA,UAAIE,UAAU,GAAEwP,SAAS,CAACrM,MAAV,IAAoB,MAAMqM,SAAS,CAAC,CAAD,CAAf,IAAoBpP,IAAI,CAAC4G,SAA7D;;AAQA,UAAG,CAAChH,UAAD,IAAeC,OAAO,CAACgJ,GAAR,CAAY,UAAZ,EAAwByG,OAAxB,CAAgC,UAAhC,CAAlB,EAA8D;AAC5D,YAAI1I,SAAS,GAAC,EAAd;;AAEA,YAAGwI,SAAS,CAACrM,MAAb,EAAoB;AAClB6D,UAAAA,SAAS,GAAC,WAAYwI,SAAS,CAACjM,IAAV,CAAe,GAAf,CAAZ,GAAkC,GAA5C;AACA1B,UAAAA,OAAO,CAAC+D,GAAR,CAAY,2BAAZ,EAAwCoB,SAAxC;AACAF,UAAAA,QAAQ,CAAC6I,IAAT,GAAgB3I,SAAhB;AACD,SAJD,MAIO;AACLA,UAAAA,SAAS,GAAC,QAAV;AACAnF,UAAAA,OAAO,CAAC+D,GAAR,CAAY,2BAAZ,EAAwCoB,SAAxC;AACAF,UAAAA,QAAQ,CAAC6I,IAAT,GAAgB3I,SAAhB;AACD;AACF,OAZD,MAYO;AACLnF,QAAAA,OAAO,CAAC+D,GAAR,CAAY,aAAZ,EAA2B3F,OAAO,CAACgJ,GAAR,CAAY,UAAZ,CAA3B;AACAnC,QAAAA,QAAQ,CAAC6I,IAAT,GAAgB1P,OAAO,CAACgJ,GAAR,CAAY,UAAZ,CAAhB;AACD;AACF,KA9BD,MA8BO;AACLpH,MAAAA,OAAO,CAAC+D,GAAR,CAAY,aAAZ,EAA2B3F,OAAO,CAACgJ,GAAR,CAAY,UAAZ,CAA3B;AACAnC,MAAAA,QAAQ,CAAC6I,IAAT,GAAgB1P,OAAO,CAACgJ,GAAR,CAAY,UAAZ,CAAhB;AACD;;AAED;AACD;;AAGD7I,EAAAA,IAAI,CAAC,yDAAD,CAAJ,CAAgEwP,MAAhE;;AAEA,MAAI,OAAOxP,IAAI,CAACyP,mBAAZ,KAAoC,WAAxC,EAAqD;AACnDzP,IAAAA,IAAI,CAACyP,mBAAL;AACD;;AAEDzP,EAAAA,IAAI,CAAC,WAAD,CAAJ,CAAkB0P,IAAlB,CAAuB,OAAvB,EAAgC,EAAhC;AAEAC,EAAAA,UAAU,CAAC,YAAM;AAEf,QAAI,OAAOC,gBAAP,KAA4B,WAAhC,EAA6C;AAC3C5P,MAAAA,IAAI,CAAC,WAAD,CAAJ,CAAkB0P,IAAlB,CAAuB,OAAvB,EAAgC,EAAhC;AACD;;AAGD,QAAMG,uBAAuB,GAAG7P,IAAI,CAAC,aAAD,CAApC;;AACA,QAAI6P,uBAAuB,CAAC9M,MAA5B,EAAoC;AAClC/C,MAAAA,IAAI,CAAC,aAAD,CAAJ,CAAoBkN,IAApB,CACErN,OAAO,CAACgJ,GAAR,CAAY,eAAZ,IAA+BhJ,OAAO,CAACgJ,GAAR,CAAY,eAAZ,CADjC;AAGD;;AAMD7I,IAAAA,IAAI,CAACoH,IAAL,CAAUpH,IAAI,CAAC8P,MAAL,CAAY;AAAE5L,MAAAA,aAAa,EAAC,IAAhB;AAAqB6L,MAAAA,YAAY,EAAE,KAAnC;AAA0ClQ,MAAAA,OAAO,EAAPA;AAA1C,KAAZ,CAAV;AAEAG,IAAAA,IAAI,CAACqH,SAAL,CAAe,KAAf;;AAGA,QAAI,CAACwI,uBAAuB,CAAC9M,MAAzB,IAAmC/C,IAAI,CAACgQ,UAA5C,EAAwD;AACtDhQ,MAAAA,IAAI,CAACiQ,MAAL,GAAcC,MAAd,CAAqBlQ,IAAI,CAACuH,QAAL,GAAgB,sDAAhB,GAAyEvH,IAAI,CAACiD,MAA9E,GAAuF,WAAvF,GAAqGkN,IAAI,CAACC,MAAL,EAA1H;AACD;;AACD,QAAGpQ,IAAI,CAACqQ,GAAR,EAAY;AACV,UAAGrQ,IAAI,CAACsQ,WAAL,KAAmB,OAAtB,EAA8B;AAC5BtQ,QAAAA,IAAI,CAACiQ,MAAL,GAAcC,MAAd,CAAqBlQ,IAAI,CAACuH,QAAL,GAAgB,oCAAhB,GAAuDvH,IAAI,CAACiD,MAA5D,GAAqE,iBAArE,GAAyFjD,IAAI,CAAC+J,aAA9F,GAA8G,aAA9G,GAA8H/J,IAAI,CAAC2J,SAAnI,GAA+I,WAA/I,GAA6JwG,IAAI,CAACC,MAAL,EAAlL;AACD,OAFD,MAEO;AACLpQ,QAAAA,IAAI,CAACiQ,MAAL,GAAcC,MAAd,CAAqBlQ,IAAI,CAACuH,QAAL,GAAgB,qCAAhB,GAAwDvH,IAAI,CAACiD,MAA7D,GAAsE,iBAAtE,GAA0FjD,IAAI,CAAC+J,aAA/F,GAA+G,aAA/G,GAA+H/J,IAAI,CAAC2J,SAApI,GAAgJ,WAAhJ,GAA8JwG,IAAI,CAACC,MAAL,EAAnL;AACD;AACF;AACF,GAjCS,EAiCR,CAjCQ,CAAV;AAmCD;;;;"}